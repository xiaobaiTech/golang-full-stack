<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.7" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.23" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://golangguide.top/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E8%BF%9E%E6%8E%A5%E4%B8%80%E4%B8%AAIP%E4%B8%8D%E5%AD%98%E5%9C%A8%E7%9A%84%E4%B8%BB%E6%9C%BA%E6%97%B6%EF%BC%8C%E6%8F%A1%E6%89%8B%E8%BF%87%E7%A8%8B%E6%98%AF%E6%80%8E%E6%A0%B7%E7%9A%84.html"><meta property="og:site_name" content="golang全栈指南"><meta property="og:title" content="连接一个 IP 不存在的主机时，握手过程是怎样的？"><meta property="og:description" content=" 文章持续更新，可以微信搜一搜「小白 debug」第一时间阅读，回复【面试】获免费面试题集。本文已经收录在 GitHub https://github.com/xiaobaiTech/golangFamily , 有大厂面试完整考点和成长路线，欢迎 Star。 鸽了好长时间了，最近很忙。以前工作忙完，就抽空写文章。 现在忙完工作，还要一三五学驾照，二四..."><meta property="og:type" content="article"><meta property="og:image" content="https://cdn.xiaobaidebug.top/image/12021625633784_.pic.jpg"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-05-12T13:55:00.000Z"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:alt" content="连接一个 IP 不存在的主机时，握手过程是怎样的？"><meta property="article:author" content="小白debug"><meta property="article:published_time" content="2021-07-25T22:57:55.000Z"><meta property="article:modified_time" content="2024-05-12T13:55:00.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"连接一个 IP 不存在的主机时，握手过程是怎样的？","image":["https://cdn.xiaobaidebug.top/image/12021625633784_.pic.jpg","https://cdn.xiaobaidebug.top/image/12011625633784_.pic.jpg","https://cdn.xiaobaidebug.top/image/%E6%AD%A3%E5%B8%B8%E6%83%85%E5%86%B5%E4%B8%8B%E7%9A%84TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B1.png","https://cdn.xiaobaidebug.top/image/image-20210626164202297.png","https://cdn.xiaobaidebug.top/image/%E5%AE%B6%E7%94%A8%E8%B7%AF%E7%94%B1%E5%99%A8%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%92%E8%81%94.png","https://cdn.xiaobaidebug.top/image/image-20210619112642833.png","https://cdn.xiaobaidebug.top/image/%E6%AD%A3%E5%B8%B8connect%E7%9A%84%E6%B5%81%E7%A8%8B.png","https://cdn.xiaobaidebug.top/image/tcp%E6%8A%A5%E5%A4%B4%E7%9A%84SYN.png","https://cdn.xiaobaidebug.top/image/ARP%E6%B5%81%E7%A8%8B3.png","https://cdn.xiaobaidebug.top/image/image-20210619111302173.png","https://cdn.xiaobaidebug.top/image/SYN%E9%87%8D%E4%BC%A0.png","https://cdn.xiaobaidebug.top/image/image-20210627090037348.png","https://cdn.xiaobaidebug.top/image/%E8%BF%9E%E5%9B%9E%E7%8E%AF%E5%9C%B0%E5%9D%80%E6%97%B6%E7%AB%AF%E5%8F%A3%E4%B8%8D%E5%AD%98%E5%9C%A8.png","https://cdn.xiaobaidebug.top/image/tcp报头RST位.png","https://cdn.xiaobaidebug.top/image/image-20210619113503022.png","https://cdn.xiaobaidebug.top/image/%E8%BF%9E%E5%A4%96%E7%BD%91%E5%9C%B0%E5%9D%80%E6%97%B6%E7%AB%AF%E5%8F%A3%E4%B8%8D%E5%AD%98%E5%9C%A8.png","https://cdn.xiaobaidebug.top/image/image-20210619182034584.png","https://cdn.xiaobaidebug.top/image/image-20210619084158238.png","https://cdn.xiaobaidebug.top/image/%E9%98%B2%E7%81%AB%E5%A2%99%E5%AE%89%E5%85%A8%E7%AD%96%E7%95%A5.png","https://cdn.xiaobaidebug.top/image/12051625633785_.pic.jpg"],"datePublished":"2021-07-25T22:57:55.000Z","dateModified":"2024-05-12T13:55:00.000Z","author":[{"@type":"Person","name":"小白debug","url":"https://xiaobaidebug.top/"}]}</script><link rel="canonical" href="https://golangguide.top/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E8%BF%9E%E6%8E%A5%E4%B8%80%E4%B8%AAIP%E4%B8%8D%E5%AD%98%E5%9C%A8%E7%9A%84%E4%B8%BB%E6%9C%BA%E6%97%B6%EF%BC%8C%E6%8F%A1%E6%89%8B%E8%BF%87%E7%A8%8B%E6%98%AF%E6%80%8E%E6%A0%B7%E7%9A%84.html"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"连接一个 IP 不存在的主机时，握手过程是怎样的？","image":[""],"datePublished":"2021-07-25T22:57:55.000Z","dateModified":"2024-05-12T13:55:00.000Z","author":[]}</script><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap"><meta name="keywords" content="Golang基础, Golang源码, 数据库原理, MySQL, ElasticSearch, 微服务架构, Kafka消息队列, Nginx服务器, Redis缓存, RocketMQ, Kubernetes, Docker容器化, k8s集群管理, CI/CD持续集成, Linux操作系统, DevOps文化, 分布式系统, 中间件技术, 开发工具集, Git版本控制, IDE集成开发环境, 源码阅读技巧, 读书笔记分享, 开源项目资源"><meta name="description" content="深入探索Golang全栈开发的世界，本网站提供了从基础到高级的全面学习资源，涵盖数据库、微服务、Kubernetes、Docker等关键技术，以及源码分析、开发工具和读书笔记等实用资料，旨在帮助开发者构建扎实的技术基础，掌握现代软件架构的核心原理。"><meta name="author" content="https://www.xiaobaidebug.top/"><meta name="og:image" content="https://golangguide.top/new_logo.png"><meta property="og:image" content="https://golangguide.top/new_logo.png"><meta name="og:image:secure_url" content="https://golangguide.top/new_logo.png"><meta name="og:url" content="https://golangguide.top/"><meta property="og:title" content="欢迎来到 golangguide - 你需要的关于 golang 全栈后端开发的所有信息，包括但不限于mysql, redis, elasticsearch，微服务，kafka等信息"><meta name="og:description" content="golangguide Docs bring you all information you need about our protocol, APIs, SDKs, ZK Stack, and hyperchains. Start with our guides and tutorials, or go deep into our architecture and protocol specification."><meta name="twitter:title" content="Welcome to our Docs - All information you need about golangguide and ZK Stack"><meta name="twitter:description" content="golangguide Docs bring you all information you need about our protocol, APIs, SDKs, ZK Stack, and hyperchains. Start with our guides and tutorials, or go deep into our architecture and protocol specification."><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="manifest" href="/site.webmanifest"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#1E69FF"><link rel="shortcut icon" href="/favicon.ico"><meta name="msapplication-TileColor" content="#1E69FF"><meta name="msapplication-config" content="/browserconfig.xml"><meta name="theme-color" content="#1755F4"><script>
      window.addEventListener('load', function() {
        let contributors = document.querySelectorAll('.contributor');
        let contributorArr = Array.from(contributors);
        let topFive = contributorArr.slice(0, 5);
      
        topFive.forEach(function(contributor) {
          contributor.textContent = contributor.textContent.replace(',', '');
        });
      
        let lastComma = contributorArr[4];
        lastComma.textContent = lastComma.textContent.replace(',', '');
      
        let updatedList = topFive.map(function(contributor) {
          return contributor.textContent;
        }).join(', ');
          
        let contributorsDiv = document.querySelector('.contributors');
        contributorsDiv.innerHTML = '<span class="label">Contributors: </span>' + updatedList;
      
      });

      </script><title>连接一个 IP 不存在的主机时，握手过程是怎样的？ | golang全栈指南</title>
    <link rel="preload" href="/assets/style-pUUM4cAF.css" as="style"><link rel="stylesheet" href="/assets/style-pUUM4cAF.css">
    <link rel="modulepreload" href="/assets/app-CRAuvUzn.js"><link rel="modulepreload" href="/assets/连接一个IP不存在的主机时，握手过程是怎样的.html-B61QQRAE.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/assets/index.html-KfnWuv3p.js" as="script"><link rel="prefetch" href="/assets/学习路线.html-z9EpeIYu.js" as="script"><link rel="prefetch" href="/assets/常用包大全.html-noqfpw49.js" as="script"><link rel="prefetch" href="/assets/目录.html-Bi87-6aK.js" as="script"><link rel="prefetch" href="/assets/介绍.html-B--GOUO-.js" as="script"><link rel="prefetch" href="/assets/入营须知.html-DoWZAvhC.js" as="script"><link rel="prefetch" href="/assets/for select时，如果通道已经关闭会怎么样？如果只有一个case呢？.html-shQMW22I.js" as="script"><link rel="prefetch" href="/assets/golang 面试题：reflect（反射包）如何获取字段 tag？为什么 json 包不能导出私有变量的 tag？.html-BRneYYQI.js" as="script"><link rel="prefetch" href="/assets/golang并发题目测试.html-DJMtIoog.js" as="script"><link rel="prefetch" href="/assets/golang面试题：json包变量不加tag会怎么样？.html-CYKUF7rJ.js" as="script"><link rel="prefetch" href="/assets/golang面试题：字符串转成byte数组，会发生内存拷贝吗？.html-CznyfOVZ.js" as="script"><link rel="prefetch" href="/assets/golang面试题：对已经关闭的的chan进行读写，会怎么样？为什么？.html-C2R6RNCl.js" as="script"><link rel="prefetch" href="/assets/golang面试题：对未初始化的的chan进行读写，会怎么样？为什么？.html-Du0xNQ_V.js" as="script"><link rel="prefetch" href="/assets/golang面试题：怎么避免内存逃逸？.html-ByOQTia5.js" as="script"><link rel="prefetch" href="/assets/golang面试题：拷贝大切片一定比小切片代价大吗？.html-BVJV5f4g.js" as="script"><link rel="prefetch" href="/assets/golang面试题：简单聊聊内存逃逸？.html-C513Ua_e.js" as="script"><link rel="prefetch" href="/assets/golang面试题：翻转含有中文、数字、英文字母的字符串.html-DdKJygVh.js" as="script"><link rel="prefetch" href="/assets/golang高性能无GC的缓存库bigcache是怎么实现的.html-CLnZX7Co.js" as="script"><link rel="prefetch" href="/assets/io_timeout，希望你不要踩到这个http包的坑.html-x85nYJW-.js" as="script"><link rel="prefetch" href="/assets/为sync.WaitGroup中Wait函数支持WaitTimeout功能.html-DBRCvDl_.js" as="script"><link rel="prefetch" href="/assets/交替打印数字和字母.html-BKZGcyXy.js" as="script"><link rel="prefetch" href="/assets/写出以下逻辑，要求每秒钟调用一次proc并保证程序不退出.html-XMKz4UJa.js" as="script"><link rel="prefetch" href="/assets/判断两个给定的字符串排序后是否一致.html-DML8tN34.js" as="script"><link rel="prefetch" href="/assets/判断字符串中字符是否全都不同.html-lTQpxwgR.js" as="script"><link rel="prefetch" href="/assets/动图图解！怎么让goroutine跑一半就退出？.html-CHvlPsQK.js" as="script"><link rel="prefetch" href="/assets/动图图解，GMP里为什么要有P.html-CHsVw8OM.js" as="script"><link rel="prefetch" href="/assets/多协程查询切片问题.html-CqIOarra.js" as="script"><link rel="prefetch" href="/assets/如何调用一个只支持batch_call的服务？.html-kKznvdRD.js" as="script"><link rel="prefetch" href="/assets/字符串替换问题.html-Dy92y36H.js" as="script"><link rel="prefetch" href="/assets/实现阻塞读的并发安全Map.html-DeLm_w8d.js" as="script"><link rel="prefetch" href="/assets/常见语法题目一.html-Cab7DqBU.js" as="script"><link rel="prefetch" href="/assets/常见语法题目二.html-BFLDRmvc.js" as="script"><link rel="prefetch" href="/assets/昨天那个在for循环里append元素的同事，今天还在么？.html-DtVXT-Xz.js" as="script"><link rel="prefetch" href="/assets/机器人坐标问题.html-BvwC67Bh.js" as="script"><link rel="prefetch" href="/assets/给大家丢脸了，用了三年golang，我还是没答对这道内存泄漏题.html-4CszWLso.js" as="script"><link rel="prefetch" href="/assets/翻转字符串.html-v8EAvjb3.js" as="script"><link rel="prefetch" href="/assets/能说说uintptr和unsafe.Pointer的区别吗.html-BRUh-xl5.js" as="script"><link rel="prefetch" href="/assets/让golang协程和channel配合实现一个功能.html-Df2JJxiB.js" as="script"><link rel="prefetch" href="/assets/语法找错题.html-odG63Qbh.js" as="script"><link rel="prefetch" href="/assets/连nil切片和空切片一不一样都不清楚？那BAT面试官只好让你回去等通知了。.html-vjZ986PB.js" as="script"><link rel="prefetch" href="/assets/高并发下的锁与map读写问题.html-7MFNhpQF.js" as="script"><link rel="prefetch" href="/assets/1.Go入门.html-BuP7cCcU.js" as="script"><link rel="prefetch" href="/assets/2.Go进阶.html-CFIOff41.js" as="script"><link rel="prefetch" href="/assets/面试题.html-K6PmAtb8.js" as="script"><link rel="prefetch" href="/assets/面试题.html-DzQuVcfa.js" as="script"><link rel="prefetch" href="/assets/面试题.html-CrpIbKQM.js" as="script"><link rel="prefetch" href="/assets/面试题.html-_785FtoY.js" as="script"><link rel="prefetch" href="/assets/面试题.html-BH6eG-aA.js" as="script"><link rel="prefetch" href="/assets/面试题.html-Br87XiSJ.js" as="script"><link rel="prefetch" href="/assets/面试题.html-C6OBGn0L.js" as="script"><link rel="prefetch" href="/assets/面试题.html-Dl6-QWU8.js" as="script"><link rel="prefetch" href="/assets/面试题.html-ql2XTB2O.js" as="script"><link rel="prefetch" href="/assets/面试题.html-DVfIMKvO.js" as="script"><link rel="prefetch" href="/assets/面试题.html-DKblxrdo.js" as="script"><link rel="prefetch" href="/assets/面试题.html-D-Mv2Jt8.js" as="script"><link rel="prefetch" href="/assets/面试题.html-CghAWt_c.js" as="script"><link rel="prefetch" href="/assets/面试题.html-BwJBAB2M.js" as="script"><link rel="prefetch" href="/assets/面试题.html-DqGgvS4X.js" as="script"><link rel="prefetch" href="/assets/1. Python 的起源与发展.html-smeKPJlB.js" as="script"><link rel="prefetch" href="/assets/10. Python 标准库概览.html-f9oA2jgs.js" as="script"><link rel="prefetch" href="/assets/11. 字符串操作与正则表达式.html-DQiu3-uw.js" as="script"><link rel="prefetch" href="/assets/12. 列表、元组、字典与集合.html-s1rrQ3pL.js" as="script"><link rel="prefetch" href="/assets/13. 时间与日期处理.html-7HOpFshH.js" as="script"><link rel="prefetch" href="/assets/14. 常用内建函数.html-Q1m_r_03.js" as="script"><link rel="prefetch" href="/assets/15. 生成器与迭代器.html-XVo30MzV.js" as="script"><link rel="prefetch" href="/assets/2. 安装与环境配置.html-gp1tRH-T.js" as="script"><link rel="prefetch" href="/assets/3. 变量、数据类型与运算符.html-PX1cyoi9.js" as="script"><link rel="prefetch" href="/assets/4. 控制流程：条件与循环.html-BatFZffV.js" as="script"><link rel="prefetch" href="/assets/5. 函数与模块.html-cZCTBZ0n.js" as="script"><link rel="prefetch" href="/assets/6. 输入与输出.html-Dj43ImZ3.js" as="script"><link rel="prefetch" href="/assets/7. 异常处理.html-BKVrsgov.js" as="script"><link rel="prefetch" href="/assets/8. 面向对象编程基础.html-D-EwnzQT.js" as="script"><link rel="prefetch" href="/assets/9. 文件操作与管理.html-BkexeeqF.js" as="script"><link rel="prefetch" href="/assets/16. 线程与多线程编程.html-DM37ugZF.js" as="script"><link rel="prefetch" href="/assets/17. 进程与多进程编程.html-JXKtaOFk.js" as="script"><link rel="prefetch" href="/assets/18. 异步编程与协程.html-DQntBycv.js" as="script"><link rel="prefetch" href="/assets/19. 并发编程中的常见问题与解决方案.html-Dll51Whm.js" as="script"><link rel="prefetch" href="/assets/20. 线程安全与锁机制.html-BemAoApk.js" as="script"><link rel="prefetch" href="/assets/21. 进程间通信与共享资源.html-BJIJ_QT5.js" as="script"><link rel="prefetch" href="/assets/22. 异步编程框架比较.html-D8TAapWm.js" as="script"><link rel="prefetch" href="/assets/23. GIL 与 Python 多线程.html-DpP_DjvH.js" as="script"><link rel="prefetch" href="/assets/24. 多进程与多线程的选择.html-DTwYWTdK.js" as="script"><link rel="prefetch" href="/assets/25. asyncio 库与异步 IO 模型.html-BMMOp7BQ.js" as="script"><link rel="prefetch" href="/assets/26. 多进程池与线程池.html-CftmSVJa.js" as="script"><link rel="prefetch" href="/assets/27. 并行与并发的区别.html-Btn_L72Z.js" as="script"><link rel="prefetch" href="/assets/28. 异步编程中的回调地狱问题.html-C7ZaUW-J.js" as="script"><link rel="prefetch" href="/assets/29. 高并发与高性能的设计原则.html-Cva3G8-H.js" as="script"><link rel="prefetch" href="/assets/30. 分布式计算与任务调度.html-8Y71iai5.js" as="script"><link rel="prefetch" href="/assets/31. 迭代器与生成器.html-BncZuaZz.js" as="script"><link rel="prefetch" href="/assets/32. 装饰器与闭包.html-dQuA0c74.js" as="script"><link rel="prefetch" href="/assets/33. 元类与类装饰器.html-D2HXxiHe.js" as="script"><link rel="prefetch" href="/assets/34. 设计模式与最佳实践.html-C3bunBfZ.js" as="script"><link rel="prefetch" href="/assets/35. 函数式编程风格.html-Bc8hy5UU.js" as="script"><link rel="prefetch" href="/assets/36. Python 代码优化与性能提升.html-DE8g7YbK.js" as="script"><link rel="prefetch" href="/assets/37. 高级函数与 Lambda 表达式.html-Cy85cHXA.js" as="script"><link rel="prefetch" href="/assets/38. 魔术方法与元编程.html-D-4B4pCO.js" as="script"><link rel="prefetch" href="/assets/39. 动态类型与静态类型语言对比.html-DjA_2whJ.js" as="script"><link rel="prefetch" href="/assets/40. 高级模块与扩展.html-BDyNsnyf.js" as="script"><link rel="prefetch" href="/assets/41. 编码规范与文档.html-DEF01fmD.js" as="script"><link rel="prefetch" href="/assets/42. 版本控制与 Git.html-KmbIuhx-.js" as="script"><link rel="prefetch" href="/assets/43. 虚拟环境与依赖管理.html-1ZSxO1fF.js" as="script"><link rel="prefetch" href="/assets/44. IDE 与编辑器推荐.html-BMCtGoND.js" as="script"><link rel="prefetch" href="/assets/45. 调试工具与技巧.html-BX3_ZbJF.js" as="script"><link rel="prefetch" href="/assets/46. 单元测试与集成测试.html-Rvqd6JIV.js" as="script"><link rel="prefetch" href="/assets/47. 静态代码分析与 Lint 工具.html-BALIHvER.js" as="script"><link rel="prefetch" href="/assets/48. 代码重构与优化工具.html-DGjXp3vh.js" as="script"><link rel="prefetch" href="/assets/49. CI-CD 与持续集成.html-etMXv7M0.js" as="script"><link rel="prefetch" href="/assets/50. 文档生成与自动化部署.html-DxmRKMkO.js" as="script"><link rel="prefetch" href="/assets/51. 常见算法概述.html-B88Gxou6.js" as="script"><link rel="prefetch" href="/assets/52. 排序与搜索算法.html-CQMEMBes.js" as="script"><link rel="prefetch" href="/assets/53. 数据结构与算法设计.html-B__S401u.js" as="script"><link rel="prefetch" href="/assets/54. 动态规划与贪心算法.html-CRjYwFio.js" as="script"><link rel="prefetch" href="/assets/55. 图论与网络流算法.html-R-rBPFjn.js" as="script"><link rel="prefetch" href="/assets/56. 字符串匹配与处理算法.html-Dddk6oO_.js" as="script"><link rel="prefetch" href="/assets/57. 数论与组合数学.html-BCesiB-7.js" as="script"><link rel="prefetch" href="/assets/58. 复杂度分析与算法评估.html-CKKPpDlX.js" as="script"><link rel="prefetch" href="/assets/59. 算法实现与优化技巧.html-NJvm-AEs.js" as="script"><link rel="prefetch" href="/assets/60. 常用数据结构实现.html-CbqYwMY-.js" as="script"><link rel="prefetch" href="/assets/61. 数据获取与清洗.html-BwIJlG4B.js" as="script"><link rel="prefetch" href="/assets/62. 数据处理与分析.html-YgbrJojB.js" as="script"><link rel="prefetch" href="/assets/63. 数据可视化.html-mlvhTfJr.js" as="script"><link rel="prefetch" href="/assets/64. 机器学习入门.html-DaWnwC2u.js" as="script"><link rel="prefetch" href="/assets/65. 数据挖掘与预测建模.html-C9QG1qtC.js" as="script"><link rel="prefetch" href="/assets/66. 数据库与数据仓库.html-BYoB2ScK.js" as="script"><link rel="prefetch" href="/assets/67. 大数据与分布式计算.html-BRFI5kej.js" as="script"><link rel="prefetch" href="/assets/68. 自然语言处理基础.html-CBj-eD8T.js" as="script"><link rel="prefetch" href="/assets/69. 图像处理与计算机视觉.html-ZvFk7D7k.js" as="script"><link rel="prefetch" href="/assets/70. 时间序列分析与预测.html-D-I2kwbM.js" as="script"><link rel="prefetch" href="/assets/71. Linux 基础与常用命令.html-DwQKJ20Y.js" as="script"><link rel="prefetch" href="/assets/72. 网络基础与常用协议.html-CRi_pz3z.js" as="script"><link rel="prefetch" href="/assets/73. Web 服务器与部署.html-BLNnFeZz.js" as="script"><link rel="prefetch" href="/assets/74. 数据库基础与管理.html-CfbV953d.js" as="script"><link rel="prefetch" href="/assets/75. 容器化与 Docker.html-0SaXEnrZ.js" as="script"><link rel="prefetch" href="/assets/76. 自动化运维与配置管理.html-vMmdWVQp.js" as="script"><link rel="prefetch" href="/assets/77. 负载均衡与高可用性.html-BihH0-0M.js" as="script"><link rel="prefetch" href="/assets/78. 日志与监控系统.html-B_bfjNQj.js" as="script"><link rel="prefetch" href="/assets/79. 安全与漏洞管理.html-DXGZoOkg.js" as="script"><link rel="prefetch" href="/assets/80. 云计算与云服务.html-9mOCEGAR.js" as="script"><link rel="prefetch" href="/assets/81. NumPy 与 SciPy.html-BDFEmNjC.js" as="script"><link rel="prefetch" href="/assets/82. Pandas.html-Bte3YuGK.js" as="script"><link rel="prefetch" href="/assets/83. Matplotlib 与 Seaborn.html-nSFoRu1S.js" as="script"><link rel="prefetch" href="/assets/84. Requests 与 Beautiful Soup.html-Dkq6x5gl.js" as="script"><link rel="prefetch" href="/assets/85. Django 与 Flask.html-C0O7wmm7.js" as="script"><link rel="prefetch" href="/assets/86. SQLAlchemy 与 ORM.html-JARKQlX1.js" as="script"><link rel="prefetch" href="/assets/87. Celery 与任务队列.html-CY0rro7e.js" as="script"><link rel="prefetch" href="/assets/88. TensorFlow 与机器学习库.html-BGdJVQZ-.js" as="script"><link rel="prefetch" href="/assets/89. PyQT 与 GUI 开发.html-Bi8CdRrB.js" as="script"><link rel="prefetch" href="/assets/90. GIS 与地理信息处理.html-sZMOGmL3.js" as="script"><link rel="prefetch" href="/assets/100.  项目总结与回顾.html-BYe5FMwa.js" as="script"><link rel="prefetch" href="/assets/91. 项目介绍与需求分析.html-CVuu3lt3.js" as="script"><link rel="prefetch" href="/assets/92. 项目架构与设计.html-VSlxwsIB.js" as="script"><link rel="prefetch" href="/assets/93. 代码实现与测试.html-DBrX-R8e.js" as="script"><link rel="prefetch" href="/assets/94. 项目部署与维护.html-Ds1QLA2G.js" as="script"><link rel="prefetch" href="/assets/95. 用户反馈与迭代优化.html-CeKzBEp-.js" as="script"><link rel="prefetch" href="/assets/96. 项目文档与知识分享.html-Co-Pzmzt.js" as="script"><link rel="prefetch" href="/assets/97. 团队协作与版本控制.html-DgoYfmW5.js" as="script"><link rel="prefetch" href="/assets/98. 项目上线与发布.html-D9yKcepr.js" as="script"><link rel="prefetch" href="/assets/99. 故障处理与紧急修复.html-oKMDgpDk.js" as="script"><link rel="prefetch" href="/assets/elasticSearch架构是怎么样的.html-DKJa8Kcy.js" as="script"><link rel="prefetch" href="/assets/kafka是什么？架构是怎么样的？.html-CwolA6q5.js" as="script"><link rel="prefetch" href="/assets/Mysql并发写数据，怎么保证唯一性？.html-CoceppyT.js" as="script"><link rel="prefetch" href="/assets/Mysql数据库查询好慢，除了索引，还能因为什么？.html-CUt7fg7s.js" as="script"><link rel="prefetch" href="/assets/Mysql的索引为什么使用B_树而不使用跳表？.html-BTrXdL-x.js" as="script"><link rel="prefetch" href="/assets/mysql主库更新后，从库读到最新值了，主库还有可能读到旧值吗？.html-DGOtPsBo.js" as="script"><link rel="prefetch" href="/assets/mysql查询 limit 1000_10 和limit 10 速度一样快吗？.html-DZ6ppNXS.js" as="script"><link rel="prefetch" href="/assets/mysql的varchar字段最大长度真的是65535吗？.html-3QJD4mec.js" as="script"><link rel="prefetch" href="/assets/为什么mysql写数据会丢失数据？.html-s9lVlc54.js" as="script"><link rel="prefetch" href="/assets/为什么mysql插入不存在的数据会产生死锁？.html-Ctv64CAh.js" as="script"><link rel="prefetch" href="/assets/为什么mysql的count()方法这么慢？.html-CuvAHtEB.js" as="script"><link rel="prefetch" href="/assets/为什么大家说mysql数据库单表最大两千万？.html-BU-yLKV3.js" as="script"><link rel="prefetch" href="/assets/分库分表带来的读扩散问题，怎么解决？.html-CYHnU2Qd.js" as="script"><link rel="prefetch" href="/assets/数据库主键一定要自增的吗？不自增行不行？有哪些场景下不建议自增？.html-CGrP-UqJ.js" as="script"><link rel="prefetch" href="/assets/都是select语句，为什么读到的内容不一样？.html-_YH5-E7v.js" as="script"><link rel="prefetch" href="/assets/RocketMQ为什么性能不如Kafka.html-Db1tkx2h.js" as="script"><link rel="prefetch" href="/assets/RocketMQ是什么.html-D_ZFOZVJ.js" as="script"><link rel="prefetch" href="/assets/docker和传统虚拟机有什么区别.html-ClTuMBcU.js" as="script"><link rel="prefetch" href="/assets/docker是什么docker和kubernetes(k8s)之间是什么关系有什么区别.html-C6Rkuudr.js" as="script"><link rel="prefetch" href="/assets/k8s到底是什么.html-CmAqMP8Z.js" as="script"><link rel="prefetch" href="/assets/QPS的计算是怎么实现的.html-DKgcpcbr.js" as="script"><link rel="prefetch" href="/assets/docker和传统虚拟机有什么区别.html-B1h5L4Iw.js" as="script"><link rel="prefetch" href="/assets/k8s到底是什么.html-DJK7kWUK.js" as="script"><link rel="prefetch" href="/assets/服务发现有哪些要素.html-DV-iE9aw.js" as="script"><link rel="prefetch" href="/assets/服务熔断和服务降级是指什么.html-Cv2ZJKAE.js" as="script"><link rel="prefetch" href="/assets/给32位系统装8g内存条能用吗？为什么？.html-CKX6vkoZ.js" as="script"><link rel="prefetch" href="/assets/TCP四次挥手中如果服务端没收到第四次挥手请求，服务端会一直等待吗？.html-B9MlcFNR.js" as="script"><link rel="prefetch" href="/assets/TCP粘包！数据包：我只是犯了每个数据包都会犯的错，硬核图解.html-C4H-7Ggg.js" as="script"><link rel="prefetch" href="/assets/UDP就一定比TCP快吗.html-DzdBuolg.js" as="script"><link rel="prefetch" href="/assets/socket到底是什么？.html-CpQFcB-H.js" as="script"><link rel="prefetch" href="/assets/不是我不回你消息，是因为网络会丢包.html-Bb_VxI5A.js" as="script"><link rel="prefetch" href="/assets/为什么我们的IP都是192.168开头的？.html-DSm2uRlX.js" as="script"><link rel="prefetch" href="/assets/为什么我在公司里访问不了家里的电脑？.html-D3_TCRMi.js" as="script"><link rel="prefetch" href="/assets/为什么有HTTP协议，还要有websocket协议.html-6CcGAGxx.js" as="script"><link rel="prefetch" href="/assets/动图图解！代码执行send成功后，数据就发出去了吗？.html-D5OSWcs7.js" as="script"><link rel="prefetch" href="/assets/动图图解！收到RST，就一定会断开TCP连接吗？.html-DJTxhLT0.js" as="script"><link rel="prefetch" href="/assets/动图图解！既然IP层会分片，为什么TCP层也还要分段？.html-Bezl0-hk.js" as="script"><link rel="prefetch" href="/assets/原神的游戏服务器架构是怎么样的.html-Cthmuvu1.js" as="script"><link rel="prefetch" href="/assets/既然有HTTP协议，为什么还要有RPC协议？.html-4aIK3snv.js" as="script"><link rel="prefetch" href="/assets/没有accept能建立TCP连接吗.html-CL80QLUl.js" as="script"><link rel="prefetch" href="/assets/活久见！TCP两次挥手，你见过吗？那四次握手呢？.html-BXDc4kZg.js" as="script"><link rel="prefetch" href="/assets/硬核图解！30张图带你搞懂！路由器，集线器，交换机，网桥，光猫有啥区别？.html-Dibx92kB.js" as="script"><link rel="prefetch" href="/assets/硬核图解！断网了，还能ping通回环地址吗？为什么.html-D83H86fE.js" as="script"><link rel="prefetch" href="/assets/硬核！漫画图解HTTP知识点_面试题.html-C_YX2F3J.js" as="script"><link rel="prefetch" href="/assets/能ping通，就代表TCP一定能连通吗？.html-v03Yi-64.js" as="script"><link rel="prefetch" href="/assets/404.html-B82fum0R.js" as="script"><link rel="prefetch" href="/assets/index.html-C8jFpyUl.js" as="script"><link rel="prefetch" href="/assets/index.html-CsHuf2wy.js" as="script"><link rel="prefetch" href="/assets/index.html-B5iUYcR1.js" as="script"><link rel="prefetch" href="/assets/index.html-Jj-GwyBv.js" as="script"><link rel="prefetch" href="/assets/index.html-CC20obap.js" as="script"><link rel="prefetch" href="/assets/index.html-CKFuoGd_.js" as="script"><link rel="prefetch" href="/assets/index.html-DAmuwMdH.js" as="script"><link rel="prefetch" href="/assets/index.html-DRYw1NOY.js" as="script"><link rel="prefetch" href="/assets/index.html-BjhXtfF7.js" as="script"><link rel="prefetch" href="/assets/index.html-CtimCAAq.js" as="script"><link rel="prefetch" href="/assets/index.html-B38SGTDd.js" as="script"><link rel="prefetch" href="/assets/index.html-D8GTI3kU.js" as="script"><link rel="prefetch" href="/assets/index.html-vORhOxLC.js" as="script"><link rel="prefetch" href="/assets/index.html-BfRv0_6A.js" as="script"><link rel="prefetch" href="/assets/index.html-CX7ckhn7.js" as="script"><link rel="prefetch" href="/assets/index.html-MnvQD531.js" as="script"><link rel="prefetch" href="/assets/index.html-CPCkuIJO.js" as="script"><link rel="prefetch" href="/assets/index.html-C2WzEdbj.js" as="script"><link rel="prefetch" href="/assets/index.html-buYFVYxA.js" as="script"><link rel="prefetch" href="/assets/index.html-C9pI8l0C.js" as="script"><link rel="prefetch" href="/assets/index.html-BR1XvVO1.js" as="script"><link rel="prefetch" href="/assets/index.html-DTDtXKs7.js" as="script"><link rel="prefetch" href="/assets/index.html-BvscxXAk.js" as="script"><link rel="prefetch" href="/assets/index.html-BePgI42g.js" as="script"><link rel="prefetch" href="/assets/index.html-B1cGtAG0.js" as="script"><link rel="prefetch" href="/assets/index.html-Fk2WVDLA.js" as="script"><link rel="prefetch" href="/assets/index.html-LIhhv6ZN.js" as="script"><link rel="prefetch" href="/assets/index.html-rqPYVQi3.js" as="script"><link rel="prefetch" href="/assets/index.html-B5aRt_NH.js" as="script"><link rel="prefetch" href="/assets/index.html-BV_Ho0Ln.js" as="script"><link rel="prefetch" href="/assets/index.html-DKwVmEXq.js" as="script"><link rel="prefetch" href="/assets/index.html-SD6iygks.js" as="script"><link rel="prefetch" href="/assets/index.html-MYG83zaJ.js" as="script"><link rel="prefetch" href="/assets/index.html-DeZWs-FZ.js" as="script"><link rel="prefetch" href="/assets/index.html-umPLacbD.js" as="script"><link rel="prefetch" href="/assets/index.html-DHDLwWbR.js" as="script"><link rel="prefetch" href="/assets/index.html-Cwo0JP3v.js" as="script"><link rel="prefetch" href="/assets/index.html-Db77OtAK.js" as="script"><link rel="prefetch" href="/assets/index.html-T4T-PSZi.js" as="script"><link rel="prefetch" href="/assets/index.html-CuqQg7Kq.js" as="script"><link rel="prefetch" href="/assets/index.html-BLFQXGko.js" as="script"><link rel="prefetch" href="/assets/index.html-CUesHVjD.js" as="script"><link rel="prefetch" href="/assets/giscus-7BMGhbDA.js" as="script"><link rel="prefetch" href="/assets/auto-C0MMSKEI.js" as="script"><link rel="prefetch" href="/assets/index-DA4axBLK.js" as="script"><link rel="prefetch" href="/assets/flowchart-966sEcGG.js" as="script"><link rel="prefetch" href="/assets/mermaid.core-BHUL23CN.js" as="script"><link rel="prefetch" href="/assets/reveal.esm-9nNZbZvi.js" as="script"><link rel="prefetch" href="/assets/markdown.esm-BG2Xu2Hd.js" as="script"><link rel="prefetch" href="/assets/vue-repl-CmbTnm-b.js" as="script"><link rel="prefetch" href="/assets/codemirror-editor-C_S4IeSi.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-SzV8tJDW.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo" src="/new_logo.png" alt><!----><span class="vp-site-name hide-in-pad">golang全栈指南</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><a class="route-link nav-link" href="/" aria-label="主页"><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span>主页<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="训练营"><span class="title"><span class="font-icon icon fa-fw fa-sm fas fa-campground" style=""></span>训练营</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="route-link nav-link" href="/%E8%AE%AD%E7%BB%83%E8%90%A5/%E4%BB%8B%E7%BB%8D.html" aria-label="介绍"><span class="font-icon icon fa-fw fa-sm fas fa-address-card" style=""></span>介绍<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E8%AE%AD%E7%BB%83%E8%90%A5/%E5%85%A5%E8%90%A5%E9%A1%BB%E7%9F%A5.html" aria-label="入营须知"><span class="font-icon icon fa-fw fa-sm fas fa-brain" style=""></span>入营须知<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="计算机基础"><span class="title"><span class="font-icon icon fa-fw fa-sm fas fa-computer" style=""></span>计算机基础</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="route-link nav-link" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" aria-label="操作系统"><span class="font-icon icon fa-fw fa-sm fas fa-server" style=""></span>操作系统<!----></a></li><li class="dropdown-item"><a class="route-link nav-link active" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/" aria-label="网络基础"><span class="font-icon icon fa-fw fa-sm fas fa-wifi" style=""></span>网络基础<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="架构"><span class="title"><span class="font-icon icon fa-fw fa-sm fas fa-folder-tree" style=""></span>架构</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="route-link nav-link" href="/%E6%9E%B6%E6%9E%84/%E4%BA%91%E5%8E%9F%E7%94%9F/" aria-label="云原生"><span class="font-icon icon fa-fw fa-sm fas fa-box" style=""></span>云原生<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E6%9E%B6%E6%9E%84/%E5%88%86%E5%B8%83%E5%BC%8F/" aria-label="分布式"><span class="font-icon icon fa-fw fa-sm fas fa-manat-sign" style=""></span>分布式<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E6%9E%B6%E6%9E%84/%E5%BE%AE%E6%9C%8D%E5%8A%A1/" aria-label="微服务"><span class="font-icon icon fa-fw fa-sm fas fa-microchip" style=""></span>微服务<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E6%9E%B6%E6%9E%84/%E8%BF%90%E7%BB%B4/" aria-label="运维"><span class="font-icon icon fa-fw fa-sm fas fa-folder-open" style=""></span>运维<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="中间件"><span class="title"><span class="font-icon icon fa-fw fa-sm fas fa-align-center" style=""></span>中间件</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="route-link nav-link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/es/" aria-label="ES"><span class="font-icon icon fa-fw fa-sm fas fa-magnifying-glass" style=""></span>ES<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/kafka/" aria-label="Kafka"><span class="font-icon icon fa-fw fa-sm fas fa-chess-queen" style=""></span>Kafka<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/Memcached/" aria-label="Memcached"><span class="font-icon icon fa-fw fa-sm fas fa-suitcase" style=""></span>Memcached<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/ClickHouse/" aria-label="ClickHouse"><span class="font-icon icon fa-fw fa-sm fas fa-house-laptop" style=""></span>ClickHouse<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/mongodb/" aria-label="Mongodb"><span class="font-icon icon fa-fw fa-sm fas fa-vr-cardboard" style=""></span>Mongodb<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/mysql/" aria-label="Mysql"><span class="font-icon icon fa-fw fa-sm fas fa-database" style=""></span>Mysql<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/nginx/" aria-label="Nginx"><span class="font-icon icon fa-fw fa-sm fas fa-network-wired" style=""></span>Nginx<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/rabbitmq/" aria-label="RabbitMQ"><span class="font-icon icon fa-fw fa-sm fas fa-frog" style=""></span>RabbitMQ<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/redis/" aria-label="Redis"><span class="font-icon icon fa-fw fa-sm fas fa-registered" style=""></span>Redis<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/rocketmq/" aria-label="RocketMQ"><span class="font-icon icon fa-fw fa-sm fas fa-rocket" style=""></span>RocketMQ<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="Golang"><span class="title"><span class="font-icon icon fa-fw fa-sm fas fa-lightbulb" style=""></span>Golang</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="route-link nav-link" href="/golang/%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF.html" aria-label="学习路线"><span class="font-icon icon fa-fw fa-sm fas fa-map-location-dot" style=""></span>学习路线<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/golang/%E5%B8%B8%E7%94%A8%E5%8C%85%E5%A4%A7%E5%85%A8.html" aria-label="常用包大全"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span>常用包大全<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/golang/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/" aria-label="核心知识点"><span class="font-icon icon fa-fw fa-sm fas fa-house-laptop" style=""></span>核心知识点<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/1.Go%E5%85%A5%E9%97%A8.html" aria-label="基础面试题"><span class="font-icon icon fa-fw fa-sm fas fa-disease" style=""></span>基础面试题<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html" aria-label="进阶面试题"><span class="font-icon icon fa-fw fa-sm fas fa-clipboard-question" style=""></span>进阶面试题<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="https://xiaobaidebug.top/" rel="noopener noreferrer" target="_blank" aria-label="blog" class="nav-link"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span>blog<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="nav-item hide-in-mobile"><a href="https://golangguide.top/sitemap.xml" rel="noopener noreferrer" target="_blank" aria-label="sitemap" class="nav-link"><span class="font-icon icon fa-fw fa-sm fas fa-blog" style=""></span>sitemap<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><div class="nav-item vp-repo"><a class="vp-repo-link" href="https://github.com/xiaobaiTech/golang-full-stack" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading clickable active"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span><a class="route-link nav-link vp-sidebar-title" href="/计算机基础/计算机基础/" aria-label="计算机基础"><!---->计算机基础<!----></a><!----></p><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">操作系统</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable active" type="button"><!----><span class="vp-sidebar-title">网络基础</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable active" type="button"><!----><span class="vp-sidebar-title">核心知识点</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/socket%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F.html" aria-label="socket 到底是什么？"><!---->socket 到底是什么？<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/TCP%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B%E4%B8%AD%E5%A6%82%E6%9E%9C%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%B2%A1%E6%94%B6%E5%88%B0%E7%AC%AC%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B%E8%AF%B7%E6%B1%82%EF%BC%8C%E6%9C%8D%E5%8A%A1%E7%AB%AF%E4%BC%9A%E4%B8%80%E7%9B%B4%E7%AD%89%E5%BE%85%E5%90%97%EF%BC%9F.html" aria-label="TCP四次挥手中如果服务端没收到第四次挥手请求，服务端会一直等待吗？"><!---->TCP四次挥手中如果服务端没收到第四次挥手请求，服务端会一直等待吗？<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/TCP%E7%B2%98%E5%8C%85%EF%BC%81%E6%95%B0%E6%8D%AE%E5%8C%85%EF%BC%9A%E6%88%91%E5%8F%AA%E6%98%AF%E7%8A%AF%E4%BA%86%E6%AF%8F%E4%B8%AA%E6%95%B0%E6%8D%AE%E5%8C%85%E9%83%BD%E4%BC%9A%E7%8A%AF%E7%9A%84%E9%94%99%EF%BC%8C%E7%A1%AC%E6%A0%B8%E5%9B%BE%E8%A7%A3.html" aria-label="TCP粘包  数据包：我只是犯了每个数据包都会犯的错 |硬核图解"><!---->TCP粘包  数据包：我只是犯了每个数据包都会犯的错 |硬核图解<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E4%B8%BA%E4%BB%80%E4%B9%88%E6%88%91%E4%BB%AC%E7%9A%84IP%E9%83%BD%E6%98%AF192.168%E5%BC%80%E5%A4%B4%E7%9A%84%EF%BC%9F.html" aria-label="为什么我们家里的IP都是192.168开头的？"><!---->为什么我们家里的IP都是192.168开头的？<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E4%B8%BA%E4%BB%80%E4%B9%88%E6%88%91%E5%9C%A8%E5%85%AC%E5%8F%B8%E9%87%8C%E8%AE%BF%E9%97%AE%E4%B8%8D%E4%BA%86%E5%AE%B6%E9%87%8C%E7%9A%84%E7%94%B5%E8%84%91%EF%BC%9F.html" aria-label="为什么我在公司里访问不了家里的电脑？"><!---->为什么我在公司里访问不了家里的电脑？<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E4%B8%BA%E4%BB%80%E4%B9%88%E6%9C%89HTTP%E5%8D%8F%E8%AE%AE%EF%BC%8C%E8%BF%98%E8%A6%81%E6%9C%89websocket%E5%8D%8F%E8%AE%AE.html" aria-label="为什么有HTTP协议，还要有websocket协议"><!---->为什么有HTTP协议，还要有websocket协议<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/UDP%E5%B0%B1%E4%B8%80%E5%AE%9A%E6%AF%94TCP%E5%BF%AB%E5%90%97.html" aria-label="动图图解 | UDP就一定比TCP快吗？"><!---->动图图解 | UDP就一定比TCP快吗？<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E5%8A%A8%E5%9B%BE%E5%9B%BE%E8%A7%A3%EF%BC%81%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8Csend%E6%88%90%E5%8A%9F%E5%90%8E%EF%BC%8C%E6%95%B0%E6%8D%AE%E5%B0%B1%E5%8F%91%E5%87%BA%E5%8E%BB%E4%BA%86%E5%90%97%EF%BC%9F.html" aria-label="动图图解！代码执行send成功后，数据就发出去了吗？"><!---->动图图解！代码执行send成功后，数据就发出去了吗？<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E5%8A%A8%E5%9B%BE%E5%9B%BE%E8%A7%A3%EF%BC%81%E6%94%B6%E5%88%B0RST%EF%BC%8C%E5%B0%B1%E4%B8%80%E5%AE%9A%E4%BC%9A%E6%96%AD%E5%BC%80TCP%E8%BF%9E%E6%8E%A5%E5%90%97%EF%BC%9F.html" aria-label="动图图解！收到RST，就一定会断开TCP连接吗？"><!---->动图图解！收到RST，就一定会断开TCP连接吗？<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E5%8A%A8%E5%9B%BE%E5%9B%BE%E8%A7%A3%EF%BC%81%E6%97%A2%E7%84%B6IP%E5%B1%82%E4%BC%9A%E5%88%86%E7%89%87%EF%BC%8C%E4%B8%BA%E4%BB%80%E4%B9%88TCP%E5%B1%82%E4%B9%9F%E8%BF%98%E8%A6%81%E5%88%86%E6%AE%B5%EF%BC%9F.html" aria-label="动图图解！既然IP层会分片，为什么TCP层也还要分段？"><!---->动图图解！既然IP层会分片，为什么TCP层也还要分段？<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E6%B2%A1%E6%9C%89accept%E8%83%BD%E5%BB%BA%E7%AB%8BTCP%E8%BF%9E%E6%8E%A5%E5%90%97.html" aria-label="动图图解！没有accept，能建立TCP连接吗？"><!---->动图图解！没有accept，能建立TCP连接吗？<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E5%8E%9F%E7%A5%9E%E7%9A%84%E6%B8%B8%E6%88%8F%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%9E%B6%E6%9E%84%E6%98%AF%E6%80%8E%E4%B9%88%E6%A0%B7%E7%9A%84.html" aria-label="原神的游戏服务器架构是怎么样的？"><!---->原神的游戏服务器架构是怎么样的？<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E6%97%A2%E7%84%B6%E6%9C%89HTTP%E5%8D%8F%E8%AE%AE%EF%BC%8C%E4%B8%BA%E4%BB%80%E4%B9%88%E8%BF%98%E8%A6%81%E6%9C%89RPC%E5%8D%8F%E8%AE%AE%EF%BC%9F.html" aria-label="既然有HTTP协议，为什么还要有RPC"><!---->既然有HTTP协议，为什么还要有RPC<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E6%B4%BB%E4%B9%85%E8%A7%81%EF%BC%81TCP%E4%B8%A4%E6%AC%A1%E6%8C%A5%E6%89%8B%EF%BC%8C%E4%BD%A0%E8%A7%81%E8%BF%87%E5%90%97%EF%BC%9F%E9%82%A3%E5%9B%9B%E6%AC%A1%E6%8F%A1%E6%89%8B%E5%91%A2%EF%BC%9F.html" aria-label="活久见！TCP两次挥手，你见过吗？那四次握手呢？"><!---->活久见！TCP两次挥手，你见过吗？那四次握手呢？<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E4%B8%8D%E6%98%AF%E6%88%91%E4%B8%8D%E5%9B%9E%E4%BD%A0%E6%B6%88%E6%81%AF%EF%BC%8C%E6%98%AF%E5%9B%A0%E4%B8%BA%E7%BD%91%E7%BB%9C%E4%BC%9A%E4%B8%A2%E5%8C%85.html" aria-label="用了TCP协议，就一定不会丢包吗？"><!---->用了TCP协议，就一定不会丢包吗？<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E7%A1%AC%E6%A0%B8%EF%BC%81%E6%BC%AB%E7%94%BB%E5%9B%BE%E8%A7%A3HTTP%E7%9F%A5%E8%AF%86%E7%82%B9_%E9%9D%A2%E8%AF%95%E9%A2%98.html" aria-label="硬核！漫画图解HTTP基础+面试题"><!---->硬核！漫画图解HTTP基础+面试题<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E7%A1%AC%E6%A0%B8%E5%9B%BE%E8%A7%A3%EF%BC%8130%E5%BC%A0%E5%9B%BE%E5%B8%A6%E4%BD%A0%E6%90%9E%E6%87%82%EF%BC%81%E8%B7%AF%E7%94%B1%E5%99%A8%EF%BC%8C%E9%9B%86%E7%BA%BF%E5%99%A8%EF%BC%8C%E4%BA%A4%E6%8D%A2%E6%9C%BA%EF%BC%8C%E7%BD%91%E6%A1%A5%EF%BC%8C%E5%85%89%E7%8C%AB%E6%9C%89%E5%95%A5%E5%8C%BA%E5%88%AB%EF%BC%9F.html" aria-label="硬核！阿里面试就是不一样！30张图带你搞懂路由器，集线器，交换机，网桥，光猫有啥区别？"><!---->硬核！阿里面试就是不一样！30张图带你搞懂路由器，集线器，交换机，网桥，光猫有啥区别？<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E7%A1%AC%E6%A0%B8%E5%9B%BE%E8%A7%A3%EF%BC%81%E6%96%AD%E7%BD%91%E4%BA%86%EF%BC%8C%E8%BF%98%E8%83%BDping%E9%80%9A%E5%9B%9E%E7%8E%AF%E5%9C%B0%E5%9D%80%E5%90%97%EF%BC%9F%E4%B8%BA%E4%BB%80%E4%B9%88.html" aria-label="硬核图解！断网了，还能ping通 127.0.0.1 吗？为什么？"><!---->硬核图解！断网了，还能ping通 127.0.0.1 吗？为什么？<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E8%83%BDping%E9%80%9A%EF%BC%8C%E5%B0%B1%E4%BB%A3%E8%A1%A8TCP%E4%B8%80%E5%AE%9A%E8%83%BD%E8%BF%9E%E9%80%9A%E5%90%97%EF%BC%9F.html" aria-label="能ping通，TCP就一定能连通吗？"><!---->能ping通，TCP就一定能连通吗？<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link active vp-sidebar-link vp-sidebar-page active" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E8%BF%9E%E6%8E%A5%E4%B8%80%E4%B8%AAIP%E4%B8%8D%E5%AD%98%E5%9C%A8%E7%9A%84%E4%B8%BB%E6%9C%BA%E6%97%B6%EF%BC%8C%E6%8F%A1%E6%89%8B%E8%BF%87%E7%A8%8B%E6%98%AF%E6%80%8E%E6%A0%B7%E7%9A%84.html" aria-label="连接一个 IP 不存在的主机时，握手过程是怎样的？"><!---->连接一个 IP 不存在的主机时，握手过程是怎样的？<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E8%BF%9E%E6%8E%A5%E4%B8%80%E4%B8%AAIP%E4%B8%8D%E5%AD%98%E5%9C%A8%E7%9A%84%E4%B8%BB%E6%9C%BA%E6%97%B6%EF%BC%8C%E6%8F%A1%E6%89%8B%E8%BF%87%E7%A8%8B%E6%98%AF%E6%80%8E%E6%A0%B7%E7%9A%84.html#目的-ip-在局域网内" aria-label="目的 IP 在局域网内"><!---->目的 IP 在局域网内<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E8%BF%9E%E6%8E%A5%E4%B8%80%E4%B8%AAIP%E4%B8%8D%E5%AD%98%E5%9C%A8%E7%9A%84%E4%B8%BB%E6%9C%BA%E6%97%B6%EF%BC%8C%E6%8F%A1%E6%89%8B%E8%BF%87%E7%A8%8B%E6%98%AF%E6%80%8E%E6%A0%B7%E7%9A%84.html#小结" aria-label="小结"><!---->小结<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E8%BF%9E%E6%8E%A5%E4%B8%80%E4%B8%AAIP%E4%B8%8D%E5%AD%98%E5%9C%A8%E7%9A%84%E4%B8%BB%E6%9C%BA%E6%97%B6%EF%BC%8C%E6%8F%A1%E6%89%8B%E8%BF%87%E7%A8%8B%E6%98%AF%E6%80%8E%E6%A0%B7%E7%9A%84.html#目的-ip-在局域网外" aria-label="目的 IP 在局域网外"><!---->目的 IP 在局域网外<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E8%BF%9E%E6%8E%A5%E4%B8%80%E4%B8%AAIP%E4%B8%8D%E5%AD%98%E5%9C%A8%E7%9A%84%E4%B8%BB%E6%9C%BA%E6%97%B6%EF%BC%8C%E6%8F%A1%E6%89%8B%E8%BF%87%E7%A8%8B%E6%98%AF%E6%80%8E%E6%A0%B7%E7%9A%84.html#为什么连局域网外的-ip-现象跟连局域网内不一致" aria-label="为什么连局域网外的 IP 现象跟连局域网内不一致？"><!---->为什么连局域网外的 IP 现象跟连局域网内不一致？<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E8%BF%9E%E6%8E%A5%E4%B8%80%E4%B8%AAIP%E4%B8%8D%E5%AD%98%E5%9C%A8%E7%9A%84%E4%B8%BB%E6%9C%BA%E6%97%B6%EF%BC%8C%E6%8F%A1%E6%89%8B%E8%BF%87%E7%A8%8B%E6%98%AF%E6%80%8E%E6%A0%B7%E7%9A%84.html#tcp-第一次握手的重试规律好像不太对" aria-label="TCP 第一次握手的重试规律好像不太对？"><!---->TCP 第一次握手的重试规律好像不太对？<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E8%BF%9E%E6%8E%A5%E4%B8%80%E4%B8%AAIP%E4%B8%8D%E5%AD%98%E5%9C%A8%E7%9A%84%E4%B8%BB%E6%9C%BA%E6%97%B6%EF%BC%8C%E6%8F%A1%E6%89%8B%E8%BF%87%E7%A8%8B%E6%98%AF%E6%80%8E%E6%A0%B7%E7%9A%84.html#目的-ip-是回环地址" aria-label="目的 IP 是回环地址"><!---->目的 IP 是回环地址<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E8%BF%9E%E6%8E%A5%E4%B8%80%E4%B8%AAIP%E4%B8%8D%E5%AD%98%E5%9C%A8%E7%9A%84%E4%B8%BB%E6%9C%BA%E6%97%B6%EF%BC%8C%E6%8F%A1%E6%89%8B%E8%BF%87%E7%A8%8B%E6%98%AF%E6%80%8E%E6%A0%B7%E7%9A%84.html#rst-是什么" aria-label="RST 是什么？"><!---->RST 是什么？<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E8%BF%9E%E6%8E%A5%E4%B8%80%E4%B8%AAIP%E4%B8%8D%E5%AD%98%E5%9C%A8%E7%9A%84%E4%B8%BB%E6%9C%BA%E6%97%B6%EF%BC%8C%E6%8F%A1%E6%89%8B%E8%BF%87%E7%A8%8B%E6%98%AF%E6%80%8E%E6%A0%B7%E7%9A%84.html#目的-ip-在局域网内-1" aria-label="目的 IP 在局域网内"><!---->目的 IP 在局域网内<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E8%BF%9E%E6%8E%A5%E4%B8%80%E4%B8%AAIP%E4%B8%8D%E5%AD%98%E5%9C%A8%E7%9A%84%E4%B8%BB%E6%9C%BA%E6%97%B6%EF%BC%8C%E6%8F%A1%E6%89%8B%E8%BF%87%E7%A8%8B%E6%98%AF%E6%80%8E%E6%A0%B7%E7%9A%84.html#目的-ip-在局域网外-1" aria-label="目的 IP 在局域网外"><!---->目的 IP 在局域网外<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E8%BF%9E%E6%8E%A5%E4%B8%80%E4%B8%AAIP%E4%B8%8D%E5%AD%98%E5%9C%A8%E7%9A%84%E4%B8%BB%E6%9C%BA%E6%97%B6%EF%BC%8C%E6%8F%A1%E6%89%8B%E8%BF%87%E7%A8%8B%E6%98%AF%E6%80%8E%E6%A0%B7%E7%9A%84.html#文章推荐" aria-label="文章推荐："><!---->文章推荐：<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul><!--]--></li></ul></section></li></ul></section></li></ul></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!--[--><!----><!--]--><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->连接一个 IP 不存在的主机时，握手过程是怎样的？</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://xiaobaidebug.top/" target="_blank" rel="noopener noreferrer">小白debug</a></span><span property="author" content="小白debug"></span></span><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2021-07-25T22:57:55.000Z"></span><!----><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 17 分钟</span><meta property="timeRequired" content="PT17M"></span><!----><!----></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">此页内容<button type="button" class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#目的-ip-在局域网内">目的 IP 在局域网内</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="route-link toc-link level3" href="/#小结">小结</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#目的-ip-在局域网外">目的 IP 在局域网外</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="route-link toc-link level3" href="/#为什么连局域网外的-ip-现象跟连局域网内不一致">为什么连局域网外的 IP 现象跟连局域网内不一致？</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level3" href="/#tcp-第一次握手的重试规律好像不太对">TCP 第一次握手的重试规律好像不太对？</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#目的-ip-是回环地址">目的 IP 是回环地址</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="route-link toc-link level3" href="/#rst-是什么">RST 是什么？</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#目的-ip-在局域网内-1">目的 IP 在局域网内</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#目的-ip-在局域网外-1">目的 IP 在局域网外</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#文章推荐">文章推荐：</a></li><!----><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!--[--><!----><!--]--><div class="theme-hope-content"><blockquote><p>文章持续更新，可以微信搜一搜「小白 debug」第一时间阅读，回复【面试】获免费面试题集。本文已经收录在 GitHub <a href="https://github.com/xiaobaiTech/golangFamily" target="_blank" rel="noopener noreferrer">https://github.com/xiaobaiTech/golangFamily<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> , 有大厂面试完整考点和成长路线，欢迎 Star。</p></blockquote><p>鸽了好长时间了，最近<strong>很忙</strong>。以前工作忙完，就抽空写文章。</p><p>现在忙完工作，还要一三五学驾照，二四六看家具。有同感的老铁们不要举手，拉到右下角**点个&quot;在看&quot;**就好了。</p><p>真的，全怪某音。</p><figure><img src="https://cdn.xiaobaidebug.top/image/12021625633784_.pic.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>扯远了，回到今天的主题。</p><p>方兄最近写了篇很赞的文章 <a href="https://mp.weixin.qq.com/s/SxaNLfGwM4dyzvBUvLAHvA" target="_blank" rel="noopener noreferrer">写给想去字节写 Go 的你<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ，里面提到了两个问题。</p><p>连接一个 <strong>IP 不存在</strong>的主机时，握手过程是怎样的？</p><p>连接一个 <strong>IP 地址存在但端口号不存在</strong>的主机时，握手过程又是怎样的呢？</p><p>让我回想起曾经也被面试官也问过类似的问题，意识到应该很多朋友会对这个问题感兴趣。</p><p>所以来给大家唠唠。</p><p>这两个问题可以延伸出非常多的点。</p><p>看完了，说不定能加分！</p><figure><img src="https://cdn.xiaobaidebug.top/image/12011625633784_.pic.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><br><h1 id="正常情况的握手过程是怎么样的" tabindex="-1"><a class="header-anchor" href="#正常情况的握手过程是怎么样的"><span>正常情况的握手过程是怎么样的</span></a></h1><p>上面提到的问题，其实是指<strong>TCP 的三次握手流程</strong>。这绝对是面试八股文里的老股了。</p><p>我们<strong>简单回顾</strong>下基础知识点。</p><figure><img src="https://cdn.xiaobaidebug.top/image/正常情况下的TCP三次握手1.png" alt="正常情况下的TCP三次握手" tabindex="0" loading="lazy"><figcaption>正常情况下的TCP三次握手</figcaption></figure><p>在<strong>服务端</strong>启动好后会调用 <code>listen()</code> 方法，进入到 <code>LISTEN</code> 状态，然后静静等待<strong>客户端</strong>的连接请求到来。</p><p>而此时客户端主动调用 <code>connect(IP地址)</code> ，就会向某个 IP 地址发起<strong>第一次握手</strong>，发送<code>SYN</code> 到目的服务器。</p><p>服务器在收到第一次握手后就会响应客户端，这是<strong>第二次握手</strong>。</p><p>客户端在收到第二次握手的消息后，响应服务的一个<code>ACK</code>，这算<strong>第三次</strong>握手，此时客户端 就会进入 <code>ESTABLISHED</code>状态，认为连接已经建立完成。</p><p>通过抓包可以直观看出三次握手的流程。</p><figure><img src="https://cdn.xiaobaidebug.top/image/image-20210626164202297.png" alt="正常三次握手抓包" tabindex="0" loading="lazy"><figcaption>正常三次握手抓包</figcaption></figure><br><h1 id="连一个-ip-不存在的主机时-握手过程是怎样的" tabindex="-1"><a class="header-anchor" href="#连一个-ip-不存在的主机时-握手过程是怎样的"><span>连一个 IP 不存在的主机时，握手过程是怎样的</span></a></h1><p>那不存在的 IP，分两种，<strong>局域网内和局域网外</strong>的。</p><figure><img src="https://cdn.xiaobaidebug.top/image/家用路由器局域网互联.png" alt="家用路由器局域网互联" tabindex="0" loading="lazy"><figcaption>家用路由器局域网互联</figcaption></figure><p>我以我家里的情况举例。</p><p>家里有一台<strong>家用路由器</strong>。本质上它的功能已经集成了我们常说的<strong>路由器，交换机和无线接入点</strong>的功能了。</p><p>其中<strong>路由器和交换机</strong>在之前写过的 《<a href="https://mp.weixin.qq.com/s/BJqp72EyEMahxi2XOfSrBQ" target="_blank" rel="noopener noreferrer">硬核图解！30 张图带你搞懂！路由器，集线器，交换机，网桥，光猫有啥区别？<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>》里已经详细介绍过了，就不再说一遍了。<strong>无线接入点</strong>基本可以认为就是个放出 wifi 信号的组件。</p><p>家用路由器下，连着我的 N 台设备，包括手机和电脑，他们的 IP 都有个<strong>共同点</strong>。都是 <code>192.168.31.xx</code> 形式的。其中，我的电脑的 IP 是<code>192.168.31.6</code> ，这个可以通过 <code>ifconfig</code>查到。</p><p>符合这个形式的这些个设备，本质上就是通过各种设备（wifi 或交换机等）接入到<strong>上图路由器的 e2 端口</strong>，他们共同构成一个<strong>局域网</strong>。</p><p>因此，在我家，我们可以<strong>粗暴点</strong>认为只要是 <code>192.168.31.xx</code> 形式的 IP，就是<strong>局域网内的 IP</strong>。否则就是<strong>局域网外的 IP</strong>，比如 <code>192.0.2.2</code> 。</p><br><h2 id="目的-ip-在局域网内" tabindex="-1"><a class="header-anchor" href="#目的-ip-在局域网内"><span>目的 IP 在局域网内</span></a></h2><p>因为通过 ifconfig 可以查到我的局域网内 IP 是<code>192.168.31.6</code> ，这里<strong>盲猜</strong>末尾+1 是不存在的 IP 。试了下，<code>192.168.31.7</code> 还真不存在。</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>$ <span class="token function">ping</span> <span class="token number">192.168</span>.31.7
PING <span class="token number">192.168</span>.31.7 <span class="token punctuation">(</span><span class="token number">192.168</span>.31.7<span class="token punctuation">)</span>: <span class="token number">56</span> data bytes
Request <span class="token function">timeout</span> <span class="token keyword">for</span> icmp_seq <span class="token number">0</span>
Request <span class="token function">timeout</span> <span class="token keyword">for</span> icmp_seq <span class="token number">1</span>
Request <span class="token function">timeout</span> <span class="token keyword">for</span> icmp_seq <span class="token number">2</span>
Request <span class="token function">timeout</span> <span class="token keyword">for</span> icmp_seq <span class="token number">3</span>
^C
--- <span class="token number">192.168</span>.31.7 <span class="token function">ping</span> statistics ---
<span class="token number">5</span> packets transmitted, <span class="token number">0</span> packets received, <span class="token number">100.0</span>% packet loss
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>于是写个程序尝试连这个 IP 。下面的代码是 <code>golang</code> 写的，<strong>大家不看代码也没关系，放出来只是方便大家自己复现的时候用的。</strong></p><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token comment">// tcp客户端</span>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;io&quot;</span>
	<span class="token string">&quot;net&quot;</span>
	<span class="token string">&quot;os&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	client<span class="token punctuation">,</span> err <span class="token operator">:=</span> net<span class="token punctuation">.</span><span class="token function">Dial</span><span class="token punctuation">(</span><span class="token string">&quot;tcp&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;192.168.31.7:8081&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;err:&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
		<span class="token keyword">return</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">defer</span> client<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		input <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">1024</span><span class="token punctuation">)</span>
		<span class="token keyword">for</span> <span class="token punctuation">{</span>
			n<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span>Stdin<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span>
			<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
				fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;input err:&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
				<span class="token keyword">continue</span>
			<span class="token punctuation">}</span>
			client<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span>input<span class="token punctuation">[</span><span class="token punctuation">:</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	buf <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">1024</span><span class="token punctuation">)</span>
	<span class="token keyword">for</span> <span class="token punctuation">{</span>
		n<span class="token punctuation">,</span> err <span class="token operator">:=</span> client<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span>
		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> err <span class="token operator">==</span> io<span class="token punctuation">.</span>EOF <span class="token punctuation">{</span>
				<span class="token keyword">return</span>
			<span class="token punctuation">}</span>
			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;read err:&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
			<span class="token keyword">continue</span>
		<span class="token punctuation">}</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">string</span><span class="token punctuation">(</span>buf<span class="token punctuation">[</span><span class="token punctuation">:</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后尝试抓包。</p><figure><img src="https://cdn.xiaobaidebug.top/image/image-20210619112642833.png" alt="连一个不存在的IP(局域网内)抓包" tabindex="0" loading="lazy"><figcaption>连一个不存在的IP(局域网内)抓包</figcaption></figure><p>可以发现根本没有三次握手的包，只有一些 ARP 包，在询问“谁是 <code>192.168.31.7</code>，告诉一下 <code>192.168.31.6</code>” 。</p><p>这里有三个问题</p><ul><li>为什么会发 ARP 请求？</li><li>为什么没有 TCP 握手包？</li><li>ARP 本身是没有重试机制的，为什么 ARP 请求会发那么多遍？</li></ul><p>首先我们看下正常情况下执行<code>connect</code>，也就是第一次握手 的流程。</p><figure><img src="https://cdn.xiaobaidebug.top/image/正常connect的流程.png" alt="正常connect的流程" tabindex="0" loading="lazy"><figcaption>正常connect的流程</figcaption></figure><p>应用层执行<code>connect</code>过后，会通过 socket 层，操作系统接口，进程会从<strong>用户态进入到内核态</strong>，此时进入 <strong>传输层</strong>，因为是<strong>TCP 第一次握手</strong>，会加入<strong>TCP 头</strong>，且置<strong>SYN</strong>标志。</p><figure><img src="https://cdn.xiaobaidebug.top/image/tcp报头的SYN.png" alt="tcp报头的SYN" tabindex="0" loading="lazy"><figcaption>tcp报头的SYN</figcaption></figure><p>然后进入<strong>网络层</strong>，我想要连的是 <code>192.168.31.7</code> ，虽然它是我瞎编的，但<strong>IP 头</strong>还是得老老实实把它加进去。</p><p>此时需要重点介绍的是<strong>邻居子系统</strong>，它在<strong>网络层和数据链路层之间</strong>。可以通过<strong>ARP 协议将目的 IP 转为对应的 MAC 地址</strong>，然后<strong>数据链路层</strong>就可以用这个 MAC 地址组装<strong>帧头</strong>。</p><p>我们看下那么<strong>ARP 协议的流程</strong>是</p><figure><img src="https://cdn.xiaobaidebug.top/image/ARP流程3.png" alt="ARP流程" tabindex="0" loading="lazy"><figcaption>ARP流程</figcaption></figure><p>1.先到本地 ARP 表查一下有没有 <code>192.168.31.7</code> 对应的 <strong>mac 地址</strong>，有的话就返回，这里显然是不可能会有的。</p><blockquote><p>可以通过 arp -a 命令查看本机的 arp 表都记录了哪些信息</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>$ arp <span class="token parameter variable">-a</span>
? <span class="token punctuation">(</span><span class="token number">192.168</span>.31.1<span class="token punctuation">)</span> at <span class="token number">88</span>:c1:97:59:d1:c3 on en0 ifscope <span class="token punctuation">[</span>ethernet<span class="token punctuation">]</span>
? <span class="token punctuation">(</span><span class="token number">224.0</span>.0.251<span class="token punctuation">)</span> at <span class="token number">1</span>:0:4e:0:1:fb on en0 ifscope permanent <span class="token punctuation">[</span>ethernet<span class="token punctuation">]</span>
? <span class="token punctuation">(</span><span class="token number">239.255</span>.255.250<span class="token punctuation">)</span> at <span class="token number">1</span>:0:3e:7f:ff:fb on en0 ifscope permanent <span class="token punctuation">[</span>ethernet<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2.看下 <code>192.168.31.7</code> 跟本机 IP <code>192.168.31.6 </code>在不在一个局域网下。如果在的话，就在局域网内发一个 arp 广播，内容就是 前面提到的 “谁是 <code>192.168.31.7</code>，告诉一下 <code>192.168.31.6</code>”。</p><p>3.如果目的 IP 跟本机 IP 不在同一个局域网下，那么会去获取<strong>默认网关的 MAC 地址</strong>，这里就是指获取<strong>家用路由器的 MAC 地址</strong>。然后把消息发给家用路由器，让路由器发到互联网，找到下一跳路由器，一跳一跳的发送数据，<strong>直到把消息发到目的 IP 上，又或者找不到目的地最终被丢弃。</strong></p><p>4.第 2 和第 3 点都是本地没有查到 ARP 缓存记录的情况，这时候会<strong>把 SYN 报文放进一个队列（叫 unresolved_queue）里暂存起来</strong>，然后发起 ARP 请求；等 ARP 层收到 ARP 回应报文之后，会再从缓存中取出 SYN 报文，组装 MAC 帧头，完成刚刚没完成的发送流程。</p><p>如果经过 ARP 流程能正常返回 MAC 地址，那皆大欢喜，直接给<strong>数据链路层</strong>，经过 <code>ring buffer</code> 后传到网卡，发出去。</p><p>但因为现在这个 IP 是瞎编的，因此不可能得到目的地址 MAC ，所以消息也一直没法到数据链路层。<strong>整个流程卡在了 ARP 流程中。</strong></p><p>而<strong>抓包是在数据链路层之后进行的</strong>，因此 TCP 第一次握手的包一直没能抓到，只能抓到为了获得 <code>192.168.31.7</code> 的 MAC 地址的 ARP 请求。</p><blockquote><p>发送数据时，是在经过数据链路层之后的 dev_queue_xmit_nit 方法执行抓包操作的，这是属于网卡驱动层的方法了。</p><p>顺带一提，接收端抓包是在 __netif_receive_skb_core 方法里执行的，也属于网卡驱动层。感兴趣的朋友们可以以这个为关键词搜索相关知识点哈</p></blockquote><p>此时 因为 TCP 协议是可靠的协议，对于 TCP 层来说，第一次握手的消息，已经发出去了，但是一直没有收到 ACK。也不知道消息是出去后是遇到什么事了。为了保证可靠性，它会不断重发。</p><p>而每一次重发，都会因为同样的原因（没有目的 MAC 地址）而尬在了 ARP 那个流程里。因此，才看到好几次重复的 ARP 消息。</p><p>那回到刚刚的三个问题</p><ul><li><p>为什么会发 ARP 请求？</p><p>因为目的地址是瞎编的，本地 ARP 表没有目的机器的 MAC 地址，因此发出 ARP 消息。</p></li><li><p>为什么没有 TCP 握手包？</p><p>因为协议栈的数据到了网络层后，在数据链路层前，就因为没有目的 MAC 地址，没法发出。因此抓包软件抓不到相关数据。</p></li><li><p>为什么 ARP 请求会发那么多遍？</p><p>因为 TCP 协议的可靠性，会重发第一次握手的消息，但每一次都因为没有目的 MAC 地址而失败，每次都会发出 ARP 请求。</p></li></ul><br><h3 id="小结" tabindex="-1"><a class="header-anchor" href="#小结"><span>小结</span></a></h3><p>连一个 IP 不存在的主机时，如果<strong>目的 IP 在局域网内</strong>，则第一次握手会失败，接着不断尝试重发握手的请求。同时，本机会不断发出 ARP 请求，企图获得目的机器的 MAC 地址。并且，因为没能获得目的 MAC 地址，这些 TCP 握手请求最终都发不出去，</p><br><h2 id="目的-ip-在局域网外" tabindex="-1"><a class="header-anchor" href="#目的-ip-在局域网外"><span>目的 IP 在局域网外</span></a></h2><p>上面提到的是，目的 IP 在<strong>局域网内</strong>的情况，下面讨论目的 IP 在<strong>局域网外</strong>的情况。</p><p>瞎编一个不是 <code>192.168.31.xx</code> 形式的 IP 作为这次要用的局域网外 IP， 比如 <code>10.225.31.11</code>。</p><p>先抓包看一下。</p><figure><img src="https://cdn.xiaobaidebug.top/image/image-20210619111302173.png" alt="连一个不存在的IP(局域网外)抓包" tabindex="0" loading="lazy"><figcaption>连一个不存在的IP(局域网外)抓包</figcaption></figure><p>这次的现象是能发出 TCP 第一次握手的 <code>SYN包</code>。</p><p>这里有两个问题</p><ul><li>为什么连局域网外的 IP 现象跟连局域网内不一致？</li><li>TCP 第一次握手的重试规律好像不太对？</li></ul><br><h3 id="为什么连局域网外的-ip-现象跟连局域网内不一致" tabindex="-1"><a class="header-anchor" href="#为什么连局域网外的-ip-现象跟连局域网内不一致"><span>为什么连局域网外的 IP 现象跟连局域网内不一致？</span></a></h3><p>这个问题的答案其实在上面 <strong>ARP 的流程</strong>里已经提到过了，如果目的 IP 跟本机 IP 不在同一个局域网下，那么会去获取<strong>默认网关的 MAC 地址</strong>，这里就是指获取<strong>家用路由器的 MAC 地址</strong>。</p><p>此时 ARP 流程成功返回<strong>家用路由器的 MAC 地址</strong>，数据链路层加入帧头，消息通过网卡发到了<strong>家用路由器上</strong>。</p><p>消息会通过互联网一直传递到某个局域网为 <code>10.225.31.xx</code> 的路由器上，那个路由器 发出 ARP 请求，询问他们局域网内的机器有没有叫 <code>10.225.31.11</code>的 （结果当然没有）。</p><p>最终没能发送成功，发送端也就迟迟收不到目的机的第二次握手响应。</p><p>因此触发 TCP 重传。</p><br><h3 id="tcp-第一次握手的重试规律好像不太对" tabindex="-1"><a class="header-anchor" href="#tcp-第一次握手的重试规律好像不太对"><span>TCP 第一次握手的重试规律好像不太对？</span></a></h3><p>在 Linux 中，第一次握手的 <code>SYN</code> 重传次数，是通过 <code>tcp_syn_retries</code> 参数控制的。可以通过下面的方式查看</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token variable">$cat</span> /proc/sys/net/ipv4/tcp_syn_retries
<span class="token number">6</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>这里的含义是指 <code>syn重传</code> 会发生 6 次。</p><p>而每次重试都会间隔一定的时间，这里的间隔一般是 1s，2s，4s，8s, 16s, 32s .</p><figure><img src="https://cdn.xiaobaidebug.top/image/SYN重传.png" alt="SYN重传" tabindex="0" loading="lazy"><figcaption>SYN重传</figcaption></figure><p>而事实上，看我的截图，是先重试 4 次，每次都是 1s，之后才是 1s，2s，4s，8s, 16s, 32s 的重试。</p><p>这跟我们知道的不太一样。</p><p>这个是因为<strong>我用的是 macOS 抓的包，跟 linux 就不是一个系统</strong>，各自的 TCP 协议栈在 sync 重传方面的实现都可能会有一定的差异。</p><p>我还听说 <code>oppo</code> 和 <code>vivo</code> 的 syn 重传 是 0.5s 起步的。而 <code>windows</code> 的 syn 重传 还有自己的专利。</p><p>这些冷知识大家可以不用在意。面试的时候知道 linux 的就够了，剩下的可以用来装逼。毕竟面试官不在意&quot;茴&quot;字到底有几种写法。</p><br><h1 id="连-ip-地址存在但端口号不存在的主机的握手过程" tabindex="-1"><a class="header-anchor" href="#连-ip-地址存在但端口号不存在的主机的握手过程"><span>连 IP 地址存在但端口号不存在的主机的握手过程</span></a></h1><p>前面提到的是 IP 地址压根就不存在的情况。假如<strong>IP 地址存在但端口号是瞎编的</strong>呢？</p><h2 id="目的-ip-是回环地址" tabindex="-1"><a class="header-anchor" href="#目的-ip-是回环地址"><span>目的 IP 是回环地址</span></a></h2><figure><img src="https://cdn.xiaobaidebug.top/image/image-20210627090037348.png" alt="连回环地址，端口不存在抓包" tabindex="0" loading="lazy"><figcaption>连回环地址，端口不存在抓包</figcaption></figure><p>现象也比较简单，已经 IP 地址是存在的，也就是在互联网中这个机器是存在的。</p><p>那么我们可以正常发消息到目的 IP，因为对应的 MAC 地址和 IP 都是正确的，所以，数据从数据链路层到网络层都很 OK。</p><p>直到传输层，TCP 协议在识别到这个端口号对应的进程根本不存在时，就会把数据丢弃，响应一个 RST 消息给发送端。</p><figure><img src="https://cdn.xiaobaidebug.top/image/连回环地址时端口不存在.png" alt="连回环地址时端口不存在" tabindex="0" loading="lazy"><figcaption>连回环地址时端口不存在</figcaption></figure><br><h3 id="rst-是什么" tabindex="-1"><a class="header-anchor" href="#rst-是什么"><span>RST 是什么？</span></a></h3><p>我们都是到 TCP 正常情况下断开连接是用四次挥手，那是<strong>正常时候</strong>的优雅做法。</p><p>但<strong>异常情况</strong>下，收发双方都不一定正常，连挥手这件事本身都可能做不到，所以就需要一个机制去强行关闭连接。</p><p><strong>RST</strong> 就是用于这种情况，一般用来<strong>异常地</strong>关闭一个连接。它在 TCP 包头中，在收到置了这个标志位的数据包后，连接就会被关闭，此时接收到 RST 的一方，一般会看到一个 <code>connection reset</code> 或 <code>connection refused</code> 的报错。</p><figure><img src="https://cdn.xiaobaidebug.top/image/tcp报头RST位.png" alt="TCP报头RST位" tabindex="0" loading="lazy"><figcaption>TCP报头RST位</figcaption></figure><br><h2 id="目的-ip-在局域网内-1" tabindex="-1"><a class="header-anchor" href="#目的-ip-在局域网内-1"><span>目的 IP 在局域网内</span></a></h2><p>刚刚提到我的本机 IP 是 <code>192.168.31.6</code> ，局域网内有台 <code>192.168.31.1</code> 。同样尝试连一个不存在的端口。</p><figure><img src="https://cdn.xiaobaidebug.top/image/image-20210619113503022.png" alt="连存在的局域网内IP，端口不存在抓包" tabindex="0" loading="lazy"><figcaption>连存在的局域网内IP，端口不存在抓包</figcaption></figure><p>此时现象跟前者一致。</p><p>唯一不同的是，前者是回环地址，RST 数据是从本机的传输层返回的。而这次的情况，RST 数据是从目的机器的传输层返回的。</p><figure><img src="https://cdn.xiaobaidebug.top/image/连外网地址时端口不存在.png" alt="连外网地址时端口不存在" tabindex="0" loading="lazy"><figcaption>连外网地址时端口不存在</figcaption></figure><br><h2 id="目的-ip-在局域网外-1" tabindex="-1"><a class="header-anchor" href="#目的-ip-在局域网外-1"><span>目的 IP 在局域网外</span></a></h2><p>找一个存在的外网 ip，这里我拿了<strong>最近刚白嫖的阿里云服务器</strong>地址 <code> 47.102.221.141</code> 。（炫耀）</p><p>进行连接连接，发现与前面两种情况是一致的，目的机器在收到我的请求后，立马就通过 <strong>RST 标志位</strong> 断开了这次的连接。</p><figure><img src="https://cdn.xiaobaidebug.top/image/image-20210619182034584.png" alt="连存在的局域网外IP，端口不存在抓包" tabindex="0" loading="lazy"><figcaption>连存在的局域网外IP，端口不存在抓包</figcaption></figure><p>这一点跟前面两种情况一致。</p><p>熟悉小白的朋友们都知道，每次搞事情做测试，都会用 <code>baidu.com</code> 。</p><p>这次也不例外，ping 一下 <code>baidu.com</code> ,获得它的 <code>IP: 220.181.38.148</code> 。</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>$ <span class="token function">ping</span> baidu.com
PING baidu.com <span class="token punctuation">(</span><span class="token number">220.181</span>.38.148<span class="token punctuation">)</span>: <span class="token number">56</span> data bytes
<span class="token number">64</span> bytes from <span class="token number">220.181</span>.38.148: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">48</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">35.728</span> ms
<span class="token number">64</span> bytes from <span class="token number">220.181</span>.38.148: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">1</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">48</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">38.052</span> ms
<span class="token number">64</span> bytes from <span class="token number">220.181</span>.38.148: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">2</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">48</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">37.845</span> ms
<span class="token number">64</span> bytes from <span class="token number">220.181</span>.38.148: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">3</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">48</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">37.210</span> ms
<span class="token number">64</span> bytes from <span class="token number">220.181</span>.38.148: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">4</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">48</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">38.402</span> ms
<span class="token number">64</span> bytes from <span class="token number">220.181</span>.38.148: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">5</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">48</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">37.692</span> ms
^C
--- baidu.com <span class="token function">ping</span> statistics ---
<span class="token number">6</span> packets transmitted, <span class="token number">6</span> packets received, <span class="token number">0.0</span>% packet loss
round-trip min/avg/max/stddev <span class="token operator">=</span> <span class="token number">35.728</span>/37.488/38.402/0.866 ms
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>发消息到给百度域名背后的 IP，且瞎随机指定一个端口 <strong>8080</strong>， 抓包。</p><figure><img src="https://cdn.xiaobaidebug.top/image/image-20210619084158238.png" alt="连baidu，端口不存在抓包" tabindex="0" loading="lazy"><figcaption>连baidu，端口不存在抓包</figcaption></figure><p>现象却不一致。没有 <code>RST</code> 。而且触发了第一次握手的重试消息。这是为什么？</p><p>这是因为 baidu 的机器，作为线上生产的机器，会设置一系列安全策略，比如只对外暴露某些端口，除此之外的端口，都一律拒绝。</p><p>所以很多发到 8080 端口的消息都<strong>在防火墙这一层就被拒绝掉了</strong>，根本到不了目的主机里，而<strong>RST 是在目的主机的 TCP/IP 协议栈里发出</strong>的，都还没到这一层，就更不可能发 RST 了。因此发送端发现消息没有回应（因为被防火墙丢了），就会重传。所以才会出现上述抓包里的现象。</p><figure><img src="https://cdn.xiaobaidebug.top/image/防火墙安全策略.png" alt="防火墙安全策略" tabindex="0" loading="lazy"><figcaption>防火墙安全策略</figcaption></figure><br><h1 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span>总结</span></a></h1><p>连一个 IP 不存在的主机时</p><ul><li><p>如果 IP 在局域网内，会发送 N 次 ARP 请求获得目的主机的 MAC 地址，同时不能发出 TCP 握手消息。</p></li><li><p>如果 IP 在局域网外，会将消息通过路由器发出，但因为最终找不到目的地，触发 TCP 重试流程。</p></li></ul><p>连 IP 地址存在但端口号不存在的主机时</p><ul><li><p>不管目的 IP 是回环地址还是局域网内外的 IP 地址，目的主机的传输层都会在收到握手消息后，发现端口不正确，发出 RST 消息断开连接。</p></li><li><p>当然如果目的机器设置了防火墙策略，限制他人将消息发到不对外暴露的端口，那么这种情况，发送端就会不断重试第一次握手。</p></li></ul><p>最后留个问题，连一个 <strong>不存在的局域网外 IP</strong>的主机时，我们可以看到 TCP 的重发规律是：开始时，每隔 1s 重发五次 <code>TCP SYN</code>消息，接着 2s,4s,8s,16s,32s 都重发一次；</p><p>对比连一个 <strong>不存在的局域网内 IP</strong>的主机时，却是每隔 1s 重发了 4 次<code>ARP请求</code>，接着过了 32s 后才再发出一次 ARP 请求。已知 ARP 请求是没有重传机制的，它的重试就是 TCP 重试触发的，但两者规律不一致，是为什么？</p><br><h1 id="最后" tabindex="-1"><a class="header-anchor" href="#最后"><span>最后</span></a></h1><p>欢迎大家加我微信（公众号里右下角“联系我”），互相围观朋友圈砍一刀啥的哈哈。</p><p>如果文章对你有帮助，看下文章底部右下角，做点正能量的事情（<strong>点两下</strong>）支持一下。（<strong><s>卑微</s>疯狂暗示，拜托拜托，这对我真的很重要！</strong>）</p><figure><img src="https://cdn.xiaobaidebug.top/image/12051625633785_.pic.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>我是小白，我们下期见。</p><h5 id="别说了-一起在知识的海洋里呛水吧" tabindex="-1"><a class="header-anchor" href="#别说了-一起在知识的海洋里呛水吧"><span>别说了，一起在知识的海洋里呛水吧</span></a></h5><p>关注公众号:【小白 debug】</p><br><h2 id="文章推荐" tabindex="-1"><a class="header-anchor" href="#文章推荐"><span>文章推荐：</span></a></h2><ul><li><p><a href="https://mp.weixin.qq.com/s/0H8WL6QeZ2VbO1hHPkn8Ug" target="_blank" rel="noopener noreferrer">TCP 粘包 数据包：我只是犯了每个数据包都会犯的错 |硬核图解<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></li><li><p><a href="https://golangguide.top/golang/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E7%BB%99%E5%A4%A7%E5%AE%B6%E4%B8%A2%E8%84%B8%E4%BA%86%EF%BC%8C%E7%94%A8%E4%BA%86%E4%B8%89%E5%B9%B4golang%EF%BC%8C%E6%88%91%E8%BF%98%E6%98%AF%E6%B2%A1%E7%AD%94%E5%AF%B9%E8%BF%99%E9%81%93%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F%E9%A2%98.html" target="_blank" rel="noopener noreferrer">给大家丢脸了，用了三年 golang，我还是没答对这道内存泄漏题<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></li><li><p><a href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E7%A1%AC%E6%A0%B8%EF%BC%81%E6%BC%AB%E7%94%BB%E5%9B%BE%E8%A7%A3HTTP%E7%9F%A5%E8%AF%86%E7%82%B9_%E9%9D%A2%E8%AF%95%E9%A2%98">硬核！漫画图解 HTTP 知识点+面试题</a></p></li><li><p><a href="https://mp.weixin.qq.com/s/BJqp72EyEMahxi2XOfSrBQ" target="_blank" rel="noopener noreferrer">硬核图解！30 张图带你搞懂！路由器，集线器，交换机，网桥，光猫有啥区别？<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></li></ul></div><!--[--><!----><!--]--><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/xiaobaiTech/golang-full-stack/edit/main/src/计算机基础/网络基础/核心知识点/连接一个IP不存在的主机时，握手过程是怎样的.md" rel="noopener noreferrer" target="_blank" aria-label="在 GitHub 上编辑此页" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->在 GitHub 上编辑此页<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><div class="update-time"><span class="label">上次编辑于: </span><!----></div><div class="contributors"><span class="label">贡献者: </span><!--[--><!--[--><span class="contributor" title="email: xiaobaidebug@gmail.com">xiaobai</span>,<!--]--><!--[--><span class="contributor" title="email: 948485496@qq.com">xiaobai-tech</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link nav-link prev" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E8%83%BDping%E9%80%9A%EF%BC%8C%E5%B0%B1%E4%BB%A3%E8%A1%A8TCP%E4%B8%80%E5%AE%9A%E8%83%BD%E8%BF%9E%E9%80%9A%E5%90%97%EF%BC%9F.html" aria-label="能ping通，TCP就一定能连通吗？"><div class="hint"><span class="arrow start"></span>上一页</div><div class="link"><!---->能ping通，TCP就一定能连通吗？</div></a><!----></nav><div id="comment" class="giscus-wrapper input-top" style="display:block;"><div class="loading-icon-wrapper" style="display:flex;align-items:center;justify-content:center;height:96px"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><!--[--><!----><!--]--><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer">关注公众号「小白debug」,回复「面试」获面试题集pdf</div><div class="vp-copyright">Copyright © 2024 小白debug </div></footer></div><!--]--><!--[--><!--[--><!--]--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-CRAuvUzn.js" defer></script>
  </body>
</html>
