<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.7" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.23" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://golangguide.top/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E5%8A%A8%E5%9B%BE%E5%9B%BE%E8%A7%A3%EF%BC%81%E6%94%B6%E5%88%B0RST%EF%BC%8C%E5%B0%B1%E4%B8%80%E5%AE%9A%E4%BC%9A%E6%96%AD%E5%BC%80TCP%E8%BF%9E%E6%8E%A5%E5%90%97%EF%BC%9F.html"><meta property="og:site_name" content="golang全栈指南"><meta property="og:title" content="动图图解！收到RST，就一定会断开TCP连接吗？"><meta property="og:description" content="想必大家已经知道我的 niao 性，搞个标题，就是不喜欢立马回答。 就是要搞一大堆原理性的东西，再回答标题的问题。 说这个是因为我这次会把问题的答案就放到开头吗？ 不！ 我就不！ 但是大家可以直接根据目录看自己感兴趣的部分。 之所以要先铺垫一些原理，还是希望大家能先看些基础的，再慢慢循序渐进，这样有利于建立知识体系。多一点上下文，少一点gap。 好了，..."><meta property="og:type" content="article"><meta property="og:image" content="https://cdn.xiaobaidebug.top/image/收到RST就一定会断开连接吗1.png"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-05-12T13:55:00.000Z"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:alt" content="动图图解！收到RST，就一定会断开TCP连接吗？"><meta property="article:author" content="小白debug"><meta property="article:published_time" content="2021-09-01T22:57:55.000Z"><meta property="article:modified_time" content="2024-05-12T13:55:00.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"动图图解！收到RST，就一定会断开TCP连接吗？","image":["https://cdn.xiaobaidebug.top/image/收到RST就一定会断开连接吗1.png","https://cdn.xiaobaidebug.top/image/tcp报头RST位.png","https://cdn.xiaobaidebug.top/image/resetByPeer1.gif","https://cdn.xiaobaidebug.top/image/brokenPipe1.gif","https://cdn.xiaobaidebug.top/image/TCP连接未监听的端口.png","https://cdn.xiaobaidebug.top/image/全局hash表.png","https://cdn.xiaobaidebug.top/image/006cSBLKly1gl6b731molj306405q74a.jpg","https://cdn.xiaobaidebug.top/image/006i487Uly1fgqbcncf3gj30b40b43z0-20210908211826494.jpg","https://cdn.xiaobaidebug.top/image/006m97Kgly1fxtp35bi77j315o15o4qp.jpg","https://cdn.xiaobaidebug.top/image/TCP监听了但崩了3.png","https://cdn.xiaobaidebug.top/image/RST与5021.png","https://cdn.xiaobaidebug.top/image/recvbuf非空.gif","https://cdn.xiaobaidebug.top/image/RST丢失3.png","https://cdn.xiaobaidebug.top/image/RST丢失后keepalive2.png","https://cdn.xiaobaidebug.top/image/接收窗口.png","https://cdn.xiaobaidebug.top/image/RST攻击.png","https://cdn.xiaobaidebug.top/image/image-20210901085509641.png","https://cdn.xiaobaidebug.top/image/利用ChallengeACK的RST攻击.png"],"datePublished":"2021-09-01T22:57:55.000Z","dateModified":"2024-05-12T13:55:00.000Z","author":[{"@type":"Person","name":"小白debug","url":"https://xiaobaidebug.top/"}]}</script><link rel="canonical" href="https://golangguide.top/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E5%8A%A8%E5%9B%BE%E5%9B%BE%E8%A7%A3%EF%BC%81%E6%94%B6%E5%88%B0RST%EF%BC%8C%E5%B0%B1%E4%B8%80%E5%AE%9A%E4%BC%9A%E6%96%AD%E5%BC%80TCP%E8%BF%9E%E6%8E%A5%E5%90%97%EF%BC%9F.html"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"动图图解！收到RST，就一定会断开TCP连接吗？","image":[""],"datePublished":"2021-09-01T22:57:55.000Z","dateModified":"2024-05-12T13:55:00.000Z","author":[]}</script><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap"><meta name="keywords" content="Golang基础, Golang源码, 数据库原理, MySQL, ElasticSearch, 微服务架构, Kafka消息队列, Nginx服务器, Redis缓存, RocketMQ, Kubernetes, Docker容器化, k8s集群管理, CI/CD持续集成, Linux操作系统, DevOps文化, 分布式系统, 中间件技术, 开发工具集, Git版本控制, IDE集成开发环境, 源码阅读技巧, 读书笔记分享, 开源项目资源"><meta name="description" content="深入探索Golang全栈开发的世界，本网站提供了从基础到高级的全面学习资源，涵盖数据库、微服务、Kubernetes、Docker等关键技术，以及源码分析、开发工具和读书笔记等实用资料，旨在帮助开发者构建扎实的技术基础，掌握现代软件架构的核心原理。"><meta name="author" content="https://www.xiaobaidebug.top/"><meta name="og:image" content="https://golangguide.top/new_logo.png"><meta property="og:image" content="https://golangguide.top/new_logo.png"><meta name="og:image:secure_url" content="https://golangguide.top/new_logo.png"><meta name="og:url" content="https://golangguide.top/"><meta property="og:title" content="欢迎来到 golangguide - 你需要的关于 golang 全栈后端开发的所有信息，包括但不限于mysql, redis, elasticsearch，微服务，kafka等信息"><meta name="og:description" content="golangguide Docs bring you all information you need about our protocol, APIs, SDKs, ZK Stack, and hyperchains. Start with our guides and tutorials, or go deep into our architecture and protocol specification."><meta name="twitter:title" content="Welcome to our Docs - All information you need about golangguide and ZK Stack"><meta name="twitter:description" content="golangguide Docs bring you all information you need about our protocol, APIs, SDKs, ZK Stack, and hyperchains. Start with our guides and tutorials, or go deep into our architecture and protocol specification."><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="manifest" href="/site.webmanifest"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#1E69FF"><link rel="shortcut icon" href="/favicon.ico"><meta name="msapplication-TileColor" content="#1E69FF"><meta name="msapplication-config" content="/browserconfig.xml"><meta name="theme-color" content="#1755F4"><script>
      window.addEventListener('load', function() {
        let contributors = document.querySelectorAll('.contributor');
        let contributorArr = Array.from(contributors);
        let topFive = contributorArr.slice(0, 5);
      
        topFive.forEach(function(contributor) {
          contributor.textContent = contributor.textContent.replace(',', '');
        });
      
        let lastComma = contributorArr[4];
        lastComma.textContent = lastComma.textContent.replace(',', '');
      
        let updatedList = topFive.map(function(contributor) {
          return contributor.textContent;
        }).join(', ');
          
        let contributorsDiv = document.querySelector('.contributors');
        contributorsDiv.innerHTML = '<span class="label">Contributors: </span>' + updatedList;
      
      });

      </script><title>动图图解！收到RST，就一定会断开TCP连接吗？ | golang全栈指南</title>
    <link rel="preload" href="/assets/style-D4yP6_7F.css" as="style"><link rel="stylesheet" href="/assets/style-D4yP6_7F.css">
    <link rel="modulepreload" href="/assets/app-CioO9xJQ.js"><link rel="modulepreload" href="/assets/动图图解！收到RST，就一定会断开TCP连接吗？.html-BNqgDbuN.js">
    <link rel="prefetch" href="/assets/index.html-DHS96iaq.js" as="script"><link rel="prefetch" href="/assets/学习路线.html-Bs1y0J-_.js" as="script"><link rel="prefetch" href="/assets/常用包大全.html-CwUn5Pzd.js" as="script"><link rel="prefetch" href="/assets/目录.html-CoWz4ZQh.js" as="script"><link rel="prefetch" href="/assets/介绍.html-DDRMpxnY.js" as="script"><link rel="prefetch" href="/assets/入营须知.html-ovpugECE.js" as="script"><link rel="prefetch" href="/assets/for select时，如果通道已经关闭会怎么样？如果只有一个case呢？.html-Ciw3otXN.js" as="script"><link rel="prefetch" href="/assets/golang 面试题：reflect（反射包）如何获取字段 tag？为什么 json 包不能导出私有变量的 tag？.html-D-3zobVS.js" as="script"><link rel="prefetch" href="/assets/golang并发题目测试.html-Bn6Dj8lu.js" as="script"><link rel="prefetch" href="/assets/golang面试题：json包变量不加tag会怎么样？.html-D_DF9dYq.js" as="script"><link rel="prefetch" href="/assets/golang面试题：字符串转成byte数组，会发生内存拷贝吗？.html-BIMzkXA0.js" as="script"><link rel="prefetch" href="/assets/golang面试题：对已经关闭的的chan进行读写，会怎么样？为什么？.html-D1y2q_3e.js" as="script"><link rel="prefetch" href="/assets/golang面试题：对未初始化的的chan进行读写，会怎么样？为什么？.html-BWEUCJys.js" as="script"><link rel="prefetch" href="/assets/golang面试题：怎么避免内存逃逸？.html-DqQxzYRP.js" as="script"><link rel="prefetch" href="/assets/golang面试题：拷贝大切片一定比小切片代价大吗？.html-DwekcJOa.js" as="script"><link rel="prefetch" href="/assets/golang面试题：简单聊聊内存逃逸？.html-vbS0T3B7.js" as="script"><link rel="prefetch" href="/assets/golang面试题：翻转含有中文、数字、英文字母的字符串.html-BNMXSL-z.js" as="script"><link rel="prefetch" href="/assets/golang高性能无GC的缓存库bigcache是怎么实现的.html-J-Xlyk2q.js" as="script"><link rel="prefetch" href="/assets/io_timeout，希望你不要踩到这个http包的坑.html-CUJvnVmU.js" as="script"><link rel="prefetch" href="/assets/为sync.WaitGroup中Wait函数支持WaitTimeout功能.html-B18cO8qE.js" as="script"><link rel="prefetch" href="/assets/交替打印数字和字母.html-B0ya5UKj.js" as="script"><link rel="prefetch" href="/assets/写出以下逻辑，要求每秒钟调用一次proc并保证程序不退出.html-DCRjVWLr.js" as="script"><link rel="prefetch" href="/assets/判断两个给定的字符串排序后是否一致.html-CBLeJaGH.js" as="script"><link rel="prefetch" href="/assets/判断字符串中字符是否全都不同.html-ChhnxVL2.js" as="script"><link rel="prefetch" href="/assets/动图图解！怎么让goroutine跑一半就退出？.html-DpT3jAFw.js" as="script"><link rel="prefetch" href="/assets/动图图解，GMP里为什么要有P.html-5sEymkYZ.js" as="script"><link rel="prefetch" href="/assets/多协程查询切片问题.html-DP-iJIOH.js" as="script"><link rel="prefetch" href="/assets/如何调用一个只支持batch_call的服务？.html-DiQmZelt.js" as="script"><link rel="prefetch" href="/assets/字符串替换问题.html-VRwM6ac_.js" as="script"><link rel="prefetch" href="/assets/实现阻塞读的并发安全Map.html-BMdHkJgM.js" as="script"><link rel="prefetch" href="/assets/常见语法题目一.html-D2qObF4X.js" as="script"><link rel="prefetch" href="/assets/常见语法题目二.html-BQpquRID.js" as="script"><link rel="prefetch" href="/assets/昨天那个在for循环里append元素的同事，今天还在么？.html-BPaerwKq.js" as="script"><link rel="prefetch" href="/assets/机器人坐标问题.html-l5KG7qeE.js" as="script"><link rel="prefetch" href="/assets/给大家丢脸了，用了三年golang，我还是没答对这道内存泄漏题.html-JN59Y47I.js" as="script"><link rel="prefetch" href="/assets/翻转字符串.html-C0hQ9BNP.js" as="script"><link rel="prefetch" href="/assets/能说说uintptr和unsafe.Pointer的区别吗.html-DrxIh56b.js" as="script"><link rel="prefetch" href="/assets/让golang协程和channel配合实现一个功能.html-iPVwo-9E.js" as="script"><link rel="prefetch" href="/assets/语法找错题.html-fOTeY5hk.js" as="script"><link rel="prefetch" href="/assets/连nil切片和空切片一不一样都不清楚？那BAT面试官只好让你回去等通知了。.html-D3aoacTy.js" as="script"><link rel="prefetch" href="/assets/高并发下的锁与map读写问题.html-DwXFPLmZ.js" as="script"><link rel="prefetch" href="/assets/1.Go入门.html-DeXQAW_r.js" as="script"><link rel="prefetch" href="/assets/2.Go进阶.html-BfOMDrPb.js" as="script"><link rel="prefetch" href="/assets/面试题.html-vnE8OdEd.js" as="script"><link rel="prefetch" href="/assets/面试题.html-qXAlgIrg.js" as="script"><link rel="prefetch" href="/assets/面试题.html-Dsp9kKT2.js" as="script"><link rel="prefetch" href="/assets/面试题.html-B0GPy2j9.js" as="script"><link rel="prefetch" href="/assets/面试题.html-BtNq0tMO.js" as="script"><link rel="prefetch" href="/assets/面试题.html-B5qaSjYR.js" as="script"><link rel="prefetch" href="/assets/面试题.html-32kipJAm.js" as="script"><link rel="prefetch" href="/assets/面试题.html-CxL6p259.js" as="script"><link rel="prefetch" href="/assets/面试题.html-hxGBfMiI.js" as="script"><link rel="prefetch" href="/assets/面试题.html-CdxQkps7.js" as="script"><link rel="prefetch" href="/assets/面试题.html-GE-mdsKq.js" as="script"><link rel="prefetch" href="/assets/面试题.html-d8Rp-4GD.js" as="script"><link rel="prefetch" href="/assets/面试题.html-pzPY6z0B.js" as="script"><link rel="prefetch" href="/assets/面试题.html-CpgI187-.js" as="script"><link rel="prefetch" href="/assets/面试题.html-Bcxri2Qb.js" as="script"><link rel="prefetch" href="/assets/1. Python 的起源与发展.html-C64LyrZ6.js" as="script"><link rel="prefetch" href="/assets/10. Python 标准库概览.html-BcfB3g5p.js" as="script"><link rel="prefetch" href="/assets/11. 字符串操作与正则表达式.html-D5OFqam6.js" as="script"><link rel="prefetch" href="/assets/12. 列表、元组、字典与集合.html-BpJiw94q.js" as="script"><link rel="prefetch" href="/assets/13. 时间与日期处理.html-Czuu5OrK.js" as="script"><link rel="prefetch" href="/assets/14. 常用内建函数.html-xiEIioV_.js" as="script"><link rel="prefetch" href="/assets/15. 生成器与迭代器.html-DF8xxklM.js" as="script"><link rel="prefetch" href="/assets/2. 安装与环境配置.html-BjDD0n2s.js" as="script"><link rel="prefetch" href="/assets/3. 变量、数据类型与运算符.html-WCRZgsaq.js" as="script"><link rel="prefetch" href="/assets/4. 控制流程：条件与循环.html-BkBqn0JX.js" as="script"><link rel="prefetch" href="/assets/5. 函数与模块.html-CwiYPNHm.js" as="script"><link rel="prefetch" href="/assets/6. 输入与输出.html-CYlBEWCN.js" as="script"><link rel="prefetch" href="/assets/7. 异常处理.html-DdGp2hbt.js" as="script"><link rel="prefetch" href="/assets/8. 面向对象编程基础.html-BKE8w7eh.js" as="script"><link rel="prefetch" href="/assets/9. 文件操作与管理.html-CMN-Orqb.js" as="script"><link rel="prefetch" href="/assets/16. 线程与多线程编程.html-B0kliWX7.js" as="script"><link rel="prefetch" href="/assets/17. 进程与多进程编程.html-BpTYgYIQ.js" as="script"><link rel="prefetch" href="/assets/18. 异步编程与协程.html-CSKA8xOr.js" as="script"><link rel="prefetch" href="/assets/19. 并发编程中的常见问题与解决方案.html-B5H_2HSm.js" as="script"><link rel="prefetch" href="/assets/20. 线程安全与锁机制.html-B0sbW7zz.js" as="script"><link rel="prefetch" href="/assets/21. 进程间通信与共享资源.html-DOyxLmWr.js" as="script"><link rel="prefetch" href="/assets/22. 异步编程框架比较.html-Dy_zGnQ-.js" as="script"><link rel="prefetch" href="/assets/23. GIL 与 Python 多线程.html-CXybQC7y.js" as="script"><link rel="prefetch" href="/assets/24. 多进程与多线程的选择.html-CSjryOje.js" as="script"><link rel="prefetch" href="/assets/25. asyncio 库与异步 IO 模型.html-DfWhw_nN.js" as="script"><link rel="prefetch" href="/assets/26. 多进程池与线程池.html-GbmzJZYR.js" as="script"><link rel="prefetch" href="/assets/27. 并行与并发的区别.html-DE-i8lnH.js" as="script"><link rel="prefetch" href="/assets/28. 异步编程中的回调地狱问题.html-FY2Vz4mX.js" as="script"><link rel="prefetch" href="/assets/29. 高并发与高性能的设计原则.html-ChyiV4Jm.js" as="script"><link rel="prefetch" href="/assets/30. 分布式计算与任务调度.html-Bgzc5zCE.js" as="script"><link rel="prefetch" href="/assets/31. 迭代器与生成器.html-CxBENHSi.js" as="script"><link rel="prefetch" href="/assets/32. 装饰器与闭包.html-85oXiPRe.js" as="script"><link rel="prefetch" href="/assets/33. 元类与类装饰器.html-BV6hN_UU.js" as="script"><link rel="prefetch" href="/assets/34. 设计模式与最佳实践.html-B8gh07B4.js" as="script"><link rel="prefetch" href="/assets/35. 函数式编程风格.html-dUcZv-x0.js" as="script"><link rel="prefetch" href="/assets/36. Python 代码优化与性能提升.html-b47PrNYi.js" as="script"><link rel="prefetch" href="/assets/37. 高级函数与 Lambda 表达式.html-3bLfYRG1.js" as="script"><link rel="prefetch" href="/assets/38. 魔术方法与元编程.html-GEarpU7R.js" as="script"><link rel="prefetch" href="/assets/39. 动态类型与静态类型语言对比.html-DQECZcPw.js" as="script"><link rel="prefetch" href="/assets/40. 高级模块与扩展.html-lG5d1M5h.js" as="script"><link rel="prefetch" href="/assets/41. 编码规范与文档.html-CopxZmiv.js" as="script"><link rel="prefetch" href="/assets/42. 版本控制与 Git.html-CW_r5Brb.js" as="script"><link rel="prefetch" href="/assets/43. 虚拟环境与依赖管理.html-D0vE5X1W.js" as="script"><link rel="prefetch" href="/assets/44. IDE 与编辑器推荐.html-B4fJA6zM.js" as="script"><link rel="prefetch" href="/assets/45. 调试工具与技巧.html-DNdtCxAT.js" as="script"><link rel="prefetch" href="/assets/46. 单元测试与集成测试.html-QrLvDR2V.js" as="script"><link rel="prefetch" href="/assets/47. 静态代码分析与 Lint 工具.html-CwBRPao0.js" as="script"><link rel="prefetch" href="/assets/48. 代码重构与优化工具.html-BGpw6gGP.js" as="script"><link rel="prefetch" href="/assets/49. CI-CD 与持续集成.html-DoCOFRqk.js" as="script"><link rel="prefetch" href="/assets/50. 文档生成与自动化部署.html-Cb4L2Jvj.js" as="script"><link rel="prefetch" href="/assets/51. 常见算法概述.html-BZRiu4Ke.js" as="script"><link rel="prefetch" href="/assets/52. 排序与搜索算法.html-JcuVVe7R.js" as="script"><link rel="prefetch" href="/assets/53. 数据结构与算法设计.html-CdVLY9Of.js" as="script"><link rel="prefetch" href="/assets/54. 动态规划与贪心算法.html-BRAR70rG.js" as="script"><link rel="prefetch" href="/assets/55. 图论与网络流算法.html-C1lpIbi9.js" as="script"><link rel="prefetch" href="/assets/56. 字符串匹配与处理算法.html-B7lTs8DM.js" as="script"><link rel="prefetch" href="/assets/57. 数论与组合数学.html-DA7l37tj.js" as="script"><link rel="prefetch" href="/assets/58. 复杂度分析与算法评估.html-BQ2KM2tj.js" as="script"><link rel="prefetch" href="/assets/59. 算法实现与优化技巧.html-BWvUJfc6.js" as="script"><link rel="prefetch" href="/assets/60. 常用数据结构实现.html-D-_w9RtU.js" as="script"><link rel="prefetch" href="/assets/61. 数据获取与清洗.html-1ebrcZiB.js" as="script"><link rel="prefetch" href="/assets/62. 数据处理与分析.html-HCv8W-Mr.js" as="script"><link rel="prefetch" href="/assets/63. 数据可视化.html-kq8atSyq.js" as="script"><link rel="prefetch" href="/assets/64. 机器学习入门.html-DaUU5vV4.js" as="script"><link rel="prefetch" href="/assets/65. 数据挖掘与预测建模.html-C2lMVV7H.js" as="script"><link rel="prefetch" href="/assets/66. 数据库与数据仓库.html-DGdxK7d8.js" as="script"><link rel="prefetch" href="/assets/67. 大数据与分布式计算.html-Ga0XudiB.js" as="script"><link rel="prefetch" href="/assets/68. 自然语言处理基础.html-ha-rDLgn.js" as="script"><link rel="prefetch" href="/assets/69. 图像处理与计算机视觉.html-L6nEuQ2b.js" as="script"><link rel="prefetch" href="/assets/70. 时间序列分析与预测.html-CB5OTeFX.js" as="script"><link rel="prefetch" href="/assets/71. Linux 基础与常用命令.html-CtRJqcK1.js" as="script"><link rel="prefetch" href="/assets/72. 网络基础与常用协议.html-xZ5ZYoFu.js" as="script"><link rel="prefetch" href="/assets/73. Web 服务器与部署.html-DSiyllho.js" as="script"><link rel="prefetch" href="/assets/74. 数据库基础与管理.html-CroO-dNt.js" as="script"><link rel="prefetch" href="/assets/75. 容器化与 Docker.html-BAb2hAVz.js" as="script"><link rel="prefetch" href="/assets/76. 自动化运维与配置管理.html-Deog5ixl.js" as="script"><link rel="prefetch" href="/assets/77. 负载均衡与高可用性.html-BTK9QKTX.js" as="script"><link rel="prefetch" href="/assets/78. 日志与监控系统.html-g9DOG67j.js" as="script"><link rel="prefetch" href="/assets/79. 安全与漏洞管理.html-DwL9mAMe.js" as="script"><link rel="prefetch" href="/assets/80. 云计算与云服务.html-_UkM36A5.js" as="script"><link rel="prefetch" href="/assets/81. NumPy 与 SciPy.html-B_hjP6sq.js" as="script"><link rel="prefetch" href="/assets/82. Pandas.html-C1e0SNhh.js" as="script"><link rel="prefetch" href="/assets/83. Matplotlib 与 Seaborn.html-CU0VuSwN.js" as="script"><link rel="prefetch" href="/assets/84. Requests 与 Beautiful Soup.html-C8_eV6iC.js" as="script"><link rel="prefetch" href="/assets/85. Django 与 Flask.html-lXaWy4Yu.js" as="script"><link rel="prefetch" href="/assets/86. SQLAlchemy 与 ORM.html-ij-ZbnvW.js" as="script"><link rel="prefetch" href="/assets/87. Celery 与任务队列.html-CT_TBipa.js" as="script"><link rel="prefetch" href="/assets/88. TensorFlow 与机器学习库.html-BgPGoNGL.js" as="script"><link rel="prefetch" href="/assets/89. PyQT 与 GUI 开发.html-BdgSRixE.js" as="script"><link rel="prefetch" href="/assets/90. GIS 与地理信息处理.html-DNqe2hO8.js" as="script"><link rel="prefetch" href="/assets/100.  项目总结与回顾.html-DyZL9878.js" as="script"><link rel="prefetch" href="/assets/91. 项目介绍与需求分析.html-DT90PaXJ.js" as="script"><link rel="prefetch" href="/assets/92. 项目架构与设计.html-BRFaqj_B.js" as="script"><link rel="prefetch" href="/assets/93. 代码实现与测试.html-D4Ad4g-6.js" as="script"><link rel="prefetch" href="/assets/94. 项目部署与维护.html-TSM_kk27.js" as="script"><link rel="prefetch" href="/assets/95. 用户反馈与迭代优化.html-Bvjqo1Xl.js" as="script"><link rel="prefetch" href="/assets/96. 项目文档与知识分享.html-BSzQpK-I.js" as="script"><link rel="prefetch" href="/assets/97. 团队协作与版本控制.html-DjhYx5r4.js" as="script"><link rel="prefetch" href="/assets/98. 项目上线与发布.html-DB1f_7pz.js" as="script"><link rel="prefetch" href="/assets/99. 故障处理与紧急修复.html-ClhQ4sfS.js" as="script"><link rel="prefetch" href="/assets/elasticSearch架构是怎么样的.html-BCgvYD2M.js" as="script"><link rel="prefetch" href="/assets/kafka是什么？架构是怎么样的？.html-1A_Bz4SU.js" as="script"><link rel="prefetch" href="/assets/Mysql并发写数据，怎么保证唯一性？.html-BoKsSj6L.js" as="script"><link rel="prefetch" href="/assets/Mysql数据库查询好慢，除了索引，还能因为什么？.html-DIp0Plpc.js" as="script"><link rel="prefetch" href="/assets/Mysql的索引为什么使用B_树而不使用跳表？.html-BQC1f8Lj.js" as="script"><link rel="prefetch" href="/assets/mysql主库更新后，从库读到最新值了，主库还有可能读到旧值吗？.html-BsTnxp7U.js" as="script"><link rel="prefetch" href="/assets/mysql是什么_架构是怎么样的.html-DsxPkAhL.js" as="script"><link rel="prefetch" href="/assets/mysql查询 limit 1000_10 和limit 10 速度一样快吗？.html-DCdPuSg0.js" as="script"><link rel="prefetch" href="/assets/mysql的varchar字段最大长度真的是65535吗？.html-ppu50w7u.js" as="script"><link rel="prefetch" href="/assets/为什么mysql写数据会丢失数据？.html-BWNV49Kl.js" as="script"><link rel="prefetch" href="/assets/为什么mysql插入不存在的数据会产生死锁？.html-BJvprp-V.js" as="script"><link rel="prefetch" href="/assets/为什么mysql的count()方法这么慢？.html-DVJNMUBX.js" as="script"><link rel="prefetch" href="/assets/为什么大家说mysql数据库单表最大两千万？.html-KAuk6H5f.js" as="script"><link rel="prefetch" href="/assets/分库分表带来的读扩散问题，怎么解决？.html-BBoKaSQ8.js" as="script"><link rel="prefetch" href="/assets/数据库主键一定要自增的吗？不自增行不行？有哪些场景下不建议自增？.html-1GDU3Lr3.js" as="script"><link rel="prefetch" href="/assets/都是select语句，为什么读到的内容不一样？.html-85OS7p5P.js" as="script"><link rel="prefetch" href="/assets/redis是什么.html-7LrJLahX.js" as="script"><link rel="prefetch" href="/assets/RocketMQ为什么性能不如Kafka.html-C4SoG5Db.js" as="script"><link rel="prefetch" href="/assets/RocketMQ是什么.html-DOzdY13B.js" as="script"><link rel="prefetch" href="/assets/docker和传统虚拟机有什么区别.html-BZm1RJYa.js" as="script"><link rel="prefetch" href="/assets/docker是什么docker和kubernetes(k8s)之间是什么关系有什么区别.html-CyKUyh-Y.js" as="script"><link rel="prefetch" href="/assets/k8s到底是什么.html-Bk-ryvL0.js" as="script"><link rel="prefetch" href="/assets/QPS的计算是怎么实现的.html-wigSTDmJ.js" as="script"><link rel="prefetch" href="/assets/docker和传统虚拟机有什么区别.html-zGrJeJnl.js" as="script"><link rel="prefetch" href="/assets/k8s到底是什么.html-CYNM0q5w.js" as="script"><link rel="prefetch" href="/assets/服务发现有哪些要素.html-DXe1U8CV.js" as="script"><link rel="prefetch" href="/assets/服务熔断和服务降级是指什么.html-2Doh9RDB.js" as="script"><link rel="prefetch" href="/assets/给32位系统装8g内存条能用吗？为什么？.html-ChCi_dNi.js" as="script"><link rel="prefetch" href="/assets/TCP四次挥手中如果服务端没收到第四次挥手请求，服务端会一直等待吗？.html-CauBNAqV.js" as="script"><link rel="prefetch" href="/assets/TCP粘包！数据包：我只是犯了每个数据包都会犯的错，硬核图解.html-B7UxtaU3.js" as="script"><link rel="prefetch" href="/assets/UDP就一定比TCP快吗.html-aNbCnRZ3.js" as="script"><link rel="prefetch" href="/assets/socket到底是什么？.html-CvceSDdP.js" as="script"><link rel="prefetch" href="/assets/不是我不回你消息，是因为网络会丢包.html-CX6UUcG1.js" as="script"><link rel="prefetch" href="/assets/为什么我们的IP都是192.168开头的？.html-CO4YofrQ.js" as="script"><link rel="prefetch" href="/assets/为什么我在公司里访问不了家里的电脑？.html-BEkFZcPG.js" as="script"><link rel="prefetch" href="/assets/为什么有HTTP协议，还要有websocket协议.html-6VnGPgAs.js" as="script"><link rel="prefetch" href="/assets/动图图解！代码执行send成功后，数据就发出去了吗？.html-C4LfaFCk.js" as="script"><link rel="prefetch" href="/assets/动图图解！既然IP层会分片，为什么TCP层也还要分段？.html-DAyPbGxC.js" as="script"><link rel="prefetch" href="/assets/原神的游戏服务器架构是怎么样的.html-UzxMQtxS.js" as="script"><link rel="prefetch" href="/assets/既然有HTTP协议，为什么还要有RPC协议？.html-tkBIgNH2.js" as="script"><link rel="prefetch" href="/assets/没有accept能建立TCP连接吗.html-CZhlPQqt.js" as="script"><link rel="prefetch" href="/assets/活久见！TCP两次挥手，你见过吗？那四次握手呢？.html-CwwG_3nR.js" as="script"><link rel="prefetch" href="/assets/硬核图解！30张图带你搞懂！路由器，集线器，交换机，网桥，光猫有啥区别？.html-BSfpj0Sq.js" as="script"><link rel="prefetch" href="/assets/硬核图解！断网了，还能ping通回环地址吗？为什么.html-CLGKBjb-.js" as="script"><link rel="prefetch" href="/assets/硬核！漫画图解HTTP知识点_面试题.html-3Jfwvja3.js" as="script"><link rel="prefetch" href="/assets/能ping通，就代表TCP一定能连通吗？.html-CJsb2guW.js" as="script"><link rel="prefetch" href="/assets/连接一个IP不存在的主机时，握手过程是怎样的.html-C8Gs_sY-.js" as="script"><link rel="prefetch" href="/assets/404.html-UrQTelGX.js" as="script"><link rel="prefetch" href="/assets/index.html-BtvA26-8.js" as="script"><link rel="prefetch" href="/assets/index.html-D17ei3jW.js" as="script"><link rel="prefetch" href="/assets/index.html-CwIX9h_8.js" as="script"><link rel="prefetch" href="/assets/index.html-BQsZCkL3.js" as="script"><link rel="prefetch" href="/assets/index.html-BwB36_iF.js" as="script"><link rel="prefetch" href="/assets/index.html-D_vHXgIZ.js" as="script"><link rel="prefetch" href="/assets/index.html-DjOnKDBC.js" as="script"><link rel="prefetch" href="/assets/index.html-DnvGePKl.js" as="script"><link rel="prefetch" href="/assets/index.html-BMk01Pa0.js" as="script"><link rel="prefetch" href="/assets/index.html-BmLMeOc6.js" as="script"><link rel="prefetch" href="/assets/index.html-DTyh6Ccz.js" as="script"><link rel="prefetch" href="/assets/index.html-BAgqRK1G.js" as="script"><link rel="prefetch" href="/assets/index.html-VjhB8qb4.js" as="script"><link rel="prefetch" href="/assets/index.html-BOoJAFLf.js" as="script"><link rel="prefetch" href="/assets/index.html-Dc6zDgxc.js" as="script"><link rel="prefetch" href="/assets/index.html-ClYhWyRZ.js" as="script"><link rel="prefetch" href="/assets/index.html-BiT-BEZK.js" as="script"><link rel="prefetch" href="/assets/index.html-C2txUECF.js" as="script"><link rel="prefetch" href="/assets/index.html-wbXcYSKx.js" as="script"><link rel="prefetch" href="/assets/index.html-DXKT9Bjv.js" as="script"><link rel="prefetch" href="/assets/index.html-CWmRRoA3.js" as="script"><link rel="prefetch" href="/assets/index.html-CqmKx8MM.js" as="script"><link rel="prefetch" href="/assets/index.html-Bu7gDvrZ.js" as="script"><link rel="prefetch" href="/assets/index.html-CNbAlE5n.js" as="script"><link rel="prefetch" href="/assets/index.html-B5I0KdK3.js" as="script"><link rel="prefetch" href="/assets/index.html-DFzfmGVj.js" as="script"><link rel="prefetch" href="/assets/index.html-Db6zFxE5.js" as="script"><link rel="prefetch" href="/assets/index.html-8w0m6Tvf.js" as="script"><link rel="prefetch" href="/assets/index.html-7Ml6EDUd.js" as="script"><link rel="prefetch" href="/assets/index.html-C_S5rg7I.js" as="script"><link rel="prefetch" href="/assets/index.html-BidHBR1u.js" as="script"><link rel="prefetch" href="/assets/index.html-DLxAxwaC.js" as="script"><link rel="prefetch" href="/assets/index.html-DvXhGc39.js" as="script"><link rel="prefetch" href="/assets/index.html-N7Hz_d9I.js" as="script"><link rel="prefetch" href="/assets/index.html-DEibIPDX.js" as="script"><link rel="prefetch" href="/assets/index.html-BsDyq5X7.js" as="script"><link rel="prefetch" href="/assets/index.html-DXprIIXs.js" as="script"><link rel="prefetch" href="/assets/index.html-Dl7M0sVd.js" as="script"><link rel="prefetch" href="/assets/index.html-5WsAhKyP.js" as="script"><link rel="prefetch" href="/assets/index.html-DBiNjVav.js" as="script"><link rel="prefetch" href="/assets/index.html-CynI36S8.js" as="script"><link rel="prefetch" href="/assets/index.html-CiZZQ6m7.js" as="script"><link rel="prefetch" href="/assets/index.html-I2VO5hea.js" as="script"><link rel="prefetch" href="/assets/giscus-BZxmVUME.js" as="script"><link rel="prefetch" href="/assets/auto-BmtazRt5.js" as="script"><link rel="prefetch" href="/assets/index-Dg-Kya5M.js" as="script"><link rel="prefetch" href="/assets/flowchart-CqEBEPwh.js" as="script"><link rel="prefetch" href="/assets/mermaid.core-CoH7euZ1.js" as="script"><link rel="prefetch" href="/assets/reveal.esm-CYbl4_PU.js" as="script"><link rel="prefetch" href="/assets/markdown.esm-BG2Xu2Hd.js" as="script"><link rel="prefetch" href="/assets/vue-repl-B7mGkTQj.js" as="script"><link rel="prefetch" href="/assets/codemirror-editor-Q_QK8U2x.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-GXRgw7eJ.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo" src="/new_logo.png" alt><!----><span class="vp-site-name hide-in-pad">golang全栈指南</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><a class="route-link nav-link" href="/" aria-label="主页"><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span>主页<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="训练营"><span class="title"><span class="font-icon icon fa-fw fa-sm fas fa-campground" style=""></span>训练营</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="route-link nav-link" href="/%E8%AE%AD%E7%BB%83%E8%90%A5/%E4%BB%8B%E7%BB%8D.html" aria-label="介绍"><span class="font-icon icon fa-fw fa-sm fas fa-address-card" style=""></span>介绍<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E8%AE%AD%E7%BB%83%E8%90%A5/%E5%85%A5%E8%90%A5%E9%A1%BB%E7%9F%A5.html" aria-label="入营须知"><span class="font-icon icon fa-fw fa-sm fas fa-brain" style=""></span>入营须知<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="计算机基础"><span class="title"><span class="font-icon icon fa-fw fa-sm fas fa-computer" style=""></span>计算机基础</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="route-link nav-link" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" aria-label="操作系统"><span class="font-icon icon fa-fw fa-sm fas fa-server" style=""></span>操作系统<!----></a></li><li class="dropdown-item"><a class="route-link nav-link active" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/" aria-label="网络基础"><span class="font-icon icon fa-fw fa-sm fas fa-wifi" style=""></span>网络基础<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="架构"><span class="title"><span class="font-icon icon fa-fw fa-sm fas fa-folder-tree" style=""></span>架构</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="route-link nav-link" href="/%E6%9E%B6%E6%9E%84/%E4%BA%91%E5%8E%9F%E7%94%9F/" aria-label="云原生"><span class="font-icon icon fa-fw fa-sm fas fa-box" style=""></span>云原生<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E6%9E%B6%E6%9E%84/%E5%88%86%E5%B8%83%E5%BC%8F/" aria-label="分布式"><span class="font-icon icon fa-fw fa-sm fas fa-manat-sign" style=""></span>分布式<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E6%9E%B6%E6%9E%84/%E5%BE%AE%E6%9C%8D%E5%8A%A1/" aria-label="微服务"><span class="font-icon icon fa-fw fa-sm fas fa-microchip" style=""></span>微服务<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E6%9E%B6%E6%9E%84/%E8%BF%90%E7%BB%B4/" aria-label="运维"><span class="font-icon icon fa-fw fa-sm fas fa-folder-open" style=""></span>运维<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="中间件"><span class="title"><span class="font-icon icon fa-fw fa-sm fas fa-align-center" style=""></span>中间件</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="route-link nav-link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/es/" aria-label="ES"><span class="font-icon icon fa-fw fa-sm fas fa-magnifying-glass" style=""></span>ES<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/kafka/" aria-label="Kafka"><span class="font-icon icon fa-fw fa-sm fas fa-chess-queen" style=""></span>Kafka<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/Memcached/" aria-label="Memcached"><span class="font-icon icon fa-fw fa-sm fas fa-suitcase" style=""></span>Memcached<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/ClickHouse/" aria-label="ClickHouse"><span class="font-icon icon fa-fw fa-sm fas fa-house-laptop" style=""></span>ClickHouse<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/mongodb/" aria-label="Mongodb"><span class="font-icon icon fa-fw fa-sm fas fa-vr-cardboard" style=""></span>Mongodb<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/mysql/" aria-label="Mysql"><span class="font-icon icon fa-fw fa-sm fas fa-database" style=""></span>Mysql<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/nginx/" aria-label="Nginx"><span class="font-icon icon fa-fw fa-sm fas fa-network-wired" style=""></span>Nginx<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/rabbitmq/" aria-label="RabbitMQ"><span class="font-icon icon fa-fw fa-sm fas fa-frog" style=""></span>RabbitMQ<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/redis/" aria-label="Redis"><span class="font-icon icon fa-fw fa-sm fas fa-registered" style=""></span>Redis<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/rocketmq/" aria-label="RocketMQ"><span class="font-icon icon fa-fw fa-sm fas fa-rocket" style=""></span>RocketMQ<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="Golang"><span class="title"><span class="font-icon icon fa-fw fa-sm fas fa-lightbulb" style=""></span>Golang</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="route-link nav-link" href="/golang/%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF.html" aria-label="学习路线"><span class="font-icon icon fa-fw fa-sm fas fa-map-location-dot" style=""></span>学习路线<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/golang/%E5%B8%B8%E7%94%A8%E5%8C%85%E5%A4%A7%E5%85%A8.html" aria-label="常用包大全"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span>常用包大全<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/golang/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/" aria-label="核心知识点"><span class="font-icon icon fa-fw fa-sm fas fa-house-laptop" style=""></span>核心知识点<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/1.Go%E5%85%A5%E9%97%A8.html" aria-label="基础面试题"><span class="font-icon icon fa-fw fa-sm fas fa-disease" style=""></span>基础面试题<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html" aria-label="进阶面试题"><span class="font-icon icon fa-fw fa-sm fas fa-clipboard-question" style=""></span>进阶面试题<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="https://xiaobaidebug.top/" rel="noopener noreferrer" target="_blank" aria-label="blog" class="nav-link"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span>blog<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="nav-item hide-in-mobile"><a href="https://golangguide.top/sitemap.xml" rel="noopener noreferrer" target="_blank" aria-label="sitemap" class="nav-link"><span class="font-icon icon fa-fw fa-sm fas fa-blog" style=""></span>sitemap<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><div class="nav-item vp-repo"><a class="vp-repo-link" href="https://github.com/xiaobaiTech/golang-full-stack" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading clickable active"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span><a class="route-link nav-link vp-sidebar-title" href="/计算机基础/计算机基础/" aria-label="计算机基础"><!---->计算机基础<!----></a><!----></p><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">操作系统</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable active" type="button"><!----><span class="vp-sidebar-title">网络基础</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable active" type="button"><!----><span class="vp-sidebar-title">核心知识点</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/socket%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F.html" aria-label="socket 到底是什么？"><!---->socket 到底是什么？<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/TCP%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B%E4%B8%AD%E5%A6%82%E6%9E%9C%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%B2%A1%E6%94%B6%E5%88%B0%E7%AC%AC%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B%E8%AF%B7%E6%B1%82%EF%BC%8C%E6%9C%8D%E5%8A%A1%E7%AB%AF%E4%BC%9A%E4%B8%80%E7%9B%B4%E7%AD%89%E5%BE%85%E5%90%97%EF%BC%9F.html" aria-label="TCP四次挥手中如果服务端没收到第四次挥手请求，服务端会一直等待吗？"><!---->TCP四次挥手中如果服务端没收到第四次挥手请求，服务端会一直等待吗？<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/TCP%E7%B2%98%E5%8C%85%EF%BC%81%E6%95%B0%E6%8D%AE%E5%8C%85%EF%BC%9A%E6%88%91%E5%8F%AA%E6%98%AF%E7%8A%AF%E4%BA%86%E6%AF%8F%E4%B8%AA%E6%95%B0%E6%8D%AE%E5%8C%85%E9%83%BD%E4%BC%9A%E7%8A%AF%E7%9A%84%E9%94%99%EF%BC%8C%E7%A1%AC%E6%A0%B8%E5%9B%BE%E8%A7%A3.html" aria-label="TCP粘包  数据包：我只是犯了每个数据包都会犯的错 |硬核图解"><!---->TCP粘包  数据包：我只是犯了每个数据包都会犯的错 |硬核图解<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E4%B8%BA%E4%BB%80%E4%B9%88%E6%88%91%E4%BB%AC%E7%9A%84IP%E9%83%BD%E6%98%AF192.168%E5%BC%80%E5%A4%B4%E7%9A%84%EF%BC%9F.html" aria-label="为什么我们家里的IP都是192.168开头的？"><!---->为什么我们家里的IP都是192.168开头的？<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E4%B8%BA%E4%BB%80%E4%B9%88%E6%88%91%E5%9C%A8%E5%85%AC%E5%8F%B8%E9%87%8C%E8%AE%BF%E9%97%AE%E4%B8%8D%E4%BA%86%E5%AE%B6%E9%87%8C%E7%9A%84%E7%94%B5%E8%84%91%EF%BC%9F.html" aria-label="为什么我在公司里访问不了家里的电脑？"><!---->为什么我在公司里访问不了家里的电脑？<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E4%B8%BA%E4%BB%80%E4%B9%88%E6%9C%89HTTP%E5%8D%8F%E8%AE%AE%EF%BC%8C%E8%BF%98%E8%A6%81%E6%9C%89websocket%E5%8D%8F%E8%AE%AE.html" aria-label="为什么有HTTP协议，还要有websocket协议"><!---->为什么有HTTP协议，还要有websocket协议<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/UDP%E5%B0%B1%E4%B8%80%E5%AE%9A%E6%AF%94TCP%E5%BF%AB%E5%90%97.html" aria-label="动图图解 | UDP就一定比TCP快吗？"><!---->动图图解 | UDP就一定比TCP快吗？<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E5%8A%A8%E5%9B%BE%E5%9B%BE%E8%A7%A3%EF%BC%81%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8Csend%E6%88%90%E5%8A%9F%E5%90%8E%EF%BC%8C%E6%95%B0%E6%8D%AE%E5%B0%B1%E5%8F%91%E5%87%BA%E5%8E%BB%E4%BA%86%E5%90%97%EF%BC%9F.html" aria-label="动图图解！代码执行send成功后，数据就发出去了吗？"><!---->动图图解！代码执行send成功后，数据就发出去了吗？<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link active vp-sidebar-link vp-sidebar-page active" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E5%8A%A8%E5%9B%BE%E5%9B%BE%E8%A7%A3%EF%BC%81%E6%94%B6%E5%88%B0RST%EF%BC%8C%E5%B0%B1%E4%B8%80%E5%AE%9A%E4%BC%9A%E6%96%AD%E5%BC%80TCP%E8%BF%9E%E6%8E%A5%E5%90%97%EF%BC%9F.html" aria-label="动图图解！收到RST，就一定会断开TCP连接吗？"><!---->动图图解！收到RST，就一定会断开TCP连接吗？<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E5%8A%A8%E5%9B%BE%E5%9B%BE%E8%A7%A3%EF%BC%81%E6%94%B6%E5%88%B0RST%EF%BC%8C%E5%B0%B1%E4%B8%80%E5%AE%9A%E4%BC%9A%E6%96%AD%E5%BC%80TCP%E8%BF%9E%E6%8E%A5%E5%90%97%EF%BC%9F.html#什么是-rst" aria-label="什么是 RST"><!---->什么是 RST<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E5%8A%A8%E5%9B%BE%E5%9B%BE%E8%A7%A3%EF%BC%81%E6%94%B6%E5%88%B0RST%EF%BC%8C%E5%B0%B1%E4%B8%80%E5%AE%9A%E4%BC%9A%E6%96%AD%E5%BC%80TCP%E8%BF%9E%E6%8E%A5%E5%90%97%EF%BC%9F.html#怎么知道收到-rst-了" aria-label="怎么知道收到 RST 了？"><!---->怎么知道收到 RST 了？<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E5%8A%A8%E5%9B%BE%E5%9B%BE%E8%A7%A3%EF%BC%81%E6%94%B6%E5%88%B0RST%EF%BC%8C%E5%B0%B1%E4%B8%80%E5%AE%9A%E4%BC%9A%E6%96%AD%E5%BC%80TCP%E8%BF%9E%E6%8E%A5%E5%90%97%EF%BC%9F.html#出现-rst-的场景有哪些" aria-label="出现 RST 的场景有哪些"><!---->出现 RST 的场景有哪些<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E5%8A%A8%E5%9B%BE%E5%9B%BE%E8%A7%A3%EF%BC%81%E6%94%B6%E5%88%B0RST%EF%BC%8C%E5%B0%B1%E4%B8%80%E5%AE%9A%E4%BC%9A%E6%96%AD%E5%BC%80TCP%E8%BF%9E%E6%8E%A5%E5%90%97%EF%BC%9F.html#端口不可用" aria-label="端口不可用"><!---->端口不可用<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E5%8A%A8%E5%9B%BE%E5%9B%BE%E8%A7%A3%EF%BC%81%E6%94%B6%E5%88%B0RST%EF%BC%8C%E5%B0%B1%E4%B8%80%E5%AE%9A%E4%BC%9A%E6%96%AD%E5%BC%80TCP%E8%BF%9E%E6%8E%A5%E5%90%97%EF%BC%9F.html#socket-提前关闭" aria-label="socket 提前关闭"><!---->socket 提前关闭<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E5%8A%A8%E5%9B%BE%E5%9B%BE%E8%A7%A3%EF%BC%81%E6%94%B6%E5%88%B0RST%EF%BC%8C%E5%B0%B1%E4%B8%80%E5%AE%9A%E4%BC%9A%E6%96%AD%E5%BC%80TCP%E8%BF%9E%E6%8E%A5%E5%90%97%EF%BC%9F.html#对方没收到-rst-会怎么样" aria-label="对方没收到 RST，会怎么样？"><!---->对方没收到 RST，会怎么样？<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E5%8A%A8%E5%9B%BE%E5%9B%BE%E8%A7%A3%EF%BC%81%E6%94%B6%E5%88%B0RST%EF%BC%8C%E5%B0%B1%E4%B8%80%E5%AE%9A%E4%BC%9A%E6%96%AD%E5%BC%80TCP%E8%BF%9E%E6%8E%A5%E5%90%97%EF%BC%9F.html#收到-rst-就一定会断开连接吗" aria-label="收到 RST 就一定会断开连接吗?"><!---->收到 RST 就一定会断开连接吗?<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E5%8A%A8%E5%9B%BE%E5%9B%BE%E8%A7%A3%EF%BC%81%E6%94%B6%E5%88%B0RST%EF%BC%8C%E5%B0%B1%E4%B8%80%E5%AE%9A%E4%BC%9A%E6%96%AD%E5%BC%80TCP%E8%BF%9E%E6%8E%A5%E5%90%97%EF%BC%9F.html#为什么要校验是否在窗口范围内" aria-label="为什么要校验是否在窗口范围内"><!---->为什么要校验是否在窗口范围内<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E5%8A%A8%E5%9B%BE%E5%9B%BE%E8%A7%A3%EF%BC%81%E6%94%B6%E5%88%B0RST%EF%BC%8C%E5%B0%B1%E4%B8%80%E5%AE%9A%E4%BC%9A%E6%96%AD%E5%BC%80TCP%E8%BF%9E%E6%8E%A5%E5%90%97%EF%BC%9F.html#加了窗口校验就不能用-rst-攻击了吗" aria-label="加了窗口校验就不能用 RST 攻击了吗"><!---->加了窗口校验就不能用 RST 攻击了吗<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E5%8A%A8%E5%9B%BE%E5%9B%BE%E8%A7%A3%EF%BC%81%E6%94%B6%E5%88%B0RST%EF%BC%8C%E5%B0%B1%E4%B8%80%E5%AE%9A%E4%BC%9A%E6%96%AD%E5%BC%80TCP%E8%BF%9E%E6%8E%A5%E5%90%97%EF%BC%9F.html#总结" aria-label="总结"><!---->总结<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E5%8A%A8%E5%9B%BE%E5%9B%BE%E8%A7%A3%EF%BC%81%E6%94%B6%E5%88%B0RST%EF%BC%8C%E5%B0%B1%E4%B8%80%E5%AE%9A%E4%BC%9A%E6%96%AD%E5%BC%80TCP%E8%BF%9E%E6%8E%A5%E5%90%97%EF%BC%9F.html#参考资料" aria-label="参考资料"><!---->参考资料<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E5%8A%A8%E5%9B%BE%E5%9B%BE%E8%A7%A3%EF%BC%81%E6%94%B6%E5%88%B0RST%EF%BC%8C%E5%B0%B1%E4%B8%80%E5%AE%9A%E4%BC%9A%E6%96%AD%E5%BC%80TCP%E8%BF%9E%E6%8E%A5%E5%90%97%EF%BC%9F.html#最后" aria-label="最后"><!---->最后<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E5%8A%A8%E5%9B%BE%E5%9B%BE%E8%A7%A3%EF%BC%81%E6%94%B6%E5%88%B0RST%EF%BC%8C%E5%B0%B1%E4%B8%80%E5%AE%9A%E4%BC%9A%E6%96%AD%E5%BC%80TCP%E8%BF%9E%E6%8E%A5%E5%90%97%EF%BC%9F.html#文章推荐" aria-label="文章推荐："><!---->文章推荐：<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E5%8A%A8%E5%9B%BE%E5%9B%BE%E8%A7%A3%EF%BC%81%E6%97%A2%E7%84%B6IP%E5%B1%82%E4%BC%9A%E5%88%86%E7%89%87%EF%BC%8C%E4%B8%BA%E4%BB%80%E4%B9%88TCP%E5%B1%82%E4%B9%9F%E8%BF%98%E8%A6%81%E5%88%86%E6%AE%B5%EF%BC%9F.html" aria-label="动图图解！既然IP层会分片，为什么TCP层也还要分段？"><!---->动图图解！既然IP层会分片，为什么TCP层也还要分段？<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E6%B2%A1%E6%9C%89accept%E8%83%BD%E5%BB%BA%E7%AB%8BTCP%E8%BF%9E%E6%8E%A5%E5%90%97.html" aria-label="动图图解！没有accept，能建立TCP连接吗？"><!---->动图图解！没有accept，能建立TCP连接吗？<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E5%8E%9F%E7%A5%9E%E7%9A%84%E6%B8%B8%E6%88%8F%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%9E%B6%E6%9E%84%E6%98%AF%E6%80%8E%E4%B9%88%E6%A0%B7%E7%9A%84.html" aria-label="原神的游戏服务器架构是怎么样的？"><!---->原神的游戏服务器架构是怎么样的？<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E6%97%A2%E7%84%B6%E6%9C%89HTTP%E5%8D%8F%E8%AE%AE%EF%BC%8C%E4%B8%BA%E4%BB%80%E4%B9%88%E8%BF%98%E8%A6%81%E6%9C%89RPC%E5%8D%8F%E8%AE%AE%EF%BC%9F.html" aria-label="既然有HTTP协议，为什么还要有RPC"><!---->既然有HTTP协议，为什么还要有RPC<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E6%B4%BB%E4%B9%85%E8%A7%81%EF%BC%81TCP%E4%B8%A4%E6%AC%A1%E6%8C%A5%E6%89%8B%EF%BC%8C%E4%BD%A0%E8%A7%81%E8%BF%87%E5%90%97%EF%BC%9F%E9%82%A3%E5%9B%9B%E6%AC%A1%E6%8F%A1%E6%89%8B%E5%91%A2%EF%BC%9F.html" aria-label="活久见！TCP两次挥手，你见过吗？那四次握手呢？"><!---->活久见！TCP两次挥手，你见过吗？那四次握手呢？<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E4%B8%8D%E6%98%AF%E6%88%91%E4%B8%8D%E5%9B%9E%E4%BD%A0%E6%B6%88%E6%81%AF%EF%BC%8C%E6%98%AF%E5%9B%A0%E4%B8%BA%E7%BD%91%E7%BB%9C%E4%BC%9A%E4%B8%A2%E5%8C%85.html" aria-label="用了TCP协议，就一定不会丢包吗？"><!---->用了TCP协议，就一定不会丢包吗？<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E7%A1%AC%E6%A0%B8%EF%BC%81%E6%BC%AB%E7%94%BB%E5%9B%BE%E8%A7%A3HTTP%E7%9F%A5%E8%AF%86%E7%82%B9_%E9%9D%A2%E8%AF%95%E9%A2%98.html" aria-label="硬核！漫画图解HTTP基础+面试题"><!---->硬核！漫画图解HTTP基础+面试题<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E7%A1%AC%E6%A0%B8%E5%9B%BE%E8%A7%A3%EF%BC%8130%E5%BC%A0%E5%9B%BE%E5%B8%A6%E4%BD%A0%E6%90%9E%E6%87%82%EF%BC%81%E8%B7%AF%E7%94%B1%E5%99%A8%EF%BC%8C%E9%9B%86%E7%BA%BF%E5%99%A8%EF%BC%8C%E4%BA%A4%E6%8D%A2%E6%9C%BA%EF%BC%8C%E7%BD%91%E6%A1%A5%EF%BC%8C%E5%85%89%E7%8C%AB%E6%9C%89%E5%95%A5%E5%8C%BA%E5%88%AB%EF%BC%9F.html" aria-label="硬核！阿里面试就是不一样！30张图带你搞懂路由器，集线器，交换机，网桥，光猫有啥区别？"><!---->硬核！阿里面试就是不一样！30张图带你搞懂路由器，集线器，交换机，网桥，光猫有啥区别？<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E7%A1%AC%E6%A0%B8%E5%9B%BE%E8%A7%A3%EF%BC%81%E6%96%AD%E7%BD%91%E4%BA%86%EF%BC%8C%E8%BF%98%E8%83%BDping%E9%80%9A%E5%9B%9E%E7%8E%AF%E5%9C%B0%E5%9D%80%E5%90%97%EF%BC%9F%E4%B8%BA%E4%BB%80%E4%B9%88.html" aria-label="硬核图解！断网了，还能ping通 127.0.0.1 吗？为什么？"><!---->硬核图解！断网了，还能ping通 127.0.0.1 吗？为什么？<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E8%83%BDping%E9%80%9A%EF%BC%8C%E5%B0%B1%E4%BB%A3%E8%A1%A8TCP%E4%B8%80%E5%AE%9A%E8%83%BD%E8%BF%9E%E9%80%9A%E5%90%97%EF%BC%9F.html" aria-label="能ping通，TCP就一定能连通吗？"><!---->能ping通，TCP就一定能连通吗？<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E8%BF%9E%E6%8E%A5%E4%B8%80%E4%B8%AAIP%E4%B8%8D%E5%AD%98%E5%9C%A8%E7%9A%84%E4%B8%BB%E6%9C%BA%E6%97%B6%EF%BC%8C%E6%8F%A1%E6%89%8B%E8%BF%87%E7%A8%8B%E6%98%AF%E6%80%8E%E6%A0%B7%E7%9A%84.html" aria-label="连接一个 IP 不存在的主机时，握手过程是怎样的？"><!---->连接一个 IP 不存在的主机时，握手过程是怎样的？<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul></section></li></ul></section></li></ul></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!--[--><!----><!--]--><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->动图图解！收到RST，就一定会断开TCP连接吗？</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://xiaobaidebug.top/" target="_blank" rel="noopener noreferrer">小白debug</a></span><span property="author" content="小白debug"></span></span><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2021-09-01T22:57:55.000Z"></span><!----><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 16 分钟</span><meta property="timeRequired" content="PT16M"></span><!----><!----></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">此页内容<button type="button" class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#什么是-rst">什么是 RST</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#怎么知道收到-rst-了">怎么知道收到 RST 了？</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#出现-rst-的场景有哪些">出现 RST 的场景有哪些</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="route-link toc-link level3" href="/#端口不可用">端口不可用</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level3" href="/#socket-提前关闭">socket 提前关闭</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#对方没收到-rst-会怎么样">对方没收到 RST，会怎么样？</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#收到-rst-就一定会断开连接吗">收到 RST 就一定会断开连接吗?</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="route-link toc-link level3" href="/#为什么要校验是否在窗口范围内">为什么要校验是否在窗口范围内</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level3" href="/#加了窗口校验就不能用-rst-攻击了吗">加了窗口校验就不能用 RST 攻击了吗</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#总结">总结</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#参考资料">参考资料</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#最后">最后</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#文章推荐">文章推荐：</a></li><!----><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!--[--><!----><!--]--><div class="theme-hope-content"><p>想必大家已经知道我的 niao 性，搞个标题，就是不喜欢立马回答。</p><p>就是要搞一大堆<strong>原理性</strong>的东西，再回答标题的问题。</p><p>说这个是因为我这次会把问题的答案就放到开头吗？</p><p>不！</p><p><strong>我就不！</strong></p><p>但是大家可以直接根据目录看自己感兴趣的部分。</p><p>之所以要先铺垫一些原理，还是希望大家能先看些基础的，再慢慢循序渐进，<strong>这样有利于建立知识体系</strong>。多一点上下文，少一点<code>gap</code>。</p><p>好了，进入正题。</p><p>下面是这篇文章的目录。</p><figure><img src="https://cdn.xiaobaidebug.top/image/收到RST就一定会断开连接吗1.png" alt="收到RST就一定会断开连接吗" tabindex="0" loading="lazy"><figcaption>收到RST就一定会断开连接吗</figcaption></figure><br><h2 id="什么是-rst" tabindex="-1"><a class="header-anchor" href="#什么是-rst"><span>什么是 RST</span></a></h2><p>我们都知道 TCP 正常情况下断开连接是用四次挥手，那是<strong>正常时候</strong>的优雅做法。</p><p>但<strong>异常情况</strong>下，收发双方都不一定正常，连挥手这件事本身都可能做不到，所以就需要一个机制去强行关闭连接。</p><p><strong>RST</strong> 就是用于这种情况，一般用来<strong>异常地</strong>关闭一个连接。它是一个 TCP 包头中的<strong>标志位</strong>。</p><p><strong>正常情况下</strong>，不管是<strong>发出</strong>，还是<strong>收到</strong>置了这个标志位的数据包，相应的内存、端口等连接资源都会被释放。从效果上来看就是 TCP 连接被关闭了。</p><p>而接收到 RST 的一方，一般会看到一个 <code>connection reset</code> 或 <code>connection refused</code> 的报错。</p><figure><img src="https://cdn.xiaobaidebug.top/image/tcp报头RST位.png" alt="TCP报头RST位" tabindex="0" loading="lazy"><figcaption>TCP报头RST位</figcaption></figure><br><h2 id="怎么知道收到-rst-了" tabindex="-1"><a class="header-anchor" href="#怎么知道收到-rst-了"><span>怎么知道收到 RST 了？</span></a></h2><p>我们知道<strong>内核</strong>跟<strong>应用层</strong>是分开的两层，网络通信功能在内核，我们的客户端或服务端属于应用层。应用层<strong>只能</strong>通过 <code>send/recv</code> 与内核交互，才能感知到内核是不是收到了<code>RST</code>。</p><p>当本端收到远端发来的<code>RST</code>后，<strong>内核</strong>已经认为此链接已经关闭。</p><p>此时如果本端<strong>应用层</strong>尝试去执行 <strong>读数据</strong>操作，比如<code>recv</code>，应用层就会收到 <strong>Connection reset by peer</strong> 的报错，意思是<strong>远端已经关闭连接</strong>。</p><figure><img src="https://cdn.xiaobaidebug.top/image/resetByPeer1.gif" alt="ResetByPeer" tabindex="0" loading="lazy"><figcaption>ResetByPeer</figcaption></figure><p>如果本端<strong>应用层</strong>尝试去执行<strong>写数据</strong>操作，比如<code>send</code>，那么应用层就会收到 <strong>Broken pipe</strong> 的报错，意思是发送通道已经坏了。</p><figure><img src="https://cdn.xiaobaidebug.top/image/brokenPipe1.gif" alt="BrokenPipe" tabindex="0" loading="lazy"><figcaption>BrokenPipe</figcaption></figure><p>这两个是开发过程中很经常遇到的报错，感觉大家可以<strong>把这篇文章放进收藏夹吃灰</strong>了，等遇到这个问题了，再打开来擦擦灰，说不定对你会有帮助。</p><br><h2 id="出现-rst-的场景有哪些" tabindex="-1"><a class="header-anchor" href="#出现-rst-的场景有哪些"><span>出现 RST 的场景有哪些</span></a></h2><p><strong>RST</strong>一般出现于异常情况，归类为 <strong>对端的端口不可用</strong> 和 <strong>socket 提前关闭</strong>。</p><br><h3 id="端口不可用" tabindex="-1"><a class="header-anchor" href="#端口不可用"><span>端口不可用</span></a></h3><p>端口不可用分为两种情况。要么是这个端口从来就没有&quot;可用&quot;过，比如根本就没监听**（listen）<strong>过；要么就是曾经&quot;可用&quot;，但现在&quot;不可用&quot;了，比如服务</strong>突然崩**了。</p><h4 id="端口未监听" tabindex="-1"><a class="header-anchor" href="#端口未监听"><span>端口未监听</span></a></h4><figure><img src="https://cdn.xiaobaidebug.top/image/TCP连接未监听的端口.png" alt="TCP连接未监听的端口" tabindex="0" loading="lazy"><figcaption>TCP连接未监听的端口</figcaption></figure><p>服务端<code>listen</code> 方法会创建一个<code>sock</code>放入到全局的<code>哈希表</code>中。</p><p>此时客户端发起一个<code>connect</code>请求到服务端。服务端在收到数据包之后，第一时间会根据 IP 和端口从哈希表里去获取<code>sock</code>。</p><figure><img src="https://cdn.xiaobaidebug.top/image/全局hash表.png" alt="全局hash表" tabindex="0" loading="lazy"><figcaption>全局hash表</figcaption></figure><p>如果服务端执行过<code>listen</code>，就能从<code>全局哈希表</code>里拿到<code>sock</code>。</p><p>但如果服务端没有执行过<code>listen</code>，那<code>哈希表</code>里也就不会有对应的<code>sock</code>，结果当然是拿不到。此时，<strong>正常情况下</strong>服务端会发<code>RST</code>给客户端。</p><br><h5 id="端口未监听就一定会发-rst-吗" tabindex="-1"><a class="header-anchor" href="#端口未监听就一定会发-rst-吗"><span>端口未监听就一定会发 RST 吗？</span></a></h5><p><strong>不一定</strong>。上面提到，发 RST 的前提是<strong>正常情况下</strong>，我们看下源码。</p><div class="language-c line-numbers-mode" data-ext="c" data-title="c"><pre class="language-c"><code><span class="token comment">// net/ipv4/tcp_ipv4.c</span>
<span class="token comment">// 代码经过删减</span>
<span class="token keyword">int</span> <span class="token function">tcp_v4_rcv</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">sk_buff</span> <span class="token operator">*</span>skb<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// 根据ip、端口等信息 获取sock。</span>
	sk <span class="token operator">=</span> <span class="token function">__inet_lookup_skb</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>tcp_hashinfo<span class="token punctuation">,</span> skb<span class="token punctuation">,</span> th<span class="token operator">-&gt;</span>source<span class="token punctuation">,</span> th<span class="token operator">-&gt;</span>dest<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>sk<span class="token punctuation">)</span>
		<span class="token keyword">goto</span> no_tcp_socket<span class="token punctuation">;</span>

no_tcp_socket<span class="token operator">:</span>
    <span class="token comment">// 检查数据包有没有出错</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>skb<span class="token operator">-&gt;</span>len <span class="token operator">&lt;</span> <span class="token punctuation">(</span>th<span class="token operator">-&gt;</span>doff <span class="token operator">&lt;&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">tcp_checksum_complete</span><span class="token punctuation">(</span>skb<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 错误记录</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// 发送RST</span>
		<span class="token function">tcp_v4_send_reset</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span> skb<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>内核在收到数据后会从物理层、数据链路层、网络层、传输层、应用层，一层一层往上传递。到传输层的时候，根据当前数据包的协议是<strong>TCP 还是 UDP</strong>走不一样的函数方法。可以简单认为，<strong>TCP</strong>数据包都会走到 <code>tcp_v4_rcv()</code>。 这个方法会从<code>全局哈希表</code>里获取 <code>sock</code>，如果此时服务端没有<code>listen()</code>过 , 那肯定获取不了<code>sock</code>，会跳转到<code>no_tcp_socket</code>的逻辑。</p><p>注意这里会先走一个 <code>tcp_checksum_complete()</code>，目的是看看数据包的**校验和(Checksum)**是否合法。</p><br><blockquote><p><strong>校验和</strong>可以验证数据从端到端的传输中是否出现异常。由发送端计算，然后由接收端验证。计算范围覆盖数据包里的 TCP 首部和 TCP 数据。</p></blockquote><br><p>如果在发送端到接收端传输过程中，数据发生<strong>任何改动</strong>，比如被第三方篡改，那么接收方能检测到校验和有差错，此时 TCP 段会被直接丢弃。如果校验和没问题，那才会发 RST。</p><p>所以，<strong>只有在数据包没问题的情况下，比如校验和没问题，才会发 RST 包给对端。</strong></p><br><h5 id="为什么数据包异常的情况下-不发-rst" tabindex="-1"><a class="header-anchor" href="#为什么数据包异常的情况下-不发-rst"><span>为什么数据包异常的情况下，不发 RST？</span></a></h5><p>一个数据包连校验都不能通过，那这个包，<strong>多半有问题</strong>。</p><figure><img src="https://cdn.xiaobaidebug.top/image/006cSBLKly1gl6b731molj306405q74a.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>有可能是在发送的过程中被篡改了，又或者，可能只是一个<strong>胡乱伪造</strong>的数据包。</p><p><strong>五层网络，不管是哪一层</strong>，只要遇到了这种数据，<strong>推荐的做法都是默默扔掉</strong>，<strong>而不是</strong>去回复一个消息告诉对方数据有问题。</p><p>如果对方用的是 TCP，是可靠传输协议，发现很久没有<code>ACK</code>响应，自己就会重传。</p><p>如果对方用的是 UDP，说明发送端已经接受了“不可靠会丢包”的事实，那丢了就丢了。</p><p>因此，数据包异常的情况下，默默扔掉，不发<code>RST</code>，非常合理。</p><br><figure><img src="https://cdn.xiaobaidebug.top/image/006i487Uly1fgqbcncf3gj30b40b43z0-20210908211826494.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>还是不能理解？那我<strong>再举个例子</strong>。</p><p>正常人喷你，他说话<strong>条理清晰，主谓宾分明</strong>。此时你喷回去，那你是个充满热情，正直，富有判断力的好人。</p><p>而此时一个憨憨也想喷你，但他<strong>思维混乱，连话都说不清楚，一直阿巴阿巴</strong>的，你虽然听不懂，但<strong>大受震撼</strong>，此时你会？</p><ul><li><p>A：跟他激情互喷</p></li><li><p>B：不跟他一般见识，就当没听过</p></li></ul><p>一般来说<strong>最优选择是 B</strong>，毕竟你理他，他反而来劲。</p><p>这下，应该就懂了。</p><figure><img src="https://cdn.xiaobaidebug.top/image/006m97Kgly1fxtp35bi77j315o15o4qp.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><br><h4 id="程序启动了但是崩了" tabindex="-1"><a class="header-anchor" href="#程序启动了但是崩了"><span>程序启动了但是崩了</span></a></h4><p>端口不可用的场景里，除了端口未监听以外，还有可能是从前监听了，但服务端机器上做监听操作的<strong>应用程序突然崩了</strong>，此时客户端还像往常一样正常发送消息，服务器内核协议栈收到消息后，则会<strong>回一个 RST</strong>。在开发过程中，<strong>这种情况是最常见的</strong>。</p><p>比如你的服务端应用程序里，弄了个<strong>空指针</strong>，或者<strong>数组越界</strong>啥的，程序立马就崩了。</p><figure><img src="https://cdn.xiaobaidebug.top/image/TCP监听了但崩了3.png" alt="TCP监听了但崩了" tabindex="0" loading="lazy"><figcaption>TCP监听了但崩了</figcaption></figure><p>这种情况跟<strong>端口未监听</strong>本质上类似，在服务端的应用程序<strong>崩溃后</strong>，原来监听的端口资源就被释放了，从效果上来看，类似于处于<code>CLOSED</code>状态。</p><p>此时服务端又收到了客户端发来的消息，内核协议栈会根据<strong>IP 端口</strong>，从全局哈希表里查找<code>sock</code>，结果当然是拿不到对应的<code>sock</code>数据，于是走了跟上面**&quot;端口未监听&quot;<strong>时一样的逻辑，回了个<code>RST</code>。客户端在收到 RST 后也</strong>释放了 sock 资源**，从效果上来看，就是<strong>连接断了</strong>。</p><h5 id="rst-和-502-的关系" tabindex="-1"><a class="header-anchor" href="#rst-和-502-的关系"><span>RST 和 502 的关系</span></a></h5><p>上面这张图，服务端程序崩溃后，如果客户端再有数据发送，会出现<code>RST</code>。但如果在客户端和服务端中间再加一个<code>nginx</code>，就像下图一样。</p><figure><img src="https://cdn.xiaobaidebug.top/image/RST与5021.png" alt="RST与502" tabindex="0" loading="lazy"><figcaption>RST与502</figcaption></figure><p><code>nginx</code>会作为客户端和服务端之间的&quot;中间人角色&quot;，负责<strong>转发</strong>请求和响应结果。但当服务端程序<strong>崩溃</strong>，比如出现<strong>野指针或者 OOM</strong>的问题，那转发到服务器的请求，必然得不到响应，后端服务端还会返回一个<code>RST</code>给<code>nginx</code>。<code>nginx</code>在收到这个<code>RST</code>后会断开与服务端的连接，同时返回客户端一个<code>502</code>错误码。</p><p>所以，出现 502 问题，一般情况下都是因为后端程序崩了，基于这一点假设，去看看监控是不是发生了 OOM 或者日志是否有空指针等报错信息。</p><br><h3 id="socket-提前关闭" tabindex="-1"><a class="header-anchor" href="#socket-提前关闭"><span>socket 提前关闭</span></a></h3><p>这种情况分为<strong>本端</strong>提前关闭，和<strong>远端</strong>提前关闭。</p><h4 id="本端提前关闭" tabindex="-1"><a class="header-anchor" href="#本端提前关闭"><span>本端提前关闭</span></a></h4><p>如果本端<code>socket</code>接收缓冲区<strong>还有数据未读</strong>，此时<strong>提前<code>close()</code> socket</strong>。那么本端会先把接收缓冲区的数据清空，然后给远端发一个 RST。</p><figure><img src="https://cdn.xiaobaidebug.top/image/recvbuf非空.gif" alt="recvbuf非空" tabindex="0" loading="lazy"><figcaption>recvbuf非空</figcaption></figure><br><h4 id="远端提前关闭" tabindex="-1"><a class="header-anchor" href="#远端提前关闭"><span>远端提前关闭</span></a></h4><p>远端已经<code>close()</code>了<code>socket</code>，此时本端还尝试发数据给远端。那么远端就会回一个 RST。</p><figure><img src="https://cdn.xiaobaidebug.top/image/close()触发TCP四次挥手5-20210828083457512.png" alt="close()触发TCP四次挥手" tabindex="0" loading="lazy"><figcaption>close()触发TCP四次挥手</figcaption></figure><p>大家知道，TCP 是<strong>全双工通信</strong>，意思是发送数据的同时，还可以接收数据。</p><p><code>Close()</code>的含义是，此时要同时<strong>关闭发送和接收</strong>消息的功能。</p><p>客户端执行<code>close()</code>， 正常情况下，会发出<strong>第一次</strong>挥手 FIN，然后服务端回<strong>第二次</strong>挥手 ACK。如果在<strong>第二次和第三次挥手之间</strong>，如果服务方还尝试传数据给客户端，那么客户端不仅不收这个消息，还会发一个 RST 消息到服务端。直接结束掉这次连接。</p><br><h2 id="对方没收到-rst-会怎么样" tabindex="-1"><a class="header-anchor" href="#对方没收到-rst-会怎么样"><span>对方没收到 RST，会怎么样？</span></a></h2><p>我们知道 TCP 是可靠传输，意味着本端发一个数据，远端在收到这个数据后就会回一个<code>ACK</code>，意思是&quot;我收到这个包了&quot;。</p><p><strong>而 RST，不需要 ACK 确认包</strong>。</p><p>因为<code>RST</code>本来就是设计来处理异常情况的，既然都已经在异常情况下了，还指望对方能正常回你一个<code>ACK</code>吗？<strong>可以幻想，不要妄想。</strong></p><p>但<strong>问题又来了</strong>，网络环境这么复杂，丢包也是分分钟的事情，既然 RST 包不需要 ACK 来确认，那万一对方就是没收到 RST，会怎么样？</p><figure><img src="https://cdn.xiaobaidebug.top/image/RST丢失3.png" alt="RST丢失" tabindex="0" loading="lazy"><figcaption>RST丢失</figcaption></figure><p>RST 丢了，问题不大。比方说上图服务端，发了 RST 之后，服务端就认为连接不可用了。</p><p>如果客户端之前<strong>发送了数据</strong>，一直没等到这个数据的确认 ACK，就会重发，重发的时候，自然就会触发一个新的 RST 包。</p><p>而如果客户端之前<strong>没有发数据</strong>，但服务端的 RST 丢了，TCP 有个 keepalive 机制，会定期发送探活包，这种数据包到了服务端，也会重新触发一个 RST。</p><figure><img src="https://cdn.xiaobaidebug.top/image/RST丢失后keepalive2.png" alt="RST丢失后keepalive" tabindex="0" loading="lazy"><figcaption>RST丢失后keepalive</figcaption></figure><br><h2 id="收到-rst-就一定会断开连接吗" tabindex="-1"><a class="header-anchor" href="#收到-rst-就一定会断开连接吗"><span>收到 RST 就一定会断开连接吗?</span></a></h2><p>先说结论，<strong>不一定会断开</strong>。我们看下源码。</p><div class="language-c line-numbers-mode" data-ext="c" data-title="c"><pre class="language-c"><code><span class="token comment">// net/ipv4/tcp_input.c</span>
<span class="token keyword">static</span> bool <span class="token function">tcp_validate_incoming</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// 获取sock</span>
	<span class="token keyword">struct</span> <span class="token class-name">tcp_sock</span> <span class="token operator">*</span>tp <span class="token operator">=</span> <span class="token function">tcp_sk</span><span class="token punctuation">(</span>sk<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// step 1：先判断seq是否合法（是否在合法接收窗口范围内）</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">tcp_sequence</span><span class="token punctuation">(</span>tp<span class="token punctuation">,</span> <span class="token function">TCP_SKB_CB</span><span class="token punctuation">(</span>skb<span class="token punctuation">)</span><span class="token operator">-&gt;</span>seq<span class="token punctuation">,</span> <span class="token function">TCP_SKB_CB</span><span class="token punctuation">(</span>skb<span class="token punctuation">)</span><span class="token operator">-&gt;</span>end_seq<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">goto</span> discard<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// step 2：执行收到 RST 后该干的事情</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>th<span class="token operator">-&gt;</span>rst<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">TCP_SKB_CB</span><span class="token punctuation">(</span>skb<span class="token punctuation">)</span><span class="token operator">-&gt;</span>seq <span class="token operator">==</span> tp<span class="token operator">-&gt;</span>rcv_nxt<span class="token punctuation">)</span>
			<span class="token function">tcp_reset</span><span class="token punctuation">(</span>sk<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">else</span>
			<span class="token function">tcp_send_challenge_ack</span><span class="token punctuation">(</span>sk<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">goto</span> discard<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>收到 RST 包，第一步会通过<code>tcp_sequence</code>先看下这个 seq 是否合法，其实主要是看下这个 seq 是否在合法<strong>接收窗口</strong>范围内。<strong>如果不在范围内，这个 RST 包就会被丢弃。</strong></p><p>至于接收窗口是个啥，我们先看下面这个图。</p><figure><img src="https://cdn.xiaobaidebug.top/image/接收窗口.png" alt="接收窗口" tabindex="0" loading="lazy"><figcaption>接收窗口</figcaption></figure><p>这里<strong>黄色的部分</strong>，就是指接收窗口，只要 RST 包的 seq 不在这个窗口范围内，那就会被丢弃。</p><br><h3 id="为什么要校验是否在窗口范围内" tabindex="-1"><a class="header-anchor" href="#为什么要校验是否在窗口范围内"><span>为什么要校验是否在窗口范围内</span></a></h3><p>正常情况下客户端服务端双方可以通过 RST 来断开连接。假设不做 seq 校验，如果这时候有不怀好意的第三方介入，构造了一个 RST 包，且在 TCP 和 IP 等报头都填上客户端的信息，发到服务端，那么服务端就会断开这个连接。同理也可以伪造服务端的包发给客户端。这就叫<strong>RST 攻击</strong>。</p><figure><img src="https://cdn.xiaobaidebug.top/image/RST攻击.png" alt="RST攻击" tabindex="0" loading="lazy"><figcaption>RST攻击</figcaption></figure><p>受到 RST 攻击时，从现象上看，客户端老感觉服务端崩了，这非常影响用户体验。</p><p>如果这是个游戏，我相信多崩几次，第二天大家就不来玩了。</p><p>实际消息发送过程中，接收窗口是不断移动的，seq 也是在飞快的变动中，此时第三方是<strong>比较难</strong>构造出合法 seq 的 RST 包的，那么通过这个 seq 校验，就可以拦下了很多不合法的消息。</p><br><h3 id="加了窗口校验就不能用-rst-攻击了吗" tabindex="-1"><a class="header-anchor" href="#加了窗口校验就不能用-rst-攻击了吗"><span>加了窗口校验就不能用 RST 攻击了吗</span></a></h3><p>**不是，只是增加了攻击的成本。**但如果想搞，还是可搞的。</p><p>以下是<strong>面向监狱编程</strong>的环节。</p><p>希望大家只<strong>了解原理</strong>就好了，<strong>不建议使用</strong>。</p><p>相信大家都不喜欢穿着蓝白条纹的衣服，拍<strong>纯狱风</strong>的照片。</p><p>从上面可以知道，不是每一个 RST 包都会导致连接重置的，要求是这个 RST 包的 seq 要在窗口范围内，所以，问题就变成了，<strong>我们怎么样才能构造出合法的 seq</strong>。</p><br><h4 id="盲猜-seq" tabindex="-1"><a class="header-anchor" href="#盲猜-seq"><span>盲猜 seq</span></a></h4><p>窗口数值 seq 本质上只是个 uint32 类型。</p><div class="language-c line-numbers-mode" data-ext="c" data-title="c"><pre class="language-c"><code><span class="token keyword">struct</span> <span class="token class-name">tcp_skb_cb</span> <span class="token punctuation">{</span>
	__u32		seq<span class="token punctuation">;</span>		<span class="token comment">/* Starting sequence number	*/</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果在这个范围内疯狂猜测 seq 数值，并构造对应的包，发到目的机器，虽然概率低，但是总是能被试出来，从而实现<strong>RST 攻击</strong>。这种乱棍打死老师傅的方式，就是所谓的<strong>合法窗口盲打（blind in-window attacks）</strong>。</p><p>觉得这种方式比较<strong>笨</strong>？那有没有聪明点的方式，还真有，但是在这之前需要先看下面的这个问题。</p><br><h4 id="已连接状态下收到第一次握手包会怎么样" tabindex="-1"><a class="header-anchor" href="#已连接状态下收到第一次握手包会怎么样"><span>已连接状态下收到第一次握手包会怎么样？</span></a></h4><p>我们需要了解一个问题，比如服务端在已连接（<code>ESTABLISHED</code>）状态下，如果收到客户端发来的第一次握手包（<code>SYN</code>），会怎么样？</p><p>以前我以为<strong>服务单会认为客户端憨憨了，直接 RST 连接。</strong></p><p><strong>但实际，并不是</strong>。</p><div class="language-c line-numbers-mode" data-ext="c" data-title="c"><pre class="language-c"><code><span class="token keyword">static</span> bool <span class="token function">tcp_validate_incoming</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">struct</span> <span class="token class-name">tcp_sock</span> <span class="token operator">*</span>tp <span class="token operator">=</span> <span class="token function">tcp_sk</span><span class="token punctuation">(</span>sk<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/* 判断seq是否在合法窗口内 */</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">tcp_sequence</span><span class="token punctuation">(</span>tp<span class="token punctuation">,</span> <span class="token function">TCP_SKB_CB</span><span class="token punctuation">(</span>skb<span class="token punctuation">)</span><span class="token operator">-&gt;</span>seq<span class="token punctuation">,</span> <span class="token function">TCP_SKB_CB</span><span class="token punctuation">(</span>skb<span class="token punctuation">)</span><span class="token operator">-&gt;</span>end_seq<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>th<span class="token operator">-&gt;</span>rst<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// 收到一个不在合法窗口内的SYN包</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>th<span class="token operator">-&gt;</span>syn<span class="token punctuation">)</span>
				<span class="token keyword">goto</span> syn_challenge<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token comment">/*
	 * RFC 5691 4.2 : 发送 challenge ack
	 */</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>th<span class="token operator">-&gt;</span>syn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
syn_challenge<span class="token operator">:</span>
		<span class="token function">tcp_send_challenge_ack</span><span class="token punctuation">(</span>sk<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>当客户端发出一个不在合法窗口内的 SYN 包的时候，服务端会发一个带有正确的 seq 数据 ACK 包出来，这个 ACK 包叫 <code>challenge ack</code>。</p><figure><img src="https://cdn.xiaobaidebug.top/image/image-20210901085509641.png" alt="challenge ack抓包" tabindex="0" loading="lazy"><figcaption>challenge ack抓包</figcaption></figure><p>上图是抓包的结果，用<code>scapy</code>随便伪造一个<code>seq=5</code>的包发到服务端（<code>端口9090</code>），服务端回复一个带有正确 seq 值的<code>challenge ack</code>包给客户端（<code>端口8888</code>）。</p><br><h4 id="利用-challenge-ack-获取-seq" tabindex="-1"><a class="header-anchor" href="#利用-challenge-ack-获取-seq"><span>利用 challenge ack 获取 seq</span></a></h4><p>上面提到的<strong>这个 challenge ack ，仿佛为盲猜 seq 的老哥们打开了一个新世界。</strong></p><p>在获得这个<code>challenge ack</code>后，攻击程序就可以以 ack 值为基础，在一定范围内设置 seq，这样造成 RST 攻击的几率就大大增加了。</p><figure><img src="https://cdn.xiaobaidebug.top/image/利用ChallengeACK的RST攻击.png" alt="利用ChallengeACK的RST攻击" tabindex="0" loading="lazy"><figcaption>利用ChallengeACK的RST攻击</figcaption></figure><br><h2 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span>总结</span></a></h2><ul><li>RST 其实是 TCP 包头里的一个标志位，目的是为了在<strong>异常情况</strong>下关闭连接。</li><li>内核收到 RST 后，应用层只能通过调用读/写操作来感知，此时会对应获得 <strong>Connection reset by peer</strong> 和<strong>Broken pipe</strong> 报错。</li><li>发出 RST 后不需要得到对方的 ACK 确认包，因此 RST 丢失后对方不能立刻感知，但是通过下一次<strong>重传</strong>数据或 keepalive<strong>心跳包</strong>可以导致 RST 重传。</li><li>**收到 RST 包，不一定会断开连接，seq 不在合法窗口范围内的数据包会被默默丢弃。**通过构造合法窗口范围内 seq，可以造成 RST 攻击，<strong>这一点大家了解就好，千万别学！</strong></li></ul><br><h2 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料"><span>参考资料</span></a></h2><p>TCP 旁路攻击分析与重现 - <a href="https://www.cxyzjd.com/article/qq_27446553/52416369" target="_blank" rel="noopener noreferrer">https://www.cxyzjd.com/article/qq_27446553/52416369<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><br><h2 id="最后" tabindex="-1"><a class="header-anchor" href="#最后"><span>最后</span></a></h2><p>最近想用<code>vscode</code>写小说了，故事梗概都想好了。</p><blockquote><p>十年前，他是大厂最年轻 CTO，闭眼刷 leetcode，敲代码 0 error ，0 warning， 却被诬陷删库跑路，锒铛入狱，众叛亲离……十年后，他重新归来！却看到自己的女儿在仇人公司里修 bug！</p><p>&quot;我要你付出代价！&quot;</p><p>一声令下，十万 <code>p7，p8</code> 应声前来.......</p></blockquote><p><strong>爽否？</strong></p><br><p><strong>如果文章对你有帮助，欢迎.....</strong></p><p>算了。</p><p>兄弟们都是自家人，点不<strong>点赞</strong>，在不<strong>在看</strong>什么的，没关系的，大家看开心了就好。</p><p><strong>在看，点赞</strong>什么的，我不是特别在意，真的，真的，别不信啊。</p><p>不三连也真的没关系的。</p><p>兄弟们不要在意啊。</p><p>我是<strong>虚伪</strong>的小白，我们下期见！</p><br><h5 id="别说了-一起在知识的海洋里呛水吧" tabindex="-1"><a class="header-anchor" href="#别说了-一起在知识的海洋里呛水吧"><span>别说了，一起在知识的海洋里呛水吧</span></a></h5><p>关注公众号:【小白 debug】</p><br><p>不满足于在留言区说骚话？</p><p>加我，我们建了个划水吹牛皮群，在群里，你可以跟你下次跳槽可能遇到的同事或面试官聊点阳间的话题。就<strong>超！开！心！</strong></p><img src="https://cdn.xiaobaidebug.top/image-20220522162616202.png" width="50%" align="center"><h2 id="文章推荐" tabindex="-1"><a class="header-anchor" href="#文章推荐"><span>文章推荐：</span></a></h2><ul><li><a href="https://www.xiaobaidebug.top/2022/07/19/%E5%9B%BE%E8%A7%A3%E7%BD%91%E7%BB%9C/%E6%97%A2%E7%84%B6%E6%9C%89HTTP%E5%8D%8F%E8%AE%AE%EF%BC%8C%E4%B8%BA%E4%BB%80%E4%B9%88%E8%BF%98%E8%A6%81%E6%9C%89RPC%E5%8D%8F%E8%AE%AE%EF%BC%9F/" target="_blank" rel="noopener noreferrer">既然有 HTTP 协议，为什么还要有 RPC<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.xiaobaidebug.top/2021/03/26/%E5%9B%BE%E8%A7%A3%E7%BD%91%E7%BB%9C/TCP%E7%B2%98%E5%8C%85%EF%BC%81%E6%95%B0%E6%8D%AE%E5%8C%85%EF%BC%9A%E6%88%91%E5%8F%AA%E6%98%AF%E7%8A%AF%E4%BA%86%E6%AF%8F%E4%B8%AA%E6%95%B0%E6%8D%AE%E5%8C%85%E9%83%BD%E4%BC%9A%E7%8A%AF%E7%9A%84%E9%94%99%EF%BC%8C%E7%A1%AC%E6%A0%B8%E5%9B%BE%E8%A7%A3/" target="_blank" rel="noopener noreferrer">TCP 粘包 数据包：我只是犯了每个数据包都会犯的错 |硬核图解<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.xiaobaidebug.top/2021/05/25/%E5%9B%BE%E8%A7%A3%E7%BD%91%E7%BB%9C/%E5%8A%A8%E5%9B%BE%E5%9B%BE%E8%A7%A3%EF%BC%81%E6%97%A2%E7%84%B6IP%E5%B1%82%E4%BC%9A%E5%88%86%E7%89%87%EF%BC%8C%E4%B8%BA%E4%BB%80%E4%B9%88TCP%E5%B1%82%E4%B9%9F%E8%BF%98%E8%A6%81%E5%88%86%E6%AE%B5%EF%BC%9F/" target="_blank" rel="noopener noreferrer">动图图解！既然 IP 层会分片，为什么 TCP 层也还要分段？<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul></div><!--[--><!----><!--]--><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/xiaobaiTech/golang-full-stack/edit/main/src/计算机基础/网络基础/核心知识点/动图图解！收到RST，就一定会断开TCP连接吗？.md" rel="noopener noreferrer" target="_blank" aria-label="在 GitHub 上编辑此页" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->在 GitHub 上编辑此页<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><div class="update-time"><span class="label">上次编辑于: </span><!----></div><div class="contributors"><span class="label">贡献者: </span><!--[--><!--[--><span class="contributor" title="email: xiaobaidebug@gmail.com">xiaobai</span>,<!--]--><!--[--><span class="contributor" title="email: 948485496@qq.com">xiaobai-tech</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link nav-link prev" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E5%8A%A8%E5%9B%BE%E5%9B%BE%E8%A7%A3%EF%BC%81%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8Csend%E6%88%90%E5%8A%9F%E5%90%8E%EF%BC%8C%E6%95%B0%E6%8D%AE%E5%B0%B1%E5%8F%91%E5%87%BA%E5%8E%BB%E4%BA%86%E5%90%97%EF%BC%9F.html" aria-label="动图图解！代码执行send成功后，数据就发出去了吗？"><div class="hint"><span class="arrow start"></span>上一页</div><div class="link"><!---->动图图解！代码执行send成功后，数据就发出去了吗？</div></a><a class="route-link nav-link next" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/%E5%8A%A8%E5%9B%BE%E5%9B%BE%E8%A7%A3%EF%BC%81%E6%97%A2%E7%84%B6IP%E5%B1%82%E4%BC%9A%E5%88%86%E7%89%87%EF%BC%8C%E4%B8%BA%E4%BB%80%E4%B9%88TCP%E5%B1%82%E4%B9%9F%E8%BF%98%E8%A6%81%E5%88%86%E6%AE%B5%EF%BC%9F.html" aria-label="动图图解！既然IP层会分片，为什么TCP层也还要分段？"><div class="hint">下一页<span class="arrow end"></span></div><div class="link">动图图解！既然IP层会分片，为什么TCP层也还要分段？<!----></div></a></nav><div id="comment" class="giscus-wrapper input-top" style="display:block;"><div class="loading-icon-wrapper" style="display:flex;align-items:center;justify-content:center;height:96px"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><!--[--><!----><!--]--><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer">关注公众号「小白debug」,回复「面试」获面试题集pdf</div><div class="vp-copyright">Copyright © 2024 小白debug </div></footer></div><!--]--><!--[--><!--[--><!--]--><!----><!--[--><div class="global-right-sidebar"><div class="sidebar-item"><i class="fas fa-moon"></i><span>夜间</span></div><div class="sidebar-item"><i class="fab fa-weixin"></i><span>技术群</span></div><a class="sidebar-item" href="/训练营/介绍.html"><i class="fas fa-graduation-cap"></i><span>训练营</span></a><div class="sidebar-item"><i class="fas fa-cloud-download-alt"></i><span>资料</span></div><a class="sidebar-item" href="https://space.bilibili.com/302188068" target="_blank"><i class="fab fa-youtube"></i><span>看视频</span></a></div><!----><!--]--><!--]--><!--]--></div>
    <script type="module" src="/assets/app-CioO9xJQ.js" defer></script>
  </body>
</html>
