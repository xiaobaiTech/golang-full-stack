import{_ as a,c as s,a as i,b as t,d as o,e as n,o as r,r as c}from"./app-Dkl-ToTD.js";const d={},g={href:"https://mp.weixin.qq.com/s/qm-8pvHBVRmLQQ4_DHc1Tw",target:"_blank",rel:"noopener noreferrer"},p={href:"https://mp.weixin.qq.com/s/ixJu0wrGXsCcGzveCqnr6A",target:"_blank",rel:"noopener noreferrer"},m={href:"https://golangguide.top/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html",target:"_blank",rel:"noopener noreferrer"},E={href:"https://golangguide.top/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/1.Go%E5%85%A5%E9%97%A8.html",target:"_blank",rel:"noopener noreferrer"},f={href:"https://golangguide.top/golang/%E5%B8%B8%E7%94%A8%E5%8C%85%E5%A4%A7%E5%85%A8.html",target:"_blank",rel:"noopener noreferrer"},u={href:"https://golangguide.top/golang/%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF.html",target:"_blank",rel:"noopener noreferrer"};function A(B,e){const l=c("ExternalLinkIcon");return r(),s("div",null,[e[31]||(e[31]=i('<figure><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS8yNDFlZTVhYy1kMGY1LTQzZDEtYTU5ZC0yMzExODgzNzMzNDkucG5n?x-oss-process=image/format,png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h1 id="问题" tabindex="-1"><a class="header-anchor" href="#问题"><span>问题</span></a></h1><p><code>for</code>循环<code>select</code>时，如果通道已经关闭会怎么样？如果<code>select</code>中的<code>case</code>只有一个，又会怎么样？</p><h1 id="怎么答" tabindex="-1"><a class="header-anchor" href="#怎么答"><span>怎么答</span></a></h1><ul><li>for 循环<code>select</code>时，如果其中一个 case 通道已经关闭，则每次都会执行到这个 case。</li><li>如果 select 里边只有一个 case，而这个 case 被关闭了，则会出现死循环。</li></ul><h1 id="解释" tabindex="-1"><a class="header-anchor" href="#解释"><span>解释</span></a></h1><h2 id="_1-for-循环里被关闭的通道" tabindex="-1"><a class="header-anchor" href="#_1-for-循环里被关闭的通道"><span>1.for 循环里被关闭的通道</span></a></h2><figure><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS9jNmU5MzM4MS03YTk3LTRmMDgtODljOS1lODkwNDg1YmE2YmUucG5n?x-oss-process=image/format,png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS84OWMxMWU0OS0zYThiLTQxYTAtYmE3MC1mZmQwZWRkOTExMTcucG5n?x-oss-process=image/format,png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ul><li><code>c通道</code>是一个缓冲为<code>0</code>的通道，在<code>main</code>开始时，启动一个协程对<code>c通道</code>写入<code>10</code>，然后就关闭掉这个通道。</li><li>在<code>main</code>中通过 <code>x, ok := &lt;-c</code> 接受<code>通道c</code>里的值，从输出结果里看出，确实从通道里读出了之前塞入通道的<code>10</code>，但是在通道关闭后，这个通道一直能读出内容。</li></ul><h2 id="_2-怎么样才能不读关闭后通道" tabindex="-1"><a class="header-anchor" href="#_2-怎么样才能不读关闭后通道"><span>2.怎么样才能不读关闭后通道</span></a></h2><figure><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS9lNDlmNDE4Mi03MGQyLTQxYjAtODRjYy05M2VkMzMxYjc3YjUucG5n?x-oss-process=image/format,png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>',12)),t("ul",null,[t("li",null,[e[1]||(e[1]=t("code",null,"x, ok := <-c",-1)),e[2]||(e[2]=o(" 返回的值里第一个 x 是通道内的值，")),e[3]||(e[3]=t("code",null,"ok",-1)),e[4]||(e[4]=o("是指通道是否关闭，当通道被关闭后，")),e[5]||(e[5]=t("code",null,"ok",-1)),e[6]||(e[6]=o("则返回")),e[7]||(e[7]=t("code",null,"false",-1)),e[8]||(e[8]=o("，因此可以根据这个进行操作。读一个已经关闭的通道为什么会出现 false，可以看我之前的 ")),t("a",g,[e[0]||(e[0]=o("对已经关闭的的 chan 进行读写，会怎么样？为什么？")),n(l)]),e[9]||(e[9]=o(" 。"))]),t("li",null,[e[11]||(e[11]=o("当返回的")),e[12]||(e[12]=t("code",null,"ok",-1)),e[13]||(e[13]=o("为")),e[14]||(e[14]=t("code",null,"false",-1)),e[15]||(e[15]=o("时，执行")),e[16]||(e[16]=t("code",null,"c = nil",-1)),e[17]||(e[17]=o(" 将通道置为")),e[18]||(e[18]=t("code",null,"nil",-1)),e[19]||(e[19]=o("，相当于读一个未初始化的通道，则会一直阻塞。至于为什么读一个未初始化的通道会出现阻塞，可以看我的另一篇 ")),t("a",p,[e[10]||(e[10]=o("对未初始化的的 chan 进行读写，会怎么样？为什么？")),n(l)]),e[20]||(e[20]=o(" 。")),e[21]||(e[21]=t("code",null,"select",-1)),e[22]||(e[22]=o("中如果任意某个通道有值可读时，它就会被执行，其他被忽略。则")),e[23]||(e[23]=t("code",null,"select",-1)),e[24]||(e[24]=o("会跳过这个阻塞")),e[25]||(e[25]=t("code",null,"case",-1)),e[26]||(e[26]=o("，可以解决不断读已关闭通道的问题。"))])]),e[32]||(e[32]=i('<h2 id="_3-如果-select-里只有一个已经关闭的-case-会怎么样" tabindex="-1"><a class="header-anchor" href="#_3-如果-select-里只有一个已经关闭的-case-会怎么样"><span>3.如果 select 里只有一个已经关闭的 case，会怎么样？</span></a></h2><figure><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS82ZGMxZDQ1Zi04MDk1LTQ1ODAtODUxNi04MWZmNDdkNTI4MGEucG5n?x-oss-process=image/format,png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ul><li>可以看出只有一个<code>case</code>的情况下，则会<code>死循环</code>。</li><li>那如果像上面一个<code>case</code>那样，把通道置为<code>nil</code>就能解决问题了吗？</li></ul><h2 id="_4-select-里只有一个已经关闭的-case-置为-nil-会怎么样" tabindex="-1"><a class="header-anchor" href="#_4-select-里只有一个已经关闭的-case-置为-nil-会怎么样"><span>4.select 里只有一个已经关闭的 case，置为 nil，会怎么样？</span></a></h2><figure><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS9hZTAyNWU4NS0yNzZjLTQyMDItYWU2Ny0yMGQ4Njk1Y2I3MTQucG5n?x-oss-process=image/format,png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ul><li>第一次读取<code>case</code>能读到通道里的<code>10</code></li><li>第二次读取<code>case</code>能读到通道已经关闭的信息。此时将通道置为<code>nil</code></li><li>第三次读取<code>case</code>时 main 协程会被阻塞，此时整个进程没有其他活动的协程了，进程<code>deadlock</code></li></ul><h1 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span>总结</span></a></h1><ul><li><code>select</code>中如果任意某个通道有值可读时，它就会被执行，其他被忽略。</li><li>如果没有<code>default</code>字句，<code>select</code>将有可能阻塞，直到某个通道有值可以运行，所以<code>select</code>里最好有一个<code>default</code>，否则将有一直阻塞的风险。</li></ul><h1 id="参考文章" tabindex="-1"><a class="header-anchor" href="#参考文章"><span>参考文章：</span></a></h1>',9)),t("ul",null,[t("li",null,[t("p",null,[t("a",m,[e[27]||(e[27]=o("golang进阶面试题八股文合集")),n(l)])])]),t("li",null,[t("p",null,[t("a",E,[e[28]||(e[28]=o("golang基础面试题八股文合集")),n(l)])])]),t("li",null,[t("p",null,[t("a",f,[e[29]||(e[29]=o("golang常用标准库第三方库大全")),n(l)])])]),t("li",null,[t("p",null,[t("a",u,[e[30]||(e[30]=o("golang学习路线")),n(l)])])])])])}const y=a(d,[["render",A],["__file","for select时，如果通道已经关闭会怎么样？如果只有一个case呢？.html.vue"]]),M=JSON.parse('{"path":"/golang/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/for%20select%E6%97%B6%EF%BC%8C%E5%A6%82%E6%9E%9C%E9%80%9A%E9%81%93%E5%B7%B2%E7%BB%8F%E5%85%B3%E9%97%AD%E4%BC%9A%E6%80%8E%E4%B9%88%E6%A0%B7%EF%BC%9F%E5%A6%82%E6%9E%9C%E5%8F%AA%E6%9C%89%E4%B8%80%E4%B8%AAcase%E5%91%A2%EF%BC%9F.html","title":"golang面试官：for select时，如果通道已经关闭会怎么样？如果select中只有一个case呢？","lang":"zh-CN","frontmatter":{"title":"golang面试官：for select时，如果通道已经关闭会怎么样？如果select中只有一个case呢？","date":"2020-08-11T22:57:55.000Z","tags":null,"categories":"golang面试题","description":" 问题 for循环select时，如果通道已经关闭会怎么样？如果select中的case只有一个，又会怎么样？ 怎么答 for 循环select时，如果其中一个 case 通道已经关闭，则每次都会执行到这个 case。 如果 select 里边只有一个 case，而这个 case 被关闭了，则会出现死循环。 解释 1.for 循环里被关闭的通道 c通道...","head":[["meta",{"property":"og:url","content":"https://golangguide.top/golang/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/for%20select%E6%97%B6%EF%BC%8C%E5%A6%82%E6%9E%9C%E9%80%9A%E9%81%93%E5%B7%B2%E7%BB%8F%E5%85%B3%E9%97%AD%E4%BC%9A%E6%80%8E%E4%B9%88%E6%A0%B7%EF%BC%9F%E5%A6%82%E6%9E%9C%E5%8F%AA%E6%9C%89%E4%B8%80%E4%B8%AAcase%E5%91%A2%EF%BC%9F.html"}],["meta",{"property":"og:site_name","content":"golang全栈指南"}],["meta",{"property":"og:title","content":"golang面试官：for select时，如果通道已经关闭会怎么样？如果select中只有一个case呢？"}],["meta",{"property":"og:description","content":" 问题 for循环select时，如果通道已经关闭会怎么样？如果select中的case只有一个，又会怎么样？ 怎么答 for 循环select时，如果其中一个 case 通道已经关闭，则每次都会执行到这个 case。 如果 select 里边只有一个 case，而这个 case 被关闭了，则会出现死循环。 解释 1.for 循环里被关闭的通道 c通道..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS8yNDFlZTVhYy1kMGY1LTQzZDEtYTU5ZC0yMzExODgzNzMzNDkucG5n?x-oss-process=image/format,png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-02-28T01:37:12.000Z"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:alt","content":"golang面试官：for select时，如果通道已经关闭会怎么样？如果select中只有一个case呢？"}],["meta",{"property":"article:author","content":"小白debug"}],["meta",{"property":"article:published_time","content":"2020-08-11T22:57:55.000Z"}],["meta",{"property":"article:modified_time","content":"2024-02-28T01:37:12.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"golang面试官：for select时，如果通道已经关闭会怎么样？如果select中只有一个case呢？\\",\\"image\\":[\\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS8yNDFlZTVhYy1kMGY1LTQzZDEtYTU5ZC0yMzExODgzNzMzNDkucG5n?x-oss-process=image/format,png\\",\\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS9jNmU5MzM4MS03YTk3LTRmMDgtODljOS1lODkwNDg1YmE2YmUucG5n?x-oss-process=image/format,png\\",\\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS84OWMxMWU0OS0zYThiLTQxYTAtYmE3MC1mZmQwZWRkOTExMTcucG5n?x-oss-process=image/format,png\\",\\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS9lNDlmNDE4Mi03MGQyLTQxYjAtODRjYy05M2VkMzMxYjc3YjUucG5n?x-oss-process=image/format,png\\",\\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS82ZGMxZDQ1Zi04MDk1LTQ1ODAtODUxNi04MWZmNDdkNTI4MGEucG5n?x-oss-process=image/format,png\\",\\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS9hZTAyNWU4NS0yNzZjLTQyMDItYWU2Ny0yMGQ4Njk1Y2I3MTQucG5n?x-oss-process=image/format,png\\"],\\"datePublished\\":\\"2020-08-11T22:57:55.000Z\\",\\"dateModified\\":\\"2024-02-28T01:37:12.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"小白debug\\",\\"url\\":\\"https://xiaobaidebug.top/\\"}]}"],["link",{"rel":"canonical","href":"https://golangguide.top/golang/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/for%20select%E6%97%B6%EF%BC%8C%E5%A6%82%E6%9E%9C%E9%80%9A%E9%81%93%E5%B7%B2%E7%BB%8F%E5%85%B3%E9%97%AD%E4%BC%9A%E6%80%8E%E4%B9%88%E6%A0%B7%EF%BC%9F%E5%A6%82%E6%9E%9C%E5%8F%AA%E6%9C%89%E4%B8%80%E4%B8%AAcase%E5%91%A2%EF%BC%9F.html"}],["meta",{"property":"og:url","content":"https://golangguide.top/golang/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/for%20select%E6%97%B6%EF%BC%8C%E5%A6%82%E6%9E%9C%E9%80%9A%E9%81%93%E5%B7%B2%E7%BB%8F%E5%85%B3%E9%97%AD%E4%BC%9A%E6%80%8E%E4%B9%88%E6%A0%B7%EF%BC%9F%E5%A6%82%E6%9E%9C%E5%8F%AA%E6%9C%89%E4%B8%80%E4%B8%AAcase%E5%91%A2%EF%BC%9F.html"}],["meta",{"property":"og:site_name","content":"golang全栈指南"}],["meta",{"property":"og:title","content":"golang面试官：for select时，如果通道已经关闭会怎么样？如果select中只有一个case呢？"}],["meta",{"property":"og:description","content":" 问题 for循环select时，如果通道已经关闭会怎么样？如果select中的case只有一个，又会怎么样？ 怎么答 for 循环select时，如果其中一个 case 通道已经关闭，则每次都会执行到这个 case。 如果 select 里边只有一个 case，而这个 case 被关闭了，则会出现死循环。 解释 1.for 循环里被关闭的通道 c通道..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-02-28T01:37:12.000Z"}],["meta",{"property":"article:published_time","content":"2020-08-11T22:57:55.000Z"}],["meta",{"property":"article:modified_time","content":"2024-02-28T01:37:12.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"golang面试官：for select时，如果通道已经关闭会怎么样？如果select中只有一个case呢？\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2020-08-11T22:57:55.000Z\\",\\"dateModified\\":\\"2024-02-28T01:37:12.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"1.for 循环里被关闭的通道","slug":"_1-for-循环里被关闭的通道","link":"#_1-for-循环里被关闭的通道","children":[]},{"level":2,"title":"2.怎么样才能不读关闭后通道","slug":"_2-怎么样才能不读关闭后通道","link":"#_2-怎么样才能不读关闭后通道","children":[]},{"level":2,"title":"3.如果 select 里只有一个已经关闭的 case，会怎么样？","slug":"_3-如果-select-里只有一个已经关闭的-case-会怎么样","link":"#_3-如果-select-里只有一个已经关闭的-case-会怎么样","children":[]},{"level":2,"title":"4.select 里只有一个已经关闭的 case，置为 nil，会怎么样？","slug":"_4-select-里只有一个已经关闭的-case-置为-nil-会怎么样","link":"#_4-select-里只有一个已经关闭的-case-置为-nil-会怎么样","children":[]}],"git":{"createdTime":1708315540000,"updatedTime":1709084232000,"contributors":[{"name":"xiaobai","email":"xiaobaidebug@gmail.com","commits":2}]},"readingTime":{"minutes":2.91,"words":874},"filePathRelative":"golang/核心知识点/for select时，如果通道已经关闭会怎么样？如果只有一个case呢？.md","localizedDate":"2020年8月11日","autoDesc":true}');export{y as comp,M as data};
