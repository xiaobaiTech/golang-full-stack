<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.7" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.23" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://golangguide.top/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html"><meta property="og:site_name" content="golang全栈指南"><meta property="og:title" content="Go 进阶面试题汇总"><meta property="og:description" content="Go 进阶面试题汇总 golang面试官：for select时，如果通道已经关闭会怎么样？如果只有一个case呢？ 答案 golang面试题：对已经关闭的的chan进行读写，会怎么样？为什么？ 答案 golang面试题：对未初始化的的chan进行读写，会怎么样？为什么？ 答案 golang面试题：能说说uintptr和unsafe.Pointer的区..."><meta property="og:type" content="article"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/xiaobaiTech/image/2.jpg"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-05-25T23:49:28.000Z"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:alt" content="Go 进阶面试题汇总"><meta property="article:author" content="小白debug"><meta property="article:modified_time" content="2024-05-25T23:49:28.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Go 进阶面试题汇总","image":["https://cdn.jsdelivr.net/gh/xiaobaiTech/image/2.jpg","https://cdn.xiaobaidebug.top/1716678070907.png","https://cdn.xiaobaidebug.top/1716678090472.png","https://cdn.xiaobaidebug.top/1716680501221.png","https://cdn.xiaobaidebug.top/1716680514734.png","https://golangguide.top/assets/image/docs/Aspose.Words.51b43265-f45e-4206-a945-0b7c10078cb5.017.jpeg","https://golangguide.top/assets/image/docs/Aspose.Words.51b43265-f45e-4206-a945-0b7c10078cb5.018.png","https://golangguide.top/assets/image/docs/Aspose.Words.51b43265-f45e-4206-a945-0b7c10078cb5.019.jpeg","https://golangguide.top/assets/image/docs/Aspose.Words.51b43265-f45e-4206-a945-0b7c10078cb5.020.jpeg"],"dateModified":"2024-05-25T23:49:28.000Z","author":[{"@type":"Person","name":"小白debug","url":"https://xiaobaidebug.top/"}]}</script><link rel="canonical" href="https://golangguide.top/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Go 进阶面试题汇总","image":[""],"dateModified":"2024-05-25T23:49:28.000Z","author":[]}</script><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap"><meta name="keywords" content="Golang基础, Golang源码, 数据库原理, MySQL, ElasticSearch, 微服务架构, Kafka消息队列, Nginx服务器, Redis缓存, RocketMQ, Kubernetes, Docker容器化, k8s集群管理, CI/CD持续集成, Linux操作系统, DevOps文化, 分布式系统, 中间件技术, 开发工具集, Git版本控制, IDE集成开发环境, 源码阅读技巧, 读书笔记分享, 开源项目资源"><meta name="description" content="深入探索Golang全栈开发的世界，本网站提供了从基础到高级的全面学习资源，涵盖数据库、微服务、Kubernetes、Docker等关键技术，以及源码分析、开发工具和读书笔记等实用资料，旨在帮助开发者构建扎实的技术基础，掌握现代软件架构的核心原理。"><meta name="author" content="https://www.xiaobaidebug.top/"><meta name="og:image" content="https://golangguide.top/new_logo.png"><meta property="og:image" content="https://golangguide.top/new_logo.png"><meta name="og:image:secure_url" content="https://golangguide.top/new_logo.png"><meta name="og:url" content="https://golangguide.top/"><meta property="og:title" content="欢迎来到 golangguide - 你需要的关于 golang 全栈后端开发的所有信息，包括但不限于mysql, redis, elasticsearch，微服务，kafka等信息"><meta name="og:description" content="golangguide Docs bring you all information you need about our protocol, APIs, SDKs, ZK Stack, and hyperchains. Start with our guides and tutorials, or go deep into our architecture and protocol specification."><meta name="twitter:title" content="Welcome to our Docs - All information you need about golangguide and ZK Stack"><meta name="twitter:description" content="golangguide Docs bring you all information you need about our protocol, APIs, SDKs, ZK Stack, and hyperchains. Start with our guides and tutorials, or go deep into our architecture and protocol specification."><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="manifest" href="/site.webmanifest"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#1E69FF"><link rel="shortcut icon" href="/favicon.ico"><meta name="msapplication-TileColor" content="#1E69FF"><meta name="msapplication-config" content="/browserconfig.xml"><meta name="theme-color" content="#1755F4"><script>
      window.addEventListener('load', function() {
        let contributors = document.querySelectorAll('.contributor');
        let contributorArr = Array.from(contributors);
        let topFive = contributorArr.slice(0, 5);
      
        topFive.forEach(function(contributor) {
          contributor.textContent = contributor.textContent.replace(',', '');
        });
      
        let lastComma = contributorArr[4];
        lastComma.textContent = lastComma.textContent.replace(',', '');
      
        let updatedList = topFive.map(function(contributor) {
          return contributor.textContent;
        }).join(', ');
          
        let contributorsDiv = document.querySelector('.contributors');
        contributorsDiv.innerHTML = '<span class="label">Contributors: </span>' + updatedList;
      
      });

      </script><title>Go 进阶面试题汇总 | golang全栈指南</title>
    <link rel="preload" href="/assets/style-pUUM4cAF.css" as="style"><link rel="stylesheet" href="/assets/style-pUUM4cAF.css">
    <link rel="modulepreload" href="/assets/app-BLI1Dd-8.js"><link rel="modulepreload" href="/assets/2.Go进阶.html-DxHcZnnG.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/assets/index.html-CgtTERYO.js" as="script"><link rel="prefetch" href="/assets/学习路线.html-D88qd8AI.js" as="script"><link rel="prefetch" href="/assets/常用包大全.html-mInKyw1v.js" as="script"><link rel="prefetch" href="/assets/目录.html-0_1YBO2R.js" as="script"><link rel="prefetch" href="/assets/介绍.html-DT5Y1a39.js" as="script"><link rel="prefetch" href="/assets/入营须知.html-DBvH_P6f.js" as="script"><link rel="prefetch" href="/assets/for select时，如果通道已经关闭会怎么样？如果只有一个case呢？.html-CydwONlA.js" as="script"><link rel="prefetch" href="/assets/golang 面试题：reflect（反射包）如何获取字段 tag？为什么 json 包不能导出私有变量的 tag？.html-CFExeW12.js" as="script"><link rel="prefetch" href="/assets/golang并发题目测试.html-B6OBrvxR.js" as="script"><link rel="prefetch" href="/assets/golang面试题：json包变量不加tag会怎么样？.html-B5B7GpNG.js" as="script"><link rel="prefetch" href="/assets/golang面试题：字符串转成byte数组，会发生内存拷贝吗？.html-D7BcW_yA.js" as="script"><link rel="prefetch" href="/assets/golang面试题：对已经关闭的的chan进行读写，会怎么样？为什么？.html-CsuQqUOz.js" as="script"><link rel="prefetch" href="/assets/golang面试题：对未初始化的的chan进行读写，会怎么样？为什么？.html-CPUOS5it.js" as="script"><link rel="prefetch" href="/assets/golang面试题：怎么避免内存逃逸？.html-DxfTaAMb.js" as="script"><link rel="prefetch" href="/assets/golang面试题：拷贝大切片一定比小切片代价大吗？.html-D9m4IGPS.js" as="script"><link rel="prefetch" href="/assets/golang面试题：简单聊聊内存逃逸？.html-Ca3mMWbZ.js" as="script"><link rel="prefetch" href="/assets/golang面试题：翻转含有中文、数字、英文字母的字符串.html-Bv3Il2pV.js" as="script"><link rel="prefetch" href="/assets/golang高性能无GC的缓存库bigcache是怎么实现的.html-CWKjqfoI.js" as="script"><link rel="prefetch" href="/assets/io_timeout，希望你不要踩到这个http包的坑.html-CXDUOboA.js" as="script"><link rel="prefetch" href="/assets/为sync.WaitGroup中Wait函数支持WaitTimeout功能.html-DdObGQxB.js" as="script"><link rel="prefetch" href="/assets/交替打印数字和字母.html-PsfRYnji.js" as="script"><link rel="prefetch" href="/assets/写出以下逻辑，要求每秒钟调用一次proc并保证程序不退出.html-BXX-3riC.js" as="script"><link rel="prefetch" href="/assets/判断两个给定的字符串排序后是否一致.html-U6axPI7w.js" as="script"><link rel="prefetch" href="/assets/判断字符串中字符是否全都不同.html-C8wm9X-T.js" as="script"><link rel="prefetch" href="/assets/动图图解！怎么让goroutine跑一半就退出？.html-CFCaV6fc.js" as="script"><link rel="prefetch" href="/assets/动图图解，GMP里为什么要有P.html-Cr_Q9vMs.js" as="script"><link rel="prefetch" href="/assets/多协程查询切片问题.html-Bp0FfqoA.js" as="script"><link rel="prefetch" href="/assets/如何调用一个只支持batch_call的服务？.html-DeXuilJi.js" as="script"><link rel="prefetch" href="/assets/字符串替换问题.html-C1WQpITf.js" as="script"><link rel="prefetch" href="/assets/实现阻塞读的并发安全Map.html-BjG3o-PF.js" as="script"><link rel="prefetch" href="/assets/常见语法题目一.html-Df3NoQ7r.js" as="script"><link rel="prefetch" href="/assets/常见语法题目二.html--ItdEW7c.js" as="script"><link rel="prefetch" href="/assets/昨天那个在for循环里append元素的同事，今天还在么？.html-DiohI1QP.js" as="script"><link rel="prefetch" href="/assets/机器人坐标问题.html-B0lj4_oL.js" as="script"><link rel="prefetch" href="/assets/给大家丢脸了，用了三年golang，我还是没答对这道内存泄漏题.html-osMQr8ko.js" as="script"><link rel="prefetch" href="/assets/翻转字符串.html-ClY61UVe.js" as="script"><link rel="prefetch" href="/assets/能说说uintptr和unsafe.Pointer的区别吗.html-BmVOIgmZ.js" as="script"><link rel="prefetch" href="/assets/让golang协程和channel配合实现一个功能.html-CsF7kslB.js" as="script"><link rel="prefetch" href="/assets/语法找错题.html-CMuxldkc.js" as="script"><link rel="prefetch" href="/assets/连nil切片和空切片一不一样都不清楚？那BAT面试官只好让你回去等通知了。.html-iEgQBzTh.js" as="script"><link rel="prefetch" href="/assets/高并发下的锁与map读写问题.html-BsGxom9S.js" as="script"><link rel="prefetch" href="/assets/1.Go入门.html-Cyh4NPdl.js" as="script"><link rel="prefetch" href="/assets/面试题.html-C-ixTPOf.js" as="script"><link rel="prefetch" href="/assets/面试题.html-D4teakJ2.js" as="script"><link rel="prefetch" href="/assets/面试题.html-Dbcsf66j.js" as="script"><link rel="prefetch" href="/assets/面试题.html-B3iQEX3x.js" as="script"><link rel="prefetch" href="/assets/面试题.html-BkLwUAD4.js" as="script"><link rel="prefetch" href="/assets/面试题.html-CQlSG-R2.js" as="script"><link rel="prefetch" href="/assets/面试题.html-Cga8tShf.js" as="script"><link rel="prefetch" href="/assets/面试题.html-Bi90fT8K.js" as="script"><link rel="prefetch" href="/assets/面试题.html-BtAnXQNc.js" as="script"><link rel="prefetch" href="/assets/面试题.html-jIYHDLhJ.js" as="script"><link rel="prefetch" href="/assets/面试题.html-ooxjbhmi.js" as="script"><link rel="prefetch" href="/assets/面试题.html-l2h727ZR.js" as="script"><link rel="prefetch" href="/assets/面试题.html-CU-e01sa.js" as="script"><link rel="prefetch" href="/assets/面试题.html-MbTrrlpK.js" as="script"><link rel="prefetch" href="/assets/面试题.html-7n3VhIp6.js" as="script"><link rel="prefetch" href="/assets/1. Python 的起源与发展.html-CSRrbcAC.js" as="script"><link rel="prefetch" href="/assets/10. Python 标准库概览.html-E3YgAoGR.js" as="script"><link rel="prefetch" href="/assets/11. 字符串操作与正则表达式.html-B89olfuY.js" as="script"><link rel="prefetch" href="/assets/12. 列表、元组、字典与集合.html-B18WzKzW.js" as="script"><link rel="prefetch" href="/assets/13. 时间与日期处理.html-C5LtoaTV.js" as="script"><link rel="prefetch" href="/assets/14. 常用内建函数.html-V19h7q7O.js" as="script"><link rel="prefetch" href="/assets/15. 生成器与迭代器.html-GHh4lmJM.js" as="script"><link rel="prefetch" href="/assets/2. 安装与环境配置.html-DW_vPQe6.js" as="script"><link rel="prefetch" href="/assets/3. 变量、数据类型与运算符.html-aMJK5RAc.js" as="script"><link rel="prefetch" href="/assets/4. 控制流程：条件与循环.html-CZVYKeUL.js" as="script"><link rel="prefetch" href="/assets/5. 函数与模块.html-r_UbG_Yf.js" as="script"><link rel="prefetch" href="/assets/6. 输入与输出.html-aWokpq97.js" as="script"><link rel="prefetch" href="/assets/7. 异常处理.html-C2kF-TBR.js" as="script"><link rel="prefetch" href="/assets/8. 面向对象编程基础.html-MExZ-o_H.js" as="script"><link rel="prefetch" href="/assets/9. 文件操作与管理.html-vfPA8WVV.js" as="script"><link rel="prefetch" href="/assets/16. 线程与多线程编程.html-ClhCEX57.js" as="script"><link rel="prefetch" href="/assets/17. 进程与多进程编程.html-CjiFUxt2.js" as="script"><link rel="prefetch" href="/assets/18. 异步编程与协程.html-DOYwIA9u.js" as="script"><link rel="prefetch" href="/assets/19. 并发编程中的常见问题与解决方案.html-BLgiGS9i.js" as="script"><link rel="prefetch" href="/assets/20. 线程安全与锁机制.html-BZPLywNu.js" as="script"><link rel="prefetch" href="/assets/21. 进程间通信与共享资源.html-uS56VRCq.js" as="script"><link rel="prefetch" href="/assets/22. 异步编程框架比较.html-DtaCbyfY.js" as="script"><link rel="prefetch" href="/assets/23. GIL 与 Python 多线程.html-BhttVG7k.js" as="script"><link rel="prefetch" href="/assets/24. 多进程与多线程的选择.html-Cs0ITDtI.js" as="script"><link rel="prefetch" href="/assets/25. asyncio 库与异步 IO 模型.html-OIRIB1aa.js" as="script"><link rel="prefetch" href="/assets/26. 多进程池与线程池.html-BE01Jh57.js" as="script"><link rel="prefetch" href="/assets/27. 并行与并发的区别.html-uVhJueSd.js" as="script"><link rel="prefetch" href="/assets/28. 异步编程中的回调地狱问题.html-8d2Q-WMv.js" as="script"><link rel="prefetch" href="/assets/29. 高并发与高性能的设计原则.html-CzdXwOlz.js" as="script"><link rel="prefetch" href="/assets/30. 分布式计算与任务调度.html-C9NiWjEG.js" as="script"><link rel="prefetch" href="/assets/31. 迭代器与生成器.html-kl2L5Gvj.js" as="script"><link rel="prefetch" href="/assets/32. 装饰器与闭包.html-DxGf-pkL.js" as="script"><link rel="prefetch" href="/assets/33. 元类与类装饰器.html-DFQ94uZm.js" as="script"><link rel="prefetch" href="/assets/34. 设计模式与最佳实践.html-Cj1M_yen.js" as="script"><link rel="prefetch" href="/assets/35. 函数式编程风格.html-DyTKPffh.js" as="script"><link rel="prefetch" href="/assets/36. Python 代码优化与性能提升.html-IgtOsrrD.js" as="script"><link rel="prefetch" href="/assets/37. 高级函数与 Lambda 表达式.html-Cm0ZWFKS.js" as="script"><link rel="prefetch" href="/assets/38. 魔术方法与元编程.html-BJYF4F45.js" as="script"><link rel="prefetch" href="/assets/39. 动态类型与静态类型语言对比.html-D3B8phXh.js" as="script"><link rel="prefetch" href="/assets/40. 高级模块与扩展.html-B-zIs-_T.js" as="script"><link rel="prefetch" href="/assets/41. 编码规范与文档.html-DgvFfPUv.js" as="script"><link rel="prefetch" href="/assets/42. 版本控制与 Git.html-BdJ0iuYE.js" as="script"><link rel="prefetch" href="/assets/43. 虚拟环境与依赖管理.html-BUkm0pZb.js" as="script"><link rel="prefetch" href="/assets/44. IDE 与编辑器推荐.html-VKW1yoAm.js" as="script"><link rel="prefetch" href="/assets/45. 调试工具与技巧.html-BWdzY-Fg.js" as="script"><link rel="prefetch" href="/assets/46. 单元测试与集成测试.html-D2HY1qF_.js" as="script"><link rel="prefetch" href="/assets/47. 静态代码分析与 Lint 工具.html-KZ-KVFLR.js" as="script"><link rel="prefetch" href="/assets/48. 代码重构与优化工具.html-DLXb_UQa.js" as="script"><link rel="prefetch" href="/assets/49. CI-CD 与持续集成.html-CdkIaWTW.js" as="script"><link rel="prefetch" href="/assets/50. 文档生成与自动化部署.html-D_WHQM-n.js" as="script"><link rel="prefetch" href="/assets/51. 常见算法概述.html-BbQuLVIY.js" as="script"><link rel="prefetch" href="/assets/52. 排序与搜索算法.html-BM8TeZ_T.js" as="script"><link rel="prefetch" href="/assets/53. 数据结构与算法设计.html-nk41NbE_.js" as="script"><link rel="prefetch" href="/assets/54. 动态规划与贪心算法.html-CQvg8sRz.js" as="script"><link rel="prefetch" href="/assets/55. 图论与网络流算法.html-Dn_jVZUS.js" as="script"><link rel="prefetch" href="/assets/56. 字符串匹配与处理算法.html-D4p-Tdoi.js" as="script"><link rel="prefetch" href="/assets/57. 数论与组合数学.html-CJ3-Hvjx.js" as="script"><link rel="prefetch" href="/assets/58. 复杂度分析与算法评估.html-CMmy1_sN.js" as="script"><link rel="prefetch" href="/assets/59. 算法实现与优化技巧.html-dXPipWDv.js" as="script"><link rel="prefetch" href="/assets/60. 常用数据结构实现.html-C1rmb12Q.js" as="script"><link rel="prefetch" href="/assets/61. 数据获取与清洗.html-DyNFYZ8w.js" as="script"><link rel="prefetch" href="/assets/62. 数据处理与分析.html-BBP62Qdi.js" as="script"><link rel="prefetch" href="/assets/63. 数据可视化.html-uhb0OIY2.js" as="script"><link rel="prefetch" href="/assets/64. 机器学习入门.html-DfAHzpGd.js" as="script"><link rel="prefetch" href="/assets/65. 数据挖掘与预测建模.html-QnzWDZ7P.js" as="script"><link rel="prefetch" href="/assets/66. 数据库与数据仓库.html-Cql9HcZ3.js" as="script"><link rel="prefetch" href="/assets/67. 大数据与分布式计算.html-DoYwYeOd.js" as="script"><link rel="prefetch" href="/assets/68. 自然语言处理基础.html-BZfkH3y9.js" as="script"><link rel="prefetch" href="/assets/69. 图像处理与计算机视觉.html-BJv1xu3z.js" as="script"><link rel="prefetch" href="/assets/70. 时间序列分析与预测.html-CRYRT_oA.js" as="script"><link rel="prefetch" href="/assets/71. Linux 基础与常用命令.html-BFjNzIz4.js" as="script"><link rel="prefetch" href="/assets/72. 网络基础与常用协议.html-CjOiGGdJ.js" as="script"><link rel="prefetch" href="/assets/73. Web 服务器与部署.html-BfO5UJ0U.js" as="script"><link rel="prefetch" href="/assets/74. 数据库基础与管理.html-Dl5DqBHF.js" as="script"><link rel="prefetch" href="/assets/75. 容器化与 Docker.html-ChggDx5F.js" as="script"><link rel="prefetch" href="/assets/76. 自动化运维与配置管理.html-BjW0Cj1-.js" as="script"><link rel="prefetch" href="/assets/77. 负载均衡与高可用性.html-DlBd5wYv.js" as="script"><link rel="prefetch" href="/assets/78. 日志与监控系统.html-DW--lINX.js" as="script"><link rel="prefetch" href="/assets/79. 安全与漏洞管理.html-B2nhswmJ.js" as="script"><link rel="prefetch" href="/assets/80. 云计算与云服务.html-Dh5lgI-1.js" as="script"><link rel="prefetch" href="/assets/81. NumPy 与 SciPy.html-Saq0SWCu.js" as="script"><link rel="prefetch" href="/assets/82. Pandas.html-B3pAprH3.js" as="script"><link rel="prefetch" href="/assets/83. Matplotlib 与 Seaborn.html-yfE4_bnB.js" as="script"><link rel="prefetch" href="/assets/84. Requests 与 Beautiful Soup.html-BZAZ4Kxw.js" as="script"><link rel="prefetch" href="/assets/85. Django 与 Flask.html-B3Ac2h_t.js" as="script"><link rel="prefetch" href="/assets/86. SQLAlchemy 与 ORM.html-wJNcTOAK.js" as="script"><link rel="prefetch" href="/assets/87. Celery 与任务队列.html-Dwbfz9eb.js" as="script"><link rel="prefetch" href="/assets/88. TensorFlow 与机器学习库.html-B12g5fM4.js" as="script"><link rel="prefetch" href="/assets/89. PyQT 与 GUI 开发.html-ZuaP6QZG.js" as="script"><link rel="prefetch" href="/assets/90. GIS 与地理信息处理.html-B1_qabpo.js" as="script"><link rel="prefetch" href="/assets/100.  项目总结与回顾.html-BXEhV1vV.js" as="script"><link rel="prefetch" href="/assets/91. 项目介绍与需求分析.html-CqCjA7XT.js" as="script"><link rel="prefetch" href="/assets/92. 项目架构与设计.html-qslmE9I1.js" as="script"><link rel="prefetch" href="/assets/93. 代码实现与测试.html-CpcP9WaQ.js" as="script"><link rel="prefetch" href="/assets/94. 项目部署与维护.html-DDj-3P2Z.js" as="script"><link rel="prefetch" href="/assets/95. 用户反馈与迭代优化.html-BywzQ0ZR.js" as="script"><link rel="prefetch" href="/assets/96. 项目文档与知识分享.html-BS5WQSAI.js" as="script"><link rel="prefetch" href="/assets/97. 团队协作与版本控制.html-DMP1Vmr0.js" as="script"><link rel="prefetch" href="/assets/98. 项目上线与发布.html-DI4cjWZ-.js" as="script"><link rel="prefetch" href="/assets/99. 故障处理与紧急修复.html-lxkU2jLF.js" as="script"><link rel="prefetch" href="/assets/elasticSearch架构是怎么样的.html-BCkwVYjC.js" as="script"><link rel="prefetch" href="/assets/kafka是什么？架构是怎么样的？.html-R8UGkzrn.js" as="script"><link rel="prefetch" href="/assets/Mysql并发写数据，怎么保证唯一性？.html-skjYXaEs.js" as="script"><link rel="prefetch" href="/assets/Mysql数据库查询好慢，除了索引，还能因为什么？.html-6x6LJTOQ.js" as="script"><link rel="prefetch" href="/assets/Mysql的索引为什么使用B_树而不使用跳表？.html-DZ_p7f-e.js" as="script"><link rel="prefetch" href="/assets/mysql主库更新后，从库读到最新值了，主库还有可能读到旧值吗？.html-GwpgfB3_.js" as="script"><link rel="prefetch" href="/assets/mysql查询 limit 1000_10 和limit 10 速度一样快吗？.html-CU8hG1Zs.js" as="script"><link rel="prefetch" href="/assets/mysql的varchar字段最大长度真的是65535吗？.html-7SqNzSgh.js" as="script"><link rel="prefetch" href="/assets/为什么mysql写数据会丢失数据？.html-DdZJa5kc.js" as="script"><link rel="prefetch" href="/assets/为什么mysql插入不存在的数据会产生死锁？.html-CRQgI7au.js" as="script"><link rel="prefetch" href="/assets/为什么mysql的count()方法这么慢？.html-BCQgQA9y.js" as="script"><link rel="prefetch" href="/assets/为什么大家说mysql数据库单表最大两千万？.html-joLWlcvr.js" as="script"><link rel="prefetch" href="/assets/分库分表带来的读扩散问题，怎么解决？.html-C6WnTvf6.js" as="script"><link rel="prefetch" href="/assets/数据库主键一定要自增的吗？不自增行不行？有哪些场景下不建议自增？.html-B9wMoKpG.js" as="script"><link rel="prefetch" href="/assets/都是select语句，为什么读到的内容不一样？.html-CWImw06r.js" as="script"><link rel="prefetch" href="/assets/RocketMQ是什么.html-B7dcVFyt.js" as="script"><link rel="prefetch" href="/assets/docker和传统虚拟机有什么区别.html-IwO_yQKA.js" as="script"><link rel="prefetch" href="/assets/docker是什么docker和kubernetes(k8s)之间是什么关系有什么区别.html-D-Jg3Tom.js" as="script"><link rel="prefetch" href="/assets/k8s到底是什么.html-CsviLSmP.js" as="script"><link rel="prefetch" href="/assets/QPS的计算是怎么实现的.html-BOldYIvl.js" as="script"><link rel="prefetch" href="/assets/docker和传统虚拟机有什么区别.html-DLO2NqHE.js" as="script"><link rel="prefetch" href="/assets/k8s到底是什么.html-Ctkh7QEm.js" as="script"><link rel="prefetch" href="/assets/服务发现有哪些要素.html-Bzgqctt1.js" as="script"><link rel="prefetch" href="/assets/服务熔断和服务降级是指什么.html-ux400sL-.js" as="script"><link rel="prefetch" href="/assets/给32位系统装8g内存条能用吗？为什么？.html-hnWja4-V.js" as="script"><link rel="prefetch" href="/assets/TCP四次挥手中如果服务端没收到第四次挥手请求，服务端会一直等待吗？.html-D-mMvV2N.js" as="script"><link rel="prefetch" href="/assets/TCP粘包！数据包：我只是犯了每个数据包都会犯的错，硬核图解.html-CDqgz1s5.js" as="script"><link rel="prefetch" href="/assets/UDP就一定比TCP快吗.html-DVD2xJGj.js" as="script"><link rel="prefetch" href="/assets/socket到底是什么？.html-BRBLgXJy.js" as="script"><link rel="prefetch" href="/assets/不是我不回你消息，是因为网络会丢包.html-BLEWwJg5.js" as="script"><link rel="prefetch" href="/assets/为什么我们的IP都是192.168开头的？.html-BOJSifVG.js" as="script"><link rel="prefetch" href="/assets/为什么我在公司里访问不了家里的电脑？.html-uoOXYXJN.js" as="script"><link rel="prefetch" href="/assets/为什么有HTTP协议，还要有websocket协议.html-DsipYgwD.js" as="script"><link rel="prefetch" href="/assets/动图图解！代码执行send成功后，数据就发出去了吗？.html-CGfkSDAF.js" as="script"><link rel="prefetch" href="/assets/动图图解！收到RST，就一定会断开TCP连接吗？.html-D8zvxXpl.js" as="script"><link rel="prefetch" href="/assets/动图图解！既然IP层会分片，为什么TCP层也还要分段？.html-BAIY6JcU.js" as="script"><link rel="prefetch" href="/assets/原神的游戏服务器架构是怎么样的.html-DqfRmADf.js" as="script"><link rel="prefetch" href="/assets/既然有HTTP协议，为什么还要有RPC协议？.html-BfKYbGsR.js" as="script"><link rel="prefetch" href="/assets/没有accept能建立TCP连接吗.html-C_ws1xom.js" as="script"><link rel="prefetch" href="/assets/活久见！TCP两次挥手，你见过吗？那四次握手呢？.html-IArf1Y6G.js" as="script"><link rel="prefetch" href="/assets/硬核图解！30张图带你搞懂！路由器，集线器，交换机，网桥，光猫有啥区别？.html-BMdb3oya.js" as="script"><link rel="prefetch" href="/assets/硬核图解！断网了，还能ping通回环地址吗？为什么.html-Dcqb0eFO.js" as="script"><link rel="prefetch" href="/assets/硬核！漫画图解HTTP知识点_面试题.html-rKFnhiQ1.js" as="script"><link rel="prefetch" href="/assets/能ping通，就代表TCP一定能连通吗？.html-ApxXTN5P.js" as="script"><link rel="prefetch" href="/assets/连接一个IP不存在的主机时，握手过程是怎样的.html-DF7tYUow.js" as="script"><link rel="prefetch" href="/assets/404.html-BgReJl3C.js" as="script"><link rel="prefetch" href="/assets/index.html-CdB0Ybsr.js" as="script"><link rel="prefetch" href="/assets/index.html-B4cYzN6s.js" as="script"><link rel="prefetch" href="/assets/index.html-NbYR_gGI.js" as="script"><link rel="prefetch" href="/assets/index.html-Dd9ZtPC9.js" as="script"><link rel="prefetch" href="/assets/index.html-B6mcT5Yh.js" as="script"><link rel="prefetch" href="/assets/index.html-C_kyV3zt.js" as="script"><link rel="prefetch" href="/assets/index.html-DnqnNlUR.js" as="script"><link rel="prefetch" href="/assets/index.html-Cs7-s0rO.js" as="script"><link rel="prefetch" href="/assets/index.html-CHdLyBk1.js" as="script"><link rel="prefetch" href="/assets/index.html-C3qLpELf.js" as="script"><link rel="prefetch" href="/assets/index.html-B9q7WRPn.js" as="script"><link rel="prefetch" href="/assets/index.html-B3M-ptBu.js" as="script"><link rel="prefetch" href="/assets/index.html-Bn2EkF_T.js" as="script"><link rel="prefetch" href="/assets/index.html-CEW7hink.js" as="script"><link rel="prefetch" href="/assets/index.html-Cs7H3YHl.js" as="script"><link rel="prefetch" href="/assets/index.html-BxnVpu6e.js" as="script"><link rel="prefetch" href="/assets/index.html-Cg5ZVDOM.js" as="script"><link rel="prefetch" href="/assets/index.html-Ds0dbjKY.js" as="script"><link rel="prefetch" href="/assets/index.html-Diu_51ia.js" as="script"><link rel="prefetch" href="/assets/index.html-Eh7NCd7-.js" as="script"><link rel="prefetch" href="/assets/index.html-Dj9eqIJr.js" as="script"><link rel="prefetch" href="/assets/index.html-DpAOxTfb.js" as="script"><link rel="prefetch" href="/assets/index.html-Bn3ursSC.js" as="script"><link rel="prefetch" href="/assets/index.html-COvMrDUS.js" as="script"><link rel="prefetch" href="/assets/index.html-U0_Lw6za.js" as="script"><link rel="prefetch" href="/assets/index.html-DZsvUZIR.js" as="script"><link rel="prefetch" href="/assets/index.html-DHdHpqps.js" as="script"><link rel="prefetch" href="/assets/index.html-DQOPxR0D.js" as="script"><link rel="prefetch" href="/assets/index.html-DHxI9ut6.js" as="script"><link rel="prefetch" href="/assets/index.html-b8KdPLdg.js" as="script"><link rel="prefetch" href="/assets/index.html-DH2NC3j_.js" as="script"><link rel="prefetch" href="/assets/index.html-Z2DEaxx4.js" as="script"><link rel="prefetch" href="/assets/index.html-DEy7eK2m.js" as="script"><link rel="prefetch" href="/assets/index.html-DibBLWL3.js" as="script"><link rel="prefetch" href="/assets/index.html--AsJ4x7V.js" as="script"><link rel="prefetch" href="/assets/index.html-BpV_taqU.js" as="script"><link rel="prefetch" href="/assets/index.html-CvXewOBV.js" as="script"><link rel="prefetch" href="/assets/index.html-Cp2jV24U.js" as="script"><link rel="prefetch" href="/assets/index.html-2trblpaf.js" as="script"><link rel="prefetch" href="/assets/index.html-Vr2raEKV.js" as="script"><link rel="prefetch" href="/assets/index.html-B7Ph10Vj.js" as="script"><link rel="prefetch" href="/assets/index.html-vlZ5-QgR.js" as="script"><link rel="prefetch" href="/assets/giscus-7BMGhbDA.js" as="script"><link rel="prefetch" href="/assets/auto-C0MMSKEI.js" as="script"><link rel="prefetch" href="/assets/index-DA4axBLK.js" as="script"><link rel="prefetch" href="/assets/flowchart-966sEcGG.js" as="script"><link rel="prefetch" href="/assets/mermaid.core-BqQOOpRy.js" as="script"><link rel="prefetch" href="/assets/reveal.esm-9nNZbZvi.js" as="script"><link rel="prefetch" href="/assets/markdown.esm-BG2Xu2Hd.js" as="script"><link rel="prefetch" href="/assets/vue-repl-BvT8e5Wu.js" as="script"><link rel="prefetch" href="/assets/codemirror-editor--hjQTqga.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-SzV8tJDW.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo" src="/new_logo.png" alt><!----><span class="vp-site-name hide-in-pad">golang全栈指南</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><a class="route-link nav-link" href="/" aria-label="主页"><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span>主页<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="训练营"><span class="title"><span class="font-icon icon fa-fw fa-sm fas fa-campground" style=""></span>训练营</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="route-link nav-link" href="/%E8%AE%AD%E7%BB%83%E8%90%A5/%E4%BB%8B%E7%BB%8D.html" aria-label="介绍"><span class="font-icon icon fa-fw fa-sm fas fa-address-card" style=""></span>介绍<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E8%AE%AD%E7%BB%83%E8%90%A5/%E5%85%A5%E8%90%A5%E9%A1%BB%E7%9F%A5.html" aria-label="入营须知"><span class="font-icon icon fa-fw fa-sm fas fa-brain" style=""></span>入营须知<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="计算机基础"><span class="title"><span class="font-icon icon fa-fw fa-sm fas fa-computer" style=""></span>计算机基础</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="route-link nav-link" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" aria-label="操作系统"><span class="font-icon icon fa-fw fa-sm fas fa-server" style=""></span>操作系统<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/" aria-label="网络基础"><span class="font-icon icon fa-fw fa-sm fas fa-wifi" style=""></span>网络基础<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="架构"><span class="title"><span class="font-icon icon fa-fw fa-sm fas fa-folder-tree" style=""></span>架构</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="route-link nav-link" href="/%E6%9E%B6%E6%9E%84/%E4%BA%91%E5%8E%9F%E7%94%9F/" aria-label="云原生"><span class="font-icon icon fa-fw fa-sm fas fa-box" style=""></span>云原生<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E6%9E%B6%E6%9E%84/%E5%88%86%E5%B8%83%E5%BC%8F/" aria-label="分布式"><span class="font-icon icon fa-fw fa-sm fas fa-manat-sign" style=""></span>分布式<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E6%9E%B6%E6%9E%84/%E5%BE%AE%E6%9C%8D%E5%8A%A1/" aria-label="微服务"><span class="font-icon icon fa-fw fa-sm fas fa-microchip" style=""></span>微服务<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E6%9E%B6%E6%9E%84/%E8%BF%90%E7%BB%B4/" aria-label="运维"><span class="font-icon icon fa-fw fa-sm fas fa-folder-open" style=""></span>运维<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="中间件"><span class="title"><span class="font-icon icon fa-fw fa-sm fas fa-align-center" style=""></span>中间件</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="route-link nav-link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/es/" aria-label="ES"><span class="font-icon icon fa-fw fa-sm fas fa-magnifying-glass" style=""></span>ES<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/kafka/" aria-label="Kafka"><span class="font-icon icon fa-fw fa-sm fas fa-chess-queen" style=""></span>Kafka<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/Memcached/" aria-label="Memcached"><span class="font-icon icon fa-fw fa-sm fas fa-suitcase" style=""></span>Memcached<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/ClickHouse/" aria-label="ClickHouse"><span class="font-icon icon fa-fw fa-sm fas fa-house-laptop" style=""></span>ClickHouse<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/mongodb/" aria-label="Mongodb"><span class="font-icon icon fa-fw fa-sm fas fa-vr-cardboard" style=""></span>Mongodb<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/mysql/" aria-label="Mysql"><span class="font-icon icon fa-fw fa-sm fas fa-database" style=""></span>Mysql<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/nginx/" aria-label="Nginx"><span class="font-icon icon fa-fw fa-sm fas fa-network-wired" style=""></span>Nginx<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/rabbitmq/" aria-label="RabbitMQ"><span class="font-icon icon fa-fw fa-sm fas fa-frog" style=""></span>RabbitMQ<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/redis/" aria-label="Redis"><span class="font-icon icon fa-fw fa-sm fas fa-registered" style=""></span>Redis<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/rocketmq/" aria-label="RocketMQ"><span class="font-icon icon fa-fw fa-sm fas fa-rocket" style=""></span>RocketMQ<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="Golang"><span class="title"><span class="font-icon icon fa-fw fa-sm fas fa-lightbulb" style=""></span>Golang</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="route-link nav-link" href="/golang/%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF.html" aria-label="学习路线"><span class="font-icon icon fa-fw fa-sm fas fa-map-location-dot" style=""></span>学习路线<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/golang/%E5%B8%B8%E7%94%A8%E5%8C%85%E5%A4%A7%E5%85%A8.html" aria-label="常用包大全"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span>常用包大全<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/golang/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/" aria-label="核心知识点"><span class="font-icon icon fa-fw fa-sm fas fa-house-laptop" style=""></span>核心知识点<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/1.Go%E5%85%A5%E9%97%A8.html" aria-label="基础面试题"><span class="font-icon icon fa-fw fa-sm fas fa-disease" style=""></span>基础面试题<!----></a></li><li class="dropdown-item"><a class="route-link nav-link active" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html" aria-label="进阶面试题"><span class="font-icon icon fa-fw fa-sm fas fa-clipboard-question" style=""></span>进阶面试题<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="https://xiaobaidebug.top/" rel="noopener noreferrer" target="_blank" aria-label="blog" class="nav-link"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span>blog<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="nav-item hide-in-mobile"><a href="https://golangguide.top/sitemap.xml" rel="noopener noreferrer" target="_blank" aria-label="sitemap" class="nav-link"><span class="font-icon icon fa-fw fa-sm fas fa-blog" style=""></span>sitemap<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><div class="nav-item vp-repo"><a class="vp-repo-link" href="https://github.com/xiaobaiTech/golang-full-stack" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading clickable active"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span><a class="route-link nav-link vp-sidebar-title" href="/golang/golang/" aria-label="golang知识体系"><!---->golang知识体系<!----></a><!----></p><ul class="vp-sidebar-links"><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/golang/%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF.html" aria-label="学习路线"><!---->学习路线<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/golang/%E5%B8%B8%E7%94%A8%E5%8C%85%E5%A4%A7%E5%85%A8.html" aria-label="常用包和第三方包介绍"><!---->常用包和第三方包介绍<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">核心知识点</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable active" type="button"><!----><span class="vp-sidebar-title">面试题</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/1.Go%E5%85%A5%E9%97%A8.html" aria-label="Go 入门面试题汇总"><!---->Go 入门面试题汇总<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link active vp-sidebar-link vp-sidebar-page active" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html" aria-label="Go 进阶面试题汇总"><!---->Go 进阶面试题汇总<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#golang面试官-for-select时-如果通道已经关闭会怎么样-如果只有一个case呢" aria-label="golang面试官：for select时，如果通道已经关闭会怎么样？如果只有一个case呢？"><!---->golang面试官：for select时，如果通道已经关闭会怎么样？如果只有一个case呢？<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#golang面试题-对已经关闭的的chan进行读写-会怎么样-为什么" aria-label="golang面试题：对已经关闭的的chan进行读写，会怎么样？为什么？"><!---->golang面试题：对已经关闭的的chan进行读写，会怎么样？为什么？<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#golang面试题-对未初始化的的chan进行读写-会怎么样-为什么" aria-label="golang面试题：对未初始化的的chan进行读写，会怎么样？为什么？"><!---->golang面试题：对未初始化的的chan进行读写，会怎么样？为什么？<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#golang面试题-能说说uintptr和unsafe-pointer的区别吗" aria-label="golang面试题：能说说uintptr和unsafe.Pointer的区别吗？"><!---->golang面试题：能说说uintptr和unsafe.Pointer的区别吗？<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#golang-面试题-reflect-反射包-如何获取字段-tag-为什么-json-包不能导出私有变量的-tag" aria-label="golang 面试题：reflect（反射包）如何获取字段 tag？为什么 json 包不能导出私有变量的 tag？"><!---->golang 面试题：reflect（反射包）如何获取字段 tag？为什么 json 包不能导出私有变量的 tag？<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#golang-gc-时会发生什么" aria-label="Golang GC 时会发生什么?"><!---->Golang GC 时会发生什么?<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#golang-中-goroutine-如何调度" aria-label="Golang 中 Goroutine 如何调度?"><!---->Golang 中 Goroutine 如何调度?<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#并发编程概念是什么" aria-label="并发编程概念是什么？"><!---->并发编程概念是什么？<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#下面这段代码有什么错误吗" aria-label="下面这段代码有什么错误吗？"><!---->下面这段代码有什么错误吗？<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#下面几段代码能否通过编译-如果能-输出什么" aria-label="下面几段代码能否通过编译，如果能，输出什么?"><!---->下面几段代码能否通过编译，如果能，输出什么?<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#下面能否通过编译" aria-label="下面能否通过编译?"><!---->下面能否通过编译?<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#通过指针变量-p-访问其成员变量-name-有哪几种方式" aria-label="通过指针变量 p 访问其成员变量 name，有哪几种方式？"><!---->通过指针变量 p 访问其成员变量 name，有哪几种方式？<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#关于字符串连接-下面语法正确的是" aria-label="关于字符串连接，下面语法正确的是？"><!---->关于字符串连接，下面语法正确的是？<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#关于iota-下面代码输出什么" aria-label="关于iota，下面代码输出什么?"><!---->关于iota，下面代码输出什么?<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#mutex-几种状态" aria-label="Mutex 几种状态"><!---->Mutex 几种状态<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#mutex-正常模式和饥饿模式" aria-label="Mutex 正常模式和饥饿模式"><!---->Mutex 正常模式和饥饿模式<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#mutex-允许自旋的条件" aria-label="Mutex 允许自旋的条件"><!---->Mutex 允许自旋的条件<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#rwmutex-实现" aria-label="RWMutex 实现"><!---->RWMutex 实现<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#rwmutex-注意事项" aria-label="RWMutex 注意事项"><!---->RWMutex 注意事项<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#cond-是什么" aria-label="Cond 是什么"><!---->Cond 是什么<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#broadcast-和-signal-区别" aria-label="Broadcast 和 Signal 区别"><!---->Broadcast 和 Signal 区别<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#cond-中-wait-使用" aria-label="Cond 中 Wait 使用"><!---->Cond 中 Wait 使用<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#waitgroup-用法" aria-label="WaitGroup 用法"><!---->WaitGroup 用法<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#waitgroup-实现原理" aria-label="WaitGroup 实现原理"><!---->WaitGroup 实现原理<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#下面代码输出什么" aria-label="下面代码输出什么？"><!---->下面代码输出什么？<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#什么是-sync-once" aria-label="什么是 sync.Once"><!---->什么是 sync.Once<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#什么操作叫做原子操作" aria-label="什么操作叫做原子操作"><!---->什么操作叫做原子操作<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#原子操作和锁的区别" aria-label="原子操作和锁的区别"><!---->原子操作和锁的区别<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#什么是-cas" aria-label="什么是 CAS"><!---->什么是 CAS<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#sync-pool-有什么用" aria-label="sync.Pool 有什么用"><!---->sync.Pool 有什么用<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#goroutine-定义" aria-label="Goroutine 定义"><!---->Goroutine 定义<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#gmp-指的是什么" aria-label="GMP 指的是什么"><!---->GMP 指的是什么<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#给大家丢脸了-用了三年golang-我还是没答对这道内存泄漏题" aria-label="给大家丢脸了，用了三年golang，我还是没答对这道内存泄漏题"><!---->给大家丢脸了，用了三年golang，我还是没答对这道内存泄漏题<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#你一定会遇到的内存回收策略导致的疑似内存泄漏的问题" aria-label="你一定会遇到的内存回收策略导致的疑似内存泄漏的问题"><!---->你一定会遇到的内存回收策略导致的疑似内存泄漏的问题<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#gmp里为什么要有p" aria-label="GMP里为什么要有P?"><!---->GMP里为什么要有P?<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#go栈扩容和栈缩容-连续栈的缺点" aria-label="go栈扩容和栈缩容，连续栈的缺点"><!---->go栈扩容和栈缩容，连续栈的缺点<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#golang隐藏技能-怎么访问私有成员" aria-label="golang隐藏技能:怎么访问私有成员"><!---->golang隐藏技能:怎么访问私有成员<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#_1-0-之前-gm-调度模型" aria-label="1.0 之前 GM 调度模型"><!---->1.0 之前 GM 调度模型<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#gmp-调度流程" aria-label="GMP 调度流程"><!---->GMP 调度流程<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#gmp-中-work-stealing-机制" aria-label="GMP 中 work stealing 机制"><!---->GMP 中 work stealing 机制<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#gmp-中-hand-off-机制" aria-label="GMP 中 hand off 机制"><!---->GMP 中 hand off 机制<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#协作式的抢占式调度" aria-label="协作式的抢占式调度"><!---->协作式的抢占式调度<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#基于信号的抢占式调度" aria-label="基于信号的抢占式调度"><!---->基于信号的抢占式调度<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#gmp-调度过程中存在哪些阻塞" aria-label="GMP 调度过程中存在哪些阻塞"><!---->GMP 调度过程中存在哪些阻塞<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#sysmon-有什么作用" aria-label="sysmon 有什么作用"><!---->sysmon 有什么作用<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#golang面试题-怎么避免内存逃逸" aria-label="golang面试题：怎么避免内存逃逸？"><!---->golang面试题：怎么避免内存逃逸？<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#golang面试题-简单聊聊内存逃逸" aria-label="golang面试题：简单聊聊内存逃逸？"><!---->golang面试题：简单聊聊内存逃逸？<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#三色标记原理" aria-label="三色标记原理"><!---->三色标记原理<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#插入写屏障" aria-label="插入写屏障"><!---->插入写屏障<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#删除写屏障" aria-label="删除写屏障"><!---->删除写屏障<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#写屏障" aria-label="写屏障"><!---->写屏障<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#混合写屏障" aria-label="混合写屏障"><!---->混合写屏障<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#gc-触发时机" aria-label="GC 触发时机"><!---->GC 触发时机<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#go-语言中-gc-的流程是什么" aria-label="Go 语言中 GC 的流程是什么？"><!---->Go 语言中 GC 的流程是什么？<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#gc-如何调优" aria-label="GC 如何调优"><!---->GC 如何调优<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#go语言的栈空间管理是怎么样的" aria-label="Go语言的栈空间管理是怎么样的?"><!---->Go语言的栈空间管理是怎么样的?<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#goroutine和channel的作用分别是什么" aria-label="Goroutine和Channel的作用分别是什么?"><!---->Goroutine和Channel的作用分别是什么?<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#怎么查看goroutine的数量" aria-label="怎么查看Goroutine的数量?"><!---->怎么查看Goroutine的数量?<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#相关推荐" aria-label="相关推荐"><!---->相关推荐<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul><!--]--></li></ul></section></li></ul></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!--[--><!----><!--]--><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->Go 进阶面试题汇总</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://xiaobaidebug.top/" target="_blank" rel="noopener noreferrer">小白debug</a></span><span property="author" content="小白debug"></span></span><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2024-02-13T16:40:11.000Z"></span><!----><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 40 分钟</span><meta property="timeRequired" content="PT40M"></span><!----><!----></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">此页内容<button type="button" class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#golang面试官-for-select时-如果通道已经关闭会怎么样-如果只有一个case呢">golang面试官：for select时，如果通道已经关闭会怎么样？如果只有一个case呢？</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#golang面试题-对已经关闭的的chan进行读写-会怎么样-为什么">golang面试题：对已经关闭的的chan进行读写，会怎么样？为什么？</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#golang面试题-对未初始化的的chan进行读写-会怎么样-为什么">golang面试题：对未初始化的的chan进行读写，会怎么样？为什么？</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#golang面试题-能说说uintptr和unsafe-pointer的区别吗">golang面试题：能说说uintptr和unsafe.Pointer的区别吗？</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#golang-面试题-reflect-反射包-如何获取字段-tag-为什么-json-包不能导出私有变量的-tag">golang 面试题：reflect（反射包）如何获取字段 tag？为什么 json 包不能导出私有变量的 tag？</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#golang-gc-时会发生什么">Golang GC 时会发生什么?</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#golang-中-goroutine-如何调度">Golang 中 Goroutine 如何调度?</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#并发编程概念是什么">并发编程概念是什么？</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#下面这段代码有什么错误吗">下面这段代码有什么错误吗？</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#下面几段代码能否通过编译-如果能-输出什么">下面几段代码能否通过编译，如果能，输出什么?</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#下面能否通过编译">下面能否通过编译?</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#通过指针变量-p-访问其成员变量-name-有哪几种方式">通过指针变量 p 访问其成员变量 name，有哪几种方式？</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#关于字符串连接-下面语法正确的是">关于字符串连接，下面语法正确的是？</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#关于iota-下面代码输出什么">关于iota，下面代码输出什么?</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#mutex-几种状态">Mutex 几种状态</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#mutex-正常模式和饥饿模式">Mutex 正常模式和饥饿模式</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#mutex-允许自旋的条件">Mutex 允许自旋的条件</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#rwmutex-实现">RWMutex 实现</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#rwmutex-注意事项">RWMutex 注意事项</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#cond-是什么">Cond 是什么</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#broadcast-和-signal-区别">Broadcast 和 Signal 区别</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#cond-中-wait-使用">Cond 中 Wait 使用</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#waitgroup-用法">WaitGroup 用法</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#waitgroup-实现原理">WaitGroup 实现原理</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#下面代码输出什么">下面代码输出什么？</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#什么是-sync-once">什么是 sync.Once</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#什么操作叫做原子操作">什么操作叫做原子操作</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#原子操作和锁的区别">原子操作和锁的区别</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#什么是-cas">什么是 CAS</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#sync-pool-有什么用">sync.Pool 有什么用</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#goroutine-定义">Goroutine 定义</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#gmp-指的是什么">GMP 指的是什么</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#给大家丢脸了-用了三年golang-我还是没答对这道内存泄漏题">给大家丢脸了，用了三年golang，我还是没答对这道内存泄漏题</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#你一定会遇到的内存回收策略导致的疑似内存泄漏的问题">你一定会遇到的内存回收策略导致的疑似内存泄漏的问题</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#gmp里为什么要有p">GMP里为什么要有P?</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#go栈扩容和栈缩容-连续栈的缺点">go栈扩容和栈缩容，连续栈的缺点</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#golang隐藏技能-怎么访问私有成员">golang隐藏技能:怎么访问私有成员</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#_1-0-之前-gm-调度模型">1.0 之前 GM 调度模型</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#gmp-调度流程">GMP 调度流程</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#gmp-中-work-stealing-机制">GMP 中 work stealing 机制</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#gmp-中-hand-off-机制">GMP 中 hand off 机制</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#协作式的抢占式调度">协作式的抢占式调度</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#基于信号的抢占式调度">基于信号的抢占式调度</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#gmp-调度过程中存在哪些阻塞">GMP 调度过程中存在哪些阻塞</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#sysmon-有什么作用">sysmon 有什么作用</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#golang面试题-怎么避免内存逃逸">golang面试题：怎么避免内存逃逸？</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#golang面试题-简单聊聊内存逃逸">golang面试题：简单聊聊内存逃逸？</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#三色标记原理">三色标记原理</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#插入写屏障">插入写屏障</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#删除写屏障">删除写屏障</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#写屏障">写屏障</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#混合写屏障">混合写屏障</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#gc-触发时机">GC 触发时机</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#go-语言中-gc-的流程是什么">Go 语言中 GC 的流程是什么？</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#gc-如何调优">GC 如何调优</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#go语言的栈空间管理是怎么样的">Go语言的栈空间管理是怎么样的?</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#goroutine和channel的作用分别是什么">Goroutine和Channel的作用分别是什么?</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#怎么查看goroutine的数量">怎么查看Goroutine的数量?</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#相关推荐">相关推荐</a></li><!----><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!--[--><!----><!--]--><div class="theme-hope-content"><h1 id="go-进阶面试题汇总" tabindex="-1"><a class="header-anchor" href="#go-进阶面试题汇总"><span>Go 进阶面试题汇总</span></a></h1><h2 id="golang面试官-for-select时-如果通道已经关闭会怎么样-如果只有一个case呢" tabindex="-1"><a class="header-anchor" href="#golang面试官-for-select时-如果通道已经关闭会怎么样-如果只有一个case呢"><span>golang面试官：for select时，如果通道已经关闭会怎么样？如果只有一个case呢？</span></a></h2><p><a href="https://golangguide.top/golang/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/for%20select%E6%97%B6%EF%BC%8C%E5%A6%82%E6%9E%9C%E9%80%9A%E9%81%93%E5%B7%B2%E7%BB%8F%E5%85%B3%E9%97%AD%E4%BC%9A%E6%80%8E%E4%B9%88%E6%A0%B7%EF%BC%9F%E5%A6%82%E6%9E%9C%E5%8F%AA%E6%9C%89%E4%B8%80%E4%B8%AAcase%E5%91%A2%EF%BC%9F.html" target="_blank" rel="noopener noreferrer">答案<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="golang面试题-对已经关闭的的chan进行读写-会怎么样-为什么" tabindex="-1"><a class="header-anchor" href="#golang面试题-对已经关闭的的chan进行读写-会怎么样-为什么"><span>golang面试题：对已经关闭的的chan进行读写，会怎么样？为什么？</span></a></h2><p><a href="https://golangguide.top/golang/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/golang%E9%9D%A2%E8%AF%95%E9%A2%98%EF%BC%9A%E5%AF%B9%E5%B7%B2%E7%BB%8F%E5%85%B3%E9%97%AD%E7%9A%84%E7%9A%84chan%E8%BF%9B%E8%A1%8C%E8%AF%BB%E5%86%99%EF%BC%8C%E4%BC%9A%E6%80%8E%E4%B9%88%E6%A0%B7%EF%BC%9F%E4%B8%BA%E4%BB%80%E4%B9%88%EF%BC%9F.html" target="_blank" rel="noopener noreferrer">答案<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="golang面试题-对未初始化的的chan进行读写-会怎么样-为什么" tabindex="-1"><a class="header-anchor" href="#golang面试题-对未初始化的的chan进行读写-会怎么样-为什么"><span>golang面试题：对未初始化的的chan进行读写，会怎么样？为什么？</span></a></h2><p><a href="https://golangguide.top/golang/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/golang%E9%9D%A2%E8%AF%95%E9%A2%98%EF%BC%9A%E5%AF%B9%E6%9C%AA%E5%88%9D%E5%A7%8B%E5%8C%96%E7%9A%84%E7%9A%84chan%E8%BF%9B%E8%A1%8C%E8%AF%BB%E5%86%99%EF%BC%8C%E4%BC%9A%E6%80%8E%E4%B9%88%E6%A0%B7%EF%BC%9F%E4%B8%BA%E4%BB%80%E4%B9%88%EF%BC%9F.html" target="_blank" rel="noopener noreferrer">答案<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="golang面试题-能说说uintptr和unsafe-pointer的区别吗" tabindex="-1"><a class="header-anchor" href="#golang面试题-能说说uintptr和unsafe-pointer的区别吗"><span>golang面试题：能说说uintptr和unsafe.Pointer的区别吗？</span></a></h2><p><a href="https://mp.weixin.qq.com/s/PSkz0zj-vqKzmIKa_b-xAA" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/s/PSkz0zj-vqKzmIKa_b-xAA<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="golang-面试题-reflect-反射包-如何获取字段-tag-为什么-json-包不能导出私有变量的-tag" tabindex="-1"><a class="header-anchor" href="#golang-面试题-reflect-反射包-如何获取字段-tag-为什么-json-包不能导出私有变量的-tag"><span>golang 面试题：reflect（反射包）如何获取字段 tag？为什么 json 包不能导出私有变量的 tag？</span></a></h2><p><a href="https://golangguide.top/golang/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/golang%20%E9%9D%A2%E8%AF%95%E9%A2%98%EF%BC%9Areflect%EF%BC%88%E5%8F%8D%E5%B0%84%E5%8C%85%EF%BC%89%E5%A6%82%E4%BD%95%E8%8E%B7%E5%8F%96%E5%AD%97%E6%AE%B5%20tag%EF%BC%9F%E4%B8%BA%E4%BB%80%E4%B9%88%20json%20%E5%8C%85%E4%B8%8D%E8%83%BD%E5%AF%BC%E5%87%BA%E7%A7%81%E6%9C%89%E5%8F%98%E9%87%8F%E7%9A%84%20tag%EF%BC%9F.html" target="_blank" rel="noopener noreferrer">答案<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="golang-gc-时会发生什么" tabindex="-1"><a class="header-anchor" href="#golang-gc-时会发生什么"><span>Golang GC 时会发生什么?</span></a></h2><p>首先我们先来了解下垃圾回收.什么是垃圾回收？</p><p>内存管理是程序员开发应用的一大难题。传统的系统级编程语言（主要指C/C++）中，程序开发者必须对内存小心的进行管理操作，控制内存的申请及释放。因为稍有不慎，就可能产生内存泄露问题，这种问题不易发现并且难以定位，一直成为困扰程序开发者的噩梦。如何解决这个头疼的问题呢？</p><p>过去一般采用两种办法：</p><ul><li>内存泄露检测工具。这种工具的原理一般是静态代码扫描，通过扫描程序检测可能出现内存泄露的代码段。然而检测工具难免有疏漏和不足，只能起到辅助作用。</li><li>智能指针。这是 c++ 中引入的自动内存管理方法，通过拥有自动内存管理功能的指针对象来引用对象，是程序员不用太关注内存的释放，而达到内存自动释放的目的。这种方法是采用最广泛的做法，但是对程序开发者有一定的学习成本（并非语言层面的原生支持），而且一旦有忘记使用的场景依然无法避免内存泄露。</li></ul><p>为了解决这个问题，后来开发出来的几乎所有新语言（java，python，php等等）都引入了语言层面的自动内存管理 – 也就是语言的使用者只用关注内存的申请而不必关心内存的释放，内存释放由虚拟机（virtual machine）或运行时（runtime）来自动进行管理。而这种对不再使用的内存资源进行自动回收的行为就被称为垃圾回收。</p><p>常用的垃圾回收的方法:</p><ul><li>引用计数（reference counting）</li></ul><p>这是最简单的一种垃圾回收算法，和之前提到的智能指针异曲同工。对每个对象维护一个引用计数，当引用该对象的对象被销毁或更新时被引用对象的引用计数自动减一，当被引用对象被创建或被赋值给其他对象时引用计数自动加一。当引用计数为0时则立即回收对象。</p><p>这种方法的优点是实现简单，并且内存的回收很及时。这种算法在内存比较紧张和实时性比较高的系统中使用的比较广泛，如ios cocoa框架，php，python等。</p><p>但是简单引用计数算法也有明显的缺点：</p><ol><li>频繁更新引用计数降低了性能。</li></ol><p>一种简单的解决方法就是编译器将相邻的引用计数更新操作合并到一次更新；还有一种方法是针对频繁发生的临时变量引用不进行计数，而是在引用达到0时通过扫描堆栈确认是否还有临时对象引用而决定是否释放。等等还有很多其他方法，具体可以参考这里。</p><ol><li>循环引用。</li></ol><p>当对象间发生循环引用时引用链中的对象都无法得到释放。最明显的解决办法是避免产生循环引用，如cocoa引入了strong指针和weak指针两种指针类型。或者系统检测循环引用并主动打破循环链。当然这也增加了垃圾回收的复杂度。</p><ul><li>标记-清除（mark and sweep）</li></ul><p>标记-清除（mark and sweep）分为两步，标记从根变量开始迭代得遍历所有被引用的对象，对能够通过应用遍历访问到的对象都进行标记为“被引用”；标记完成后进行清除操作，对没有标记过的内存进行回收（回收同时可能伴有碎片整理操作）。这种方法解决了引用计数的不足，但是也有比较明显的问题：每次启动垃圾回收都会暂停当前所有的正常代码执行，回收是系统响应能力大大降低！当然后续也出现了很多mark&amp;sweep算法的变种（如三色标记法）优化了这个问题。</p><ul><li>分代搜集（generation）</li></ul><p>java的jvm 就使用的分代回收的思路。在面向对象编程语言中，绝大多数对象的生命周期都非常短。分代收集的基本思想是，将堆划分为两个或多个称为代（generation）的空间。新创建的对象存放在称为新生代（young generation）中（一般来说，新生代的大小会比 老年代小很多），随着垃圾回收的重复执行，生命周期较长的对象会被提升（promotion）到老年代中（这里用到了一个分类的思路，这个是也是科学思考的一个基本思路）。</p><p>因此，新生代垃圾回收和老年代垃圾回收两种不同的垃圾回收方式应运而生，分别用于对各自空间中的对象执行垃圾回收。新生代垃圾回收的速度非常快，比老年代快几个数量级，即使新生代垃圾回收的频率更高，执行效率也仍然比老年代垃圾回收强，这是因为大多数对象的生命周期都很短，根本无需提升到老年代。</p><p>Golang GC 时会发生什么?</p><p>Golang 1.5后，采取的是“非分代的、非移动的、并发的、三色的”标记清除垃圾回收算法。</p><p>golang 中的 gc 基本上是标记清除的过程：</p><figure><a href="https://github.com/KeKe-Li/For-learning-Go-Tutorial/blob/master/src/images/2.jpg" target="_blank" rel="noopener noreferrer"><img src="https://cdn.jsdelivr.net/gh/xiaobaiTech/image/2.jpg" alt="img" tabindex="0" loading="lazy"><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><figcaption>img</figcaption></figure><p>gc的过程一共分为四个阶段：</p><ol><li>栈扫描（开始时STW）</li><li>第一次标记（并发）</li><li>第二次标记（STW）</li><li>清除（并发）</li></ol><p>整个进程空间里申请每个对象占据的内存可以视为一个图，初始状态下每个内存对象都是白色标记。</p><ol><li>先STW，做一些准备工作，比如 enable write barrier。然后取消STW，将扫描任务作为多个并发的goroutine立即入队给调度器，进而被CPU处理</li><li>第一轮先扫描root对象，包括全局指针和 goroutine 栈上的指针，标记为灰色放入队列</li><li>第二轮将第一步队列中的对象引用的对象置为灰色加入队列，一个对象引用的所有对象都置灰并加入队列后，这个对象才能置为黑色并从队列之中取出。循环往复，最后队列为空时，整个图剩下的白色内存空间即不可到达的对象，即没有被引用的对象；</li><li>第三轮再次STW，将第二轮过程中新增对象申请的内存进行标记（灰色），这里使用了write barrier（写屏障）去记录</li></ol><p>Golang gc 优化的核心就是尽量使得 STW(Stop The World) 的时间越来越短。</p><p>详细的Golang的GC介绍可以参看<a href="https://github.com/KeKe-Li/For-learning-Go-Tutorial/blob/master/src/spec/02.0.md" target="_blank" rel="noopener noreferrer">Golang垃圾回收<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p><h2 id="golang-中-goroutine-如何调度" tabindex="-1"><a class="header-anchor" href="#golang-中-goroutine-如何调度"><span>Golang 中 Goroutine 如何调度?</span></a></h2><p>goroutine是Golang语言中最经典的设计，也是其魅力所在，goroutine的本质是协程，是实现并行计算的核心。 goroutine使用方式非常的简单，只需使用go关键字即可启动一个协程，并且它是处于异步方式运行，你不需要等它运行完成以后在执行以后的代码。</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>go func()//通过go关键字启动一个协程来运行函数
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>协程:</p><p>协程拥有自己的寄存器上下文和栈。协程调度切换时，将寄存器上下文和栈保存到其他地方，在切回来的时候，恢复先前保存的寄存器上下文和栈。 因此，协程能保留上一次调用时的状态（即所有局部状态的一个特定组合），每次过程重入时，就相当于进入上一次调用的状态，换种说法：进入上一次离开时所处逻辑流的位置。 线程和进程的操作是由程序触发系统接口，最后的执行者是系统；协程的操作执行者则是用户自身程序，goroutine也是协程。</p><p>groutine能拥有强大的并发实现是通过GPM调度模型实现.</p><figure><img src="https://cdn.xiaobaidebug.top/1716678070907.png" alt="GMP概念" tabindex="0" loading="lazy"><figcaption>GMP概念</figcaption></figure><p>Go的调度器内部有四个重要的结构：M，P，S，Sched，如上图所示（Sched未给出）.</p><ul><li>M:M代表内核级线程，一个M就是一个线程，goroutine就是跑在M之上的；M是一个很大的结构，里面维护小对象内存cache（mcache）、当前执行的goroutine、随机数发生器等等非常多的信息</li><li>G:代表一个goroutine，它有自己的栈，instruction pointer和其他信息（正在等待的channel等等），用于调度。</li><li>P:P全称是Processor，处理器，它的主要用途就是用来执行goroutine的，所以它也维护了一个goroutine队列，里面存储了所有需要它来执行的goroutine</li><li>Sched：代表调度器，它维护有存储M和G的队列以及调度器的一些状态信息等。</li></ul><p>调度实现:</p><figure><img src="https://cdn.xiaobaidebug.top/1716678090472.png" alt="GMP调度示例" tabindex="0" loading="lazy"><figcaption>GMP调度示例</figcaption></figure><p>从上图中可以看到，有2个物理线程M，两个M都拥有一个处理器P，每一个也都有一个正在运行的goroutine。P的数量可以通过GOMAXPROCS()来设置，它其实也就代表了真正的并发度，即有多少个goroutine可以同时运行。</p><p>图中本地队列里的那些goroutine并没有运行，而是处于ready的就绪态，正在等待被调度。P维护着这个队列（称之为runqueue），Go语言里，启动一个goroutine很容易：go function 就行，所以每有一个go语句被执行，runqueue队列就在其末尾加入一个goroutine，在下一个调度点，就从runqueue中取出（如何决定取哪个goroutine？）一个goroutine执行。</p><p>当一个OS线程M0陷入阻塞时，P转而在运行M1，图中的M1可能是正被创建，或者从线程缓存中取出。</p><figure><img src="https://cdn.xiaobaidebug.top/1716680501221.png" alt="发生系统调用" tabindex="0" loading="lazy"><figcaption>发生系统调用</figcaption></figure><p>当MO返回时，它必须尝试取得一个P来运行goroutine，一般情况下，它会从其他的OS线程那里拿一个P过来， 如果没有拿到的话，它就把goroutine放在一个global runqueue里，然后自己睡眠（放入线程缓存里）。所有的P也会周期性的检查global runqueue并运行其中的goroutine，否则global runqueue上的goroutine永远无法执行。</p><p>另一种情况是P所分配的任务G很快就执行完了（分配不均），这就导致了这个处理器P很忙，但是其他的P还有任务，此时如果global runqueue没有任务G了，那么P不得不从其他的P里拿一些G来执行。</p><figure><img src="https://cdn.xiaobaidebug.top/1716680514734.png" alt="重新调度G" tabindex="0" loading="lazy"><figcaption>重新调度G</figcaption></figure><p>通常来说，如果P从其他的P那里要拿任务的话，一般就拿run queue的一半，这就确保了每个OS线程都能充分的使用。</p><h2 id="并发编程概念是什么" tabindex="-1"><a class="header-anchor" href="#并发编程概念是什么"><span>并发编程概念是什么？</span></a></h2><p>并行是指两个或者多个事件在同一时刻发生；并发是指两个或多个事件在同一时间间隔发生。</p><p>并行是在不同实体上的多个事件，并发是在同一实体上的多个事件。在一台处理器上“同时”处理多个任务，在多台处理器上同时处理多个任务。如hadoop分布式集群</p><p>并发偏重于多个任务交替执行，而多个任务之间有可能还是串行的。而并行是真正意义上的“同时执行”。</p><p>并发编程是指在一台处理器上“同时”处理多个任务。并发是在同一实体上的多个事件。多个事件在同一时间间隔发生。并发编程的目标是充分的利用处理器的每一个核，以达到最高的处理性能。</p><h2 id="下面这段代码有什么错误吗" tabindex="-1"><a class="header-anchor" href="#下面这段代码有什么错误吗"><span>下面这段代码有什么错误吗？</span></a></h2><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">funcMui</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y <span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">(</span>sum <span class="token builtin">int</span><span class="token punctuation">,</span><span class="token builtin">error</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> x<span class="token operator">+</span>y<span class="token punctuation">,</span><span class="token boolean">nil</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>解析</p><blockquote><p>第二个返回值没有命名,在函数有多个返回值时，只要有一个返回值有命名，<br> 其他的也必须命名。如果有多个返回值必须加上括号()；<br> 如果只有一个返回值且命名也必须加上括号()。<br> 这里的第一个返回值有命名 sum，第二个没有命名，所以错误。</p></blockquote><h2 id="下面几段代码能否通过编译-如果能-输出什么" tabindex="-1"><a class="header-anchor" href="#下面几段代码能否通过编译-如果能-输出什么"><span>下面几段代码能否通过编译，如果能，输出什么?</span></a></h2><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    list <span class="token operator">:=</span> <span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span>
    <span class="token comment">// 编译错误</span>
    <span class="token comment">// new([]int) 之后的 list 是一个未设置长度的 *[]int 类型的指针</span>
    <span class="token comment">// 不能对未设置长度的指针执行 append 操作。</span>
    list <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span>

    s1 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span>
    s2 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>
    <span class="token comment">// 编译错误，s2需要展开</span>
    s1 <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>s1<span class="token punctuation">,</span> s2<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="下面能否通过编译" tabindex="-1"><a class="header-anchor" href="#下面能否通过编译"><span>下面能否通过编译?</span></a></h2><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">Test7</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    sn1 <span class="token operator">:=</span> <span class="token keyword">struct</span> <span class="token punctuation">{</span>
        age  <span class="token builtin">int</span>
        name <span class="token builtin">string</span>
    <span class="token punctuation">}</span><span class="token punctuation">{</span>age<span class="token punctuation">:</span> <span class="token number">11</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">&quot;qq&quot;</span><span class="token punctuation">}</span>
    sn2 <span class="token operator">:=</span> <span class="token keyword">struct</span> <span class="token punctuation">{</span>
        age  <span class="token builtin">int</span>
        name <span class="token builtin">string</span>
    <span class="token punctuation">}</span><span class="token punctuation">{</span>age<span class="token punctuation">:</span> <span class="token number">11</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">&quot;qq&quot;</span><span class="token punctuation">}</span>
    <span class="token comment">// true</span>
    <span class="token keyword">if</span> sn1 <span class="token operator">==</span> sn2 <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;sn1 == sn2&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    sm1 <span class="token operator">:=</span> <span class="token keyword">struct</span> <span class="token punctuation">{</span>
        age <span class="token builtin">int</span>
        m   <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span>
    <span class="token punctuation">}</span><span class="token punctuation">{</span>age<span class="token punctuation">:</span> <span class="token number">11</span><span class="token punctuation">,</span> m<span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
    sm2 <span class="token operator">:=</span> <span class="token keyword">struct</span> <span class="token punctuation">{</span>
        age <span class="token builtin">int</span>
        m   <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span>
    <span class="token punctuation">}</span><span class="token punctuation">{</span>age<span class="token punctuation">:</span> <span class="token number">11</span><span class="token punctuation">,</span> m<span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token comment">// 编译错误，含有map、slice类型的struct不能进行比较</span>
    <span class="token keyword">if</span> sm1 <span class="token operator">==</span> sm2 <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;sm1 == sm2&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="通过指针变量-p-访问其成员变量-name-有哪几种方式" tabindex="-1"><a class="header-anchor" href="#通过指针变量-p-访问其成员变量-name-有哪几种方式"><span>通过指针变量 p 访问其成员变量 name，有哪几种方式？</span></a></h2><p>A. <a href="http://p.name" target="_blank" rel="noopener noreferrer">p.name<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>B. (&amp;p).name</p><p>C. (*p).name</p><p>D. p-&gt;name</p><p>答案</p><blockquote><p>AC</p></blockquote><h2 id="关于字符串连接-下面语法正确的是" tabindex="-1"><a class="header-anchor" href="#关于字符串连接-下面语法正确的是"><span>关于字符串连接，下面语法正确的是？</span></a></h2><p>A. str := &#39;abc&#39; + &#39;123&#39;</p><p>B. str := &quot;abc&quot; + &quot;123&quot;</p><p>C. str := &#39;123&#39; + &quot;abc&quot;</p><p>D. fmt.Sprintf(&quot;abc%d&quot;, 123)</p><p>答案</p><blockquote><p>BD</p><p>golang单引号&#39;&#39;中的内容表示单个字符（rune）,反引号``中的内容表示不可转义的字符串</p></blockquote><h2 id="关于iota-下面代码输出什么" tabindex="-1"><a class="header-anchor" href="#关于iota-下面代码输出什么"><span>关于iota，下面代码输出什么?</span></a></h2><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">Test10</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">(</span>
        x <span class="token operator">=</span> <span class="token boolean">iota</span>
        <span class="token boolean">_</span>
        y
        z <span class="token operator">=</span> <span class="token string">&quot;pi&quot;</span>
        k
        p <span class="token operator">=</span> <span class="token boolean">iota</span>
        q
    <span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">,</span> k<span class="token punctuation">,</span> p<span class="token punctuation">,</span> q<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>输出</p><blockquote><p>0 2 pi pi 5 6</p></blockquote><h2 id="mutex-几种状态" tabindex="-1"><a class="header-anchor" href="#mutex-几种状态"><span>Mutex 几种状态</span></a></h2><ul><li>mutexLocked —表示互斥锁的锁定状态；</li><li>mutexWoken —表示从正常模式被从唤醒；</li><li>mutexStarving —当前的互斥锁进入饥饿状态；</li><li>waitersCount —当前互斥锁上等待的 Goroutine 个数；</li></ul><h2 id="mutex-正常模式和饥饿模式" tabindex="-1"><a class="header-anchor" href="#mutex-正常模式和饥饿模式"><span>Mutex 正常模式和饥饿模式</span></a></h2><p><strong>正常模式(非公平锁)</strong></p><p>正常模式下，所有等待锁的 goroutine 按照 FIFO(先进先出)顺序等待。唤醒的 goroutine 不会直接拥有锁，而是会和新请求锁的 goroutine 竞争锁的拥有。新请求锁的 goroutine 具有优势：它正在 CPU上执行，而且可能有好几个，所以刚刚唤醒的 goroutine 有很大可能在锁竞争中失败。在这种情况下，这个被</p><p>唤醒的 goroutine 会加入到等待队列的前面。如果一个等待的 goroutine 超过1ms没有获取锁，那么它将会把锁转变为饥饿模式。</p><p><strong>饥饿模式(公平锁)</strong></p><p>为了解决了等待 G队列的长尾问题</p><p>饥饿模式下，直接由 unlock 把锁交给等待队列中排在第一位的 G(队头)，同时，饥饿模式下，新进来的 G不会参与抢锁也不会进入自旋状态，会直接进入等待队列的尾部,这样很好的解决了老的 g 一直抢不到锁的场景。饥饿模式的触发条件，当一个 G等待锁时间超过1 毫秒时，或者当前队列只剩下一个 g 的时候，Mutex切换到饥饿模式。</p><p><strong>总结</strong></p><p>对于两种模式，正常模式下的性能是最好的，goroutine 可以连续多次获取锁，饥饿模式解决了取锁公平的问题，但是性能会下降，其实是性能和公平的一个平衡模式。</p><h2 id="mutex-允许自旋的条件" tabindex="-1"><a class="header-anchor" href="#mutex-允许自旋的条件"><span>Mutex 允许自旋的条件</span></a></h2><p>1 锁已被占用，并且锁不处于饥饿模式。</p><p>2 积累的自旋次数小于最大自旋次数（active_spin=4）。3 cpu 核数大于1。</p><p>4 有空闲的 P。</p><p>5 当前 goroutine 所挂载的 P下，本地待运行队列为空。</p><h2 id="rwmutex-实现" tabindex="-1"><a class="header-anchor" href="#rwmutex-实现"><span>RWMutex 实现</span></a></h2><p>通过记录 readerCount 读锁的数量来进行控制，当有一个写锁的时候，会将读锁数量设置为负数1&lt;&lt;30。目的是让新进入的读锁等待写锁之后释放通知读锁。同样的写锁也会等等待之前的读锁都释放完毕，才会开始进行后续的操作。而等写锁释放完之后，会将值重新加上1&lt;&lt;30,并通知刚才新进入的读锁(rw.readerSem)，两者互相限制。</p><h2 id="rwmutex-注意事项" tabindex="-1"><a class="header-anchor" href="#rwmutex-注意事项"><span>RWMutex 注意事项</span></a></h2><ul><li><p>RWMutex 是单写多读锁，该锁可以加多个读锁或者一个写锁</p></li><li><p>读锁占用的情况下会阻止写，不会阻止读，多个 goroutine 可以同时获取读锁</p></li><li><p>写锁会阻止其他 goroutine（无论读和写）进来，整个锁由该 goroutine 独占</p></li><li><p>适用于读多写少的场景</p></li><li><p>RWMutex 类型变量的零值是一个未锁定状态的互斥锁。</p></li><li><p>RWMutex 在首次被使用之后就不能再被拷贝。</p></li><li><p>RWMutex 的读锁或写锁在未锁定状态，解锁操作都会引发 panic。</p></li><li><p>RWMutex 的一个写锁 Lock 去锁定临界区的共享资源，如果临界区的共享资源已被（读锁或写锁）锁定，这个写锁操作的 goroutine 将被阻塞直到解锁。</p></li><li><p>RWMutex 的读锁不要用于递归调用，比较容易产生死锁。</p></li><li><p>RWMutex 的锁定状态与特定的 goroutine 没有关联。一个 goroutine 可以 RLock（Lock），另一个 goroutine 可以 RUnlock（Unlock）。</p></li><li><p>写锁被解锁后，所有因操作锁定读锁而被阻塞的 goroutine 会被唤醒，并都可以成功锁定读锁。</p></li><li><p>读锁被解锁后，在没有被其他读锁锁定的前提下，所有因操作锁定写锁而被阻塞的 goroutine，其中等待时间最长的一个 goroutine 会被唤醒。</p></li></ul><h2 id="cond-是什么" tabindex="-1"><a class="header-anchor" href="#cond-是什么"><span>Cond 是什么</span></a></h2><p>Cond实现了一种条件变量，可以使用在多个 Reader 等待共享资源 ready 的场景（如果只有一读一写，一个锁或者 channel 就搞定了）</p><p>每个 Cond都会关联一个 Lock（sync.Mutex or sync.RWMutex），当修改条件或者调用 Wait 方法时，必须加锁，保护 condition。</p><h2 id="broadcast-和-signal-区别" tabindex="-1"><a class="header-anchor" href="#broadcast-和-signal-区别"><span>Broadcast 和 Signal 区别</span></a></h2><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>Cond<span class="token punctuation">)</span> <span class="token function">Broadcast</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Broadcast 会唤醒所有等待 c 的 goroutine。调用 Broadcast 的时候，可以加锁，也可以不加锁。</p><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>Cond<span class="token punctuation">)</span> <span class="token function">Signal</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Signal 只唤醒1 个等待 c 的 goroutine。调用 Signal 的时候，可以加锁，也可以不加锁。</p><h2 id="cond-中-wait-使用" tabindex="-1"><a class="header-anchor" href="#cond-中-wait-使用"><span>Cond 中 Wait 使用</span></a></h2><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>Cond<span class="token punctuation">)</span> <span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Wait()会自动释放 c.L，并挂起调用者的 goroutine。之后恢复执行，Wait()会在返回时对 c.L 加锁。</p><p>除非被 Signal 或者 Broadcast 唤醒，否则 Wait()不会返回。</p><p>由于 Wait()第一次恢复时，C.L 并没有加锁，所以当 Wait 返回时，调用者通常并不能假设条件为真。</p><p>取而代之的是,调用者应该在循环中调用 Wait。（简单来说，只要想使用 condition，就必须加锁。）</p><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="language-go"><code>c<span class="token punctuation">.</span>L<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> <span class="token operator">!</span><span class="token function">condition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

	c<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token operator">...</span> <span class="token builtin">make</span> use of condition <span class="token operator">...</span> 

c<span class="token punctuation">.</span>L<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="waitgroup-用法" tabindex="-1"><a class="header-anchor" href="#waitgroup-用法"><span>WaitGroup 用法</span></a></h2><p>一个 WaitGroup 对象可以等待一组协程结束。使用方法是：</p><p>1.main 协程通过调用 wg.Add(delta int)设置 worker 协程的个数，然后创建 worker 协程；</p><p>2.worker 协程执行结束以后，都要调用 wg.Done()；</p><p>3.main 协程调用 wg.Wait()且被 block，直到所有 worker 协程全部执行结束后返回。</p><h2 id="waitgroup-实现原理" tabindex="-1"><a class="header-anchor" href="#waitgroup-实现原理"><span>WaitGroup 实现原理</span></a></h2><ul><li>WaitGroup 主要维护了2 个计数器，一个是请求计数器 v，一个是等待计数器 w，二者组成一个64bit 的值，请求计数器占高32bit，等待计数器占低32bit。</li><li>每次 Add执行，请求计数器 v 加1，Done方法执行，请求计数器减1，v 为0 时通过信号量唤醒 Wait()。</li></ul><h2 id="下面代码输出什么" tabindex="-1"><a class="header-anchor" href="#下面代码输出什么"><span>下面代码输出什么？</span></a></h2><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">Test16</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    a <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">}</span>
    b <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">}</span>
    <span class="token keyword">if</span> a <span class="token operator">==</span> b <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;equal&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;not equal&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>A. compilation error</p><p>B. equal</p><p>C. not equal</p><p>答案</p><blockquote><p>A 编译错误</p><p>对于数组而言，一个数组是由数组中的值和数组的长度两部分组成的，如果两个数组长度不同，那么两个数组是属于<br> 不同类型的，是不能进行比较的</p></blockquote><h2 id="什么是-sync-once" tabindex="-1"><a class="header-anchor" href="#什么是-sync-once"><span>什么是 sync.Once</span></a></h2><ul><li>Once 可以用来执行且仅仅执行一次动作，常常用于单例对象的初始化场景。</li><li>Once 常常用来初始化单例资源，或者并发访问只需初始化一次的共享资源，或者在测试的时候初始化一次测试资源。</li><li>sync.Once 只暴露了一个方法 Do，你可以多次调用 Do 方法，但是只有第一次调用 Do 方法时 f 参数才会执行，这里的 f 是一个无参数无返回值的函数。</li></ul><h2 id="什么操作叫做原子操作" tabindex="-1"><a class="header-anchor" href="#什么操作叫做原子操作"><span>什么操作叫做原子操作</span></a></h2><p>一个或者多个操作在 CPU执行过程中不被中断的特性，称为原子性(atomicity)。这些操作对外表现成一个不可分割的整体，他们要么都执行，要么都不执行，外界不会看到他们只执行到一半的状态。而在现实世界中，CPU 不可能不中断的执行一系列操作，但如果我们在执行多个操作时，能让他们的中间状态对外不可见，那我们就可以宣城他们拥有了“不可分割”的原子性。</p><p>在 Go中，一条普通的赋值语句其实不是一个原子操作。列如，在32 位机器上写 int64 类型的变量就会有中间状态，因为他会被拆成两次写操作(MOV)——写低32 位和写高32 位。</p><h2 id="原子操作和锁的区别" tabindex="-1"><a class="header-anchor" href="#原子操作和锁的区别"><span>原子操作和锁的区别</span></a></h2><p>原子操作由底层硬件支持，而锁则由操作系统的调度器实现。锁应当用来保护一段逻辑，对于一个变量更新的保护，原子操作通常会更有效率，并且更能利用计算机多核的优势，如果要更新的是一个复合对象，则应当使用 atomic.Value 封装好的实现。</p><h2 id="什么是-cas" tabindex="-1"><a class="header-anchor" href="#什么是-cas"><span>什么是 CAS</span></a></h2><p>CAS的全称为 Compare And Swap，直译就是比较交换。是一条 CPU的原子指令，其作用是让 CPU先进行比较两个值是否相等，然后原子地更新某个位置的值，其实现方式是给予硬件平台的汇编指令，在 intel 的 CPU中，使用的 cmpxchg指令，就是说 CAS是靠硬件实现的，从而在硬件层面提升效率。</p><p>简述过程是这样：</p><p>假设包含3 个参数内存位置(V)、预期原值(A)和新值(B)。V表示要更新变量的值，E表示预期值，N表示新值。仅当 V值等于 E值时，才会将 V的值设为 N，如果 V值和 E值不同，则说明已经有其他线程在做更新，则当前线程什么都不</p><p>做，最后 CAS返回当前 V的真实值。CAS操作时抱着乐观的态度进行的，它总是认为自己可以成功完成操作。基于这样的原理，CAS操作即使没有锁，也可以发现其他线程对于当前线程的干扰。</p><h2 id="sync-pool-有什么用" tabindex="-1"><a class="header-anchor" href="#sync-pool-有什么用"><span>sync.Pool 有什么用</span></a></h2><p>对于很多需要重复分配、回收内存的地方，sync.Pool 是一个很好的选择。频繁地分配、回收内存会给 GC 带来一定的负担，严重的时候会引起 CPU 的毛刺，而 sync.Pool 可以将暂时不用的对象缓存起来，待下次需要的时候直接使用，不用再次经过内存分配，复用对象的内存，减轻 GC 的压力，提升系统的性能。</p><h2 id="goroutine-定义" tabindex="-1"><a class="header-anchor" href="#goroutine-定义"><span>Goroutine 定义</span></a></h2><p>Goroutine 是一个与其他 goroutines 并行运行在同一地址空间的 Go 函数或方法。一个运行的程序由一个或更多个 goroutine 组成。它与线程、协程、进程等不同。它是一个 goroutine”—— Rob Pike</p><p>Goroutines 在同一个用户地址空间里并行独立执行 functions，channels 则用于 goroutines 间的通信和同步访问控制。</p><h2 id="gmp-指的是什么" tabindex="-1"><a class="header-anchor" href="#gmp-指的是什么"><span>GMP 指的是什么</span></a></h2><p>G（Goroutine）：我们所说的协程，为用户级的轻量级线程，每个 Goroutine 对象中的 sched 保存着其上下文信息.</p><p>M（Machine）：对内核级线程的封装，数量对应真实的 CPU数（真正干活的对象）.</p><p>P（Processor）：即为 G和 M的调度对象，用来调度 G和 M之间的关联关系，其数量可通过 GOMAXPROCS()来设置，默认为核心数。</p><h2 id="给大家丢脸了-用了三年golang-我还是没答对这道内存泄漏题" tabindex="-1"><a class="header-anchor" href="#给大家丢脸了-用了三年golang-我还是没答对这道内存泄漏题"><span>给大家丢脸了，用了三年golang，我还是没答对这道内存泄漏题</span></a></h2><p><a href="https://mp.weixin.qq.com/s/-agtdhlW7Yj7S88a0z7KHg" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/s/-agtdhlW7Yj7S88a0z7KHg<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="你一定会遇到的内存回收策略导致的疑似内存泄漏的问题" tabindex="-1"><a class="header-anchor" href="#你一定会遇到的内存回收策略导致的疑似内存泄漏的问题"><span>你一定会遇到的内存回收策略导致的疑似内存泄漏的问题</span></a></h2><p><a href="https://colobu.com/2019/08/28/go-memory-leak-i-dont-think-so/" target="_blank" rel="noopener noreferrer">https://colobu.com/2019/08/28/go-memory-leak-i-dont-think-so/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="gmp里为什么要有p" tabindex="-1"><a class="header-anchor" href="#gmp里为什么要有p"><span>GMP里为什么要有P?</span></a></h2><p><a href="https://mp.weixin.qq.com/s/SEE2TUeZQZ7W1BKkmnelAA" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/s/SEE2TUeZQZ7W1BKkmnelAA<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="go栈扩容和栈缩容-连续栈的缺点" tabindex="-1"><a class="header-anchor" href="#go栈扩容和栈缩容-连续栈的缺点"><span>go栈扩容和栈缩容，连续栈的缺点</span></a></h2><p><a href="https://segmentfault.com/a/1190000019570427" target="_blank" rel="noopener noreferrer">https://segmentfault.com/a/1190000019570427<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="golang隐藏技能-怎么访问私有成员" tabindex="-1"><a class="header-anchor" href="#golang隐藏技能-怎么访问私有成员"><span>golang隐藏技能:怎么访问私有成员</span></a></h2><p><a href="https://www.jianshu.com/p/7b3638b47845" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/7b3638b47845<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="_1-0-之前-gm-调度模型" tabindex="-1"><a class="header-anchor" href="#_1-0-之前-gm-调度模型"><span>1.0 之前 GM 调度模型</span></a></h2><p>调度器把 G都分配到 M上，不同的 G在不同的 M并发运行时，都需要向系统申请资源，比如堆栈内存等，因为资源是全局的，就会因为资源竞争照成很多性能损耗。为了解决这一的问题 go 从1.1 版本引入，在运行时系统的时候加入 p 对象，让 P去管理这个 G对象，M想要运行 G，必须绑定 P，才能运行 P所管理</p><p>的 G。</p><p>1．单一全局互斥锁(Sched.Lock)和集中状态存储</p><p>2．Goroutine 传递问题（M 经常在 M 之间传递”可运行”的 goroutine）</p><p>3．每个 M做内存缓存，导致内存占用过高，数据局部性较差</p><p>4．频繁 syscall 调用，导致严重的线程阻塞/解锁，加剧额外的性能损耗。</p><h2 id="gmp-调度流程" tabindex="-1"><a class="header-anchor" href="#gmp-调度流程"><span>GMP 调度流程</span></a></h2><figure><img src="/assets/image/docs/Aspose.Words.51b43265-f45e-4206-a945-0b7c10078cb5.017.jpeg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ul><li>每个 P有个局部队列，局部队列保存待执行的 goroutine(流程2)，当 M绑定的 P的的局部队列已经满了之后就会把 goroutine 放到全局队列(流程2-1)</li><li>每个 P和一个 M绑定，M是真正的执行 P中 goroutine 的实体(流程3)，M 从绑定的 P中的局部队列获取 G来执行</li><li>当 M绑定的 P的局部队列为空时，M会从全局队列获取到本地队列来执行</li></ul><p>G(流程3.1)，当从全局队列中没有获取到可执行的 G时候，M会从其他 P 的局部队列中偷取 G来执行(流程3.2)，这种从其他 P偷的方式称为 work stealing</p><ul><li>当 G因系统调用(syscall)阻塞时会阻塞 M，此时 P会和 M解绑即 hand</li></ul><p>off，并寻找新的 idle 的 M，若没有 idle 的 M就会新建一个 M(流程5.1)。</p><ul><li>当 G因 channel 或者 network I/O 阻塞时，不会阻塞 M，M会寻找其他 runnable 的 G；当阻塞的 G恢复后会重新进入 runnable 进入 P队列等待执行(流程5.3)</li></ul><h2 id="gmp-中-work-stealing-机制" tabindex="-1"><a class="header-anchor" href="#gmp-中-work-stealing-机制"><span>GMP 中 work stealing 机制</span></a></h2><p>存到 P本地队列或者是全局队列。P此时去唤醒一个 M。P继续执行它的执行序。M寻找是否有空闲的 P，如果有则将该 G对象移动到它本身。接下来 M执行一个调度循环(调用 G对象-&gt;执行-&gt;清理线程→继续找新的 Goroutine 执行)。</p><h2 id="gmp-中-hand-off-机制" tabindex="-1"><a class="header-anchor" href="#gmp-中-hand-off-机制"><span>GMP 中 hand off 机制</span></a></h2><p>当本线程 M因为 G进行的系统调用阻塞时，线程释放绑定的 P，把 P转移给其他空闲的 M&#39;执行。当发生上线文切换时，需要对执行现场进行保护，以便下次被调度执行时进行现场恢复。Go调度器 M的栈保存在 G对象上，只需要将 M所需要的寄存器(SP、PC等)保存到 G对象上就可以实现现场保护。当这些寄存器数据被保护起来，就随时可以做上下文切换了，在中断之前把现场保存起来。如果此时 G任务还没有执行完，M可以将任务重新丢到 P的任务队列，等待下一次被调度执行。当再次被调度执行时，M通过访问 G的 vdsoSP、vdsoPC寄存器进行现场恢复(从上次中断位置继续执行)。</p><h2 id="协作式的抢占式调度" tabindex="-1"><a class="header-anchor" href="#协作式的抢占式调度"><span>协作式的抢占式调度</span></a></h2><p>在1.14 版本之前，程序只能依靠 Goroutine 主动让出 CPU 资源才能触发调度，存在问题</p><ul><li>某些 Goroutine 可以长时间占用线程，造成其它 Goroutine 的饥饿</li><li>垃圾回收需要暂停整个程序（Stop-the-world，STW），最长可能需要几分钟的时间，导致整个程序无法工作。</li></ul><h2 id="基于信号的抢占式调度" tabindex="-1"><a class="header-anchor" href="#基于信号的抢占式调度"><span>基于信号的抢占式调度</span></a></h2><p>在任何情况下，Go运行时并行执行（注意，不是并发）的 goroutines 数量是小于等于 P 的数量的。为了提高系统的性能，P 的数量肯定不是越小越好，所以官方默认值就是 CPU 的核心数，设置的过小的话，如果一个持有 P 的 M，由于 P 当前执行的 G 调用了 syscall 而导致 M 被阻塞，那么此时关键点： GO 的调度器是迟钝的，它很可能什么都没做，直到 M 阻塞了相当长时间以后，才会发现有一个 P/M 被 syscall 阻塞了。然后，才会用空闲的 M 来强这个 P。通过 sysmon 监控实现的抢占式调度，最快在20us，最慢在10-20ms才会发现有一个 M 持有 P 并阻塞了。操作系统在1ms 内可以完成很多次线程调度（一般情况1ms可以完成几十次线程调度），Go 发起 IO/syscall 的时候执行该 G 的 M 会阻塞然后被 OS调度走，P什么也不干，sysmon 最慢要10-20ms 才能发现这个阻塞，说不定那时候阻塞已经结束了，宝贵的 P资源就这么被阻塞的 M浪费了。</p><h2 id="gmp-调度过程中存在哪些阻塞" tabindex="-1"><a class="header-anchor" href="#gmp-调度过程中存在哪些阻塞"><span>GMP 调度过程中存在哪些阻塞</span></a></h2><ul><li>I/O，select</li><li>block on syscall</li><li>channel</li><li>等待锁</li><li>runtime.Gosched()</li></ul><h2 id="sysmon-有什么作用" tabindex="-1"><a class="header-anchor" href="#sysmon-有什么作用"><span>sysmon 有什么作用</span></a></h2><p>sysmon 也叫监控线程，变动的周期性检查，好处</p><ul><li>释放闲置超过5 分钟的 span 物理内存；</li><li>如果超过2 分钟没有垃圾回收，强制执行；</li><li>将长时间未处理的 netpoll 添加到全局队列；</li><li>向长时间运行的 G 任务发出抢占调度(超过10ms的 g，会进行 retake)；</li><li>收回因 syscall 长时间阻塞的 P；</li></ul><h2 id="golang面试题-怎么避免内存逃逸" tabindex="-1"><a class="header-anchor" href="#golang面试题-怎么避免内存逃逸"><span>golang面试题：怎么避免内存逃逸？</span></a></h2><p><a href="https://mp.weixin.qq.com/s/VzRTHz1JaDUvNRVB_yJa1A" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/s/VzRTHz1JaDUvNRVB_yJa1A<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="golang面试题-简单聊聊内存逃逸" tabindex="-1"><a class="header-anchor" href="#golang面试题-简单聊聊内存逃逸"><span>golang面试题：简单聊聊内存逃逸？</span></a></h2><p><a href="https://mp.weixin.qq.com/s/wJmztRMB1ZAAIItyMcS0tw" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/s/wJmztRMB1ZAAIItyMcS0tw<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="三色标记原理" tabindex="-1"><a class="header-anchor" href="#三色标记原理"><span>三色标记原理</span></a></h2><p>我们首先看一张图，大概就会对三色标记法有一个大致的了解：</p><figure><img src="/assets/image/docs/Aspose.Words.51b43265-f45e-4206-a945-0b7c10078cb5.018.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>原理：</p><p>首先把所有的对象都放到白色的集合中</p><ul><li>从根节点开始遍历对象，遍历到的白色对象从白色集合中放到灰色集合中</li><li>遍历灰色集合中的对象，把灰色对象引用的白色集合的对象放入到灰色集合中，同时把遍历过的灰色集合中的对象放到黑色的集合中</li><li>循环步骤3，知道灰色集合中没有对象</li><li>步骤4 结束后，白色集合中的对象就是不可达对象，也就是垃圾，进行回收</li></ul><h2 id="插入写屏障" tabindex="-1"><a class="header-anchor" href="#插入写屏障"><span>插入写屏障</span></a></h2><p>golang 的回收没有混合屏障之前，一直是插入写屏障，由于栈赋值没有 hook 的原因，所以栈中没有启用写屏障，所以有 STW。golang 的解决方法是：只是需要在结束时启动 STW来重新扫描栈。这个自然就会导致整个进程的赋值器卡顿，所以后面 golang 是引用混合写屏障解决这个问题。混合写屏障之后，就没有 STW。</p><h2 id="删除写屏障" tabindex="-1"><a class="header-anchor" href="#删除写屏障"><span>删除写屏障</span></a></h2><p>goalng 没有这一步，golang 的内存写屏障是由插入写屏障到混合写屏障过渡的。简单介绍一下，一个对象即使被删除了最后一个指向它的指针也依旧可以活过这一轮，在下一轮 GC中被清理掉。</p><h2 id="写屏障" tabindex="-1"><a class="header-anchor" href="#写屏障"><span>写屏障</span></a></h2><p>Go在进行三色标记的时候并没有 STW，也就是说，此时的对象还是可以进行修改。</p><p>那么我们考虑一下，下面的情况。</p><figure><img src="/assets/image/docs/Aspose.Words.51b43265-f45e-4206-a945-0b7c10078cb5.019.jpeg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>我们在进行三色标记中扫描灰色集合中，扫描到了对象 A，并标记了对象 A的所有引用，这时候，开始扫描对象 D的引用，而此时，另一个 goroutine 修改了 D-&gt;E的引用，变成了如下图所示</p><figure><img src="/assets/image/docs/Aspose.Words.51b43265-f45e-4206-a945-0b7c10078cb5.020.jpeg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>这样会不会导致 E对象就扫描不到了，而被误认为为白色对象，也就是垃圾写屏障就是为了解决这样的问题，引入写屏障后，在上述步骤后， E会被认为是存活的，即使后面 E被 A对象抛弃，E会被在下一轮的 GC中进行回收，这一轮 GC中是不会对对象 E进行回收的。</p><h2 id="混合写屏障" tabindex="-1"><a class="header-anchor" href="#混合写屏障"><span>混合写屏障</span></a></h2><ul><li>混合写屏障继承了插入写屏障的优点，起始无需 STW 打快照，直接并发扫描垃圾即可；</li><li>混合写屏障继承了删除写屏障的优点，赋值器是黑色赋值器，GC期间，任何在栈上创建的新对象，均为黑色。扫描过一次就不需要扫描了，这样就消除了插入写屏障时期最后 STW 的重新扫描栈；</li><li>混合写屏障扫描精度继承了删除写屏障，比插入写屏障更低，随着带来的是 GC 过程全程无 STW；</li><li>混合写屏障扫描栈虽然没有 STW，但是扫描某一个具体的栈的时候，还是要停止这个 goroutine 赋值器的工作的哈（针对一个 goroutine 栈来说，是暂停扫的，要么全灰，要么全黑哈，原子状态切换）。</li></ul><h2 id="gc-触发时机" tabindex="-1"><a class="header-anchor" href="#gc-触发时机"><span>GC 触发时机</span></a></h2><p><strong>主动触发</strong>：调用 runtime.GC</p><p><strong>被动触发</strong>：</p><p>使用系统监控，该触发条件由 runtime.forcegcperiod 变量控制，默认为2 分钟。当超过两分钟没有产生任何 GC 时，强制触发 GC。</p><p>使用步调（Pacing）算法，其核心思想是控制内存增长的比例。如 Go 的 GC 是一种比例 GC,下一次 GC 结束时的堆大小和上一次 GC 存活堆大小成比例.由 GOGC 控制,默认100,即2 倍的关系,200 就是3 倍,</p><p>当 Go新创建的对象所占用的内存大小，除以上次 GC结束后保留下来的对象占用内存大小。</p><h2 id="go-语言中-gc-的流程是什么" tabindex="-1"><a class="header-anchor" href="#go-语言中-gc-的流程是什么"><span>Go 语言中 GC 的流程是什么？</span></a></h2><p>当前版本的 Go 以 STW 为界限，可以将 GC 划分为五个阶段：阶段说明赋值器状态 GCMark标记准备阶段，为并发标记做准备工作，启动写屏障 STWGCMark扫描标记阶段，与赋值器并发执行，写屏障开启并发 GCMarkTermination 标记终止阶段，保证一个周期内标记任务完成，停止写屏障 STWGCoff内存清扫阶段，将需要回收的内存归还到堆中，写屏障关闭并发 GCoff内存归还阶段，将过多的内存归还给操作系统，写屏障关闭并发。</p><h2 id="gc-如何调优" tabindex="-1"><a class="header-anchor" href="#gc-如何调优"><span>GC 如何调优</span></a></h2><p>通过 go tool pprof 和 go tool trace 等工具</p><ul><li>控制内存分配的速度，限制 goroutine 的数量，从而提高赋值器对 CPU 的利用率。</li><li>减少并复用内存，例如使用 sync.Pool 来复用需要频繁创建临时对象，例如提前分配足够的内存来降低多余的拷贝。</li><li>需要时，增大 GOGC 的值，降低 GC 的运行频率。</li></ul><h2 id="go语言的栈空间管理是怎么样的" tabindex="-1"><a class="header-anchor" href="#go语言的栈空间管理是怎么样的"><span>Go语言的栈空间管理是怎么样的?</span></a></h2><p>Go语言的运行环境（runtime）会在goroutine需要的时候动态地分配栈空间，而不是给每个goroutine分配固定大小的内存空间。这样就避免了需要程序员来决定栈的大小。</p><p>分块式的栈是最初Go语言组织栈的方式。当创建一个goroutine的时候，它会分配一个8KB的内存空间来给goroutine的栈使用。我们可能会考虑当这8KB的栈空间被用完的时候该怎么办?</p><p>为了处理这种情况，每个Go函数的开头都有一小段检测代码。这段代码会检查我们是否已经用完了分配的栈空间。如果是的话，它会调用<code>morestack</code>函数。<code>morestack</code>函数分配一块新的内存作为栈空间，并且在这块栈空间的底部填入各种信息（包括之前的那块栈地址）。在分配了这块新的栈空间之后，它会重试刚才造成栈空间不足的函数。这个过程叫做栈分裂（stack split）。</p><p>在新分配的栈底部，还插入了一个叫做<code>lessstack</code>的函数指针。这个函数还没有被调用。这样设置是为了从刚才造成栈空间不足的那个函数返回时做准备的。当我们从那个函数返回时，它会跳转到<code>lessstack</code>。<code>lessstack</code>函数会查看在栈底部存放的数据结构里的信息，然后调整栈指针（stack pointer）。这样就完成了从新的栈块到老的栈块的跳转。接下来，新分配的这个块栈空间就可以被释放掉了。</p><p><code>分块式的栈</code>让我们能够按照需求来扩展和收缩栈的大小。 Go开发者不需要花精力去估计goroutine会用到多大的栈。创建一个新的goroutine的开销也不大。当 Go开发者不知道栈会扩展到多少大时，它也能很好的处理这种情况。</p><p>这一直是之前Go语言管理栈的的方法。但这个方法有一个问题。缩减栈空间是一个开销相对较大的操作。如果在一个循环里有栈分裂，那么它的开销就变得不可忽略了。一个函数会扩展，然后分裂栈。当它返回的时候又会释放之前分配的内存块。如果这些都发生在一个循环里的话，代价是相当大的。 这就是所谓的热分裂问题（hot split problem）。它是Go语言开发者选择新的栈管理方法的主要原因。新的方法叫做<code>栈复制法（stack copying）</code>。</p><p>栈复制法一开始和分块式的栈很像。当goroutine运行并用完栈空间的时候，与之前的方法一样，栈溢出检查会被触发。但是，不像之前的方法那样分配一个新的内存块并链接到老的栈内存块，新的方法会分配一个两倍大的内存块并把老的内存块内容复制到新的内存块里。这样做意味着当栈缩减回之前大小时，我们不需要做任何事情。栈的缩减没有任何代价。而且，当栈再次扩展时，运行环境也不需要再做任何事。它可以重用之前分配的空间。</p><p>栈的复制听起来很容易，但实际操作并非那么简单。存储在栈上的变量的地址可能已经被使用到。也就是说程序使用到了一些指向栈的指针。当移动栈的时候，所有指向栈里内容的指针都会变得无效。然而，指向栈内容的指针自身也必定是保存在栈上的。这是为了保证内存安全的必要条件。否则一个程序就有可能访问一段已经无效的栈空间了。</p><p>因为垃圾回收的需要，我们必须知道栈的哪些部分是被用作指针了。当我们移动栈的时候，我们可以更新栈里的指针让它们指向新的地址。所有相关的指针都会被更新。我们使用了垃圾回收的信息来复制栈，但并不是任何使用栈的函数都有这些信息。因为很大一部分运行环境是用C语言写的，很多被调用的运行环境里的函数并没有指针的信息，所以也就不能够被复制了。当遇到这种情况时，我们只能退回到分块式的栈并支付相应的开销。</p><p>这也是为什么现在运行环境的开发者正在用Go语言重写运行环境的大部分代码。无法用Go语言重写的部分（比如调度器的核心代码和垃圾回收器）会在特殊的栈上运行。这个特殊栈的大小由运行环境的开发者设置。</p><p>这些改变除了使栈复制成为可能，它也允许我们在将来实现并行垃圾回收。</p><p>另外一种不同的栈处理方式就是在虚拟内存中分配大内存段。由于物理内存只是在真正使用时才会被分配，因此看起来好似你可以分配一个大内存段并让操 作系统处理它。下面是这种方法的一些问题</p><p>首先，32位系统只能支持4G字节虚拟内存，并且应用只能用到其中的3G空间。由于同时运行百万goroutines的情况并不少见，因此你很可 能用光虚拟内存，即便我们假设每个goroutine的stack只有8K。</p><p>第二，然而我们可以在64位系统中分配大内存，它依赖于过量内存使用。所谓过量使用是指当你分配的内存大小超出物理内存大小时，依赖操作系统保证 在需要时能够分配出物理内存。然而，允许过量使用可能会导致一些风险。由于一些进程分配了超出机器物理内存大小的内存，如果这些进程使用更多内存 时，操作系统将不得不为它们补充分配内存。这会导致操作系统将一些内存段放入磁盘缓存，这常常会增加不可预测的处理延迟。正是考虑到这个原因，一 些新系统关闭了对过量使用的支持。</p><h2 id="goroutine和channel的作用分别是什么" tabindex="-1"><a class="header-anchor" href="#goroutine和channel的作用分别是什么"><span>Goroutine和Channel的作用分别是什么?</span></a></h2><p>进程是内存资源管理和cpu调度的执行单元。为了有效利用多核处理器的优势，将进程进一步细分，允许一个进程里存在多个线程，这多个线程还是共享同一片内存空间，但cpu调度的最小单元变成了线程。</p><p>那协程又是什么呢，以及与线程的差异性??</p><p>协程，可以看作是轻量级的线程。但与线程不同的是，线程的切换是由操作系统控制的，而协程的切换则是由用户控制的。</p><p>最早支持协程的程序语言应该是lisp方言scheme里的continuation（续延），续延允许scheme保存任意函数调用的现场，保存起来并重新执行。Lua,C#,python等语言也有自己的协程实现。</p><p>Go中的goroutinue就是协程,可以实现并行，多个协程可以在多个处理器同时跑。而协程同一时刻只能在一个处理器上跑（可以把宿主语言想象成单线程的就好了）。 然而,多个goroutine之间的通信是通过channel，而协程的通信是通过yield和resume()操作。</p><p>goroutine非常简单，只需要在函数的调用前面加关键字go即可，例如:</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>go elegance()
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>我们也可以启动5个goroutines分别打印索引。</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>func main() {
    for i:=1;i&lt;5;i++ {
        go func(i int) {
            fmt.Println(i)
        }(i)
    }
    // 停歇5s，保证打印全部结束
    time.Sleep(5*time.Second)
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在分析goroutine执行的随机性和并发性，启动了5个goroutine，再加上main函数的主goroutine，总共有6个goroutines。由于goroutine类似于”守护线程“，异步执行的,如果主goroutine不等待片刻，可能程序就没有输出打印了。</p><p>在Golang中channel则是goroutinues之间进行通信的渠道。</p><p>可以把channel形象比喻为工厂里的传送带,一头的生产者goroutine往传输带放东西,另一头的消费者goroutinue则从输送带取东西。channel实际上是一个有类型的消息队列,遵循先进先出的特点。</p><ol><li>channel的操作符号</li></ol><p>ch &lt;- data 表示data被发送给channel ch；</p><p>data &lt;- ch 表示从channel ch取一个值，然后赋给data。</p><ol><li>阻塞式channel</li></ol><p>channel默认是没有缓冲区的，也就是说，通信是阻塞的。send操作必须等到有消费者accept才算完成。</p><p>应用示例:</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>func main() {
    ch1 := make(chan int)
    go pump(ch1) // pump hangs
    fmt.Println(&lt;-ch1) // prints only 1
}

func pump(ch chan int) {
    for i:= 1; ; i++ {
        ch &lt;- i
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在函数pump()里的channel在接受到第一个元素后就被阻塞了，直到主goroutinue取走了数据。最终channel阻塞在接受第二个元素，程序只打印 1。</p><p>没有缓冲(buffer)的channel只能容纳一个元素，而带有缓冲(buffer)channel则可以非阻塞容纳N个元素。发送数据到缓冲(buffer) channel不会被阻塞，除非channel已满；同样的，从缓冲(buffer) channel取数据也不会被阻塞，除非channel空了。</p><h2 id="怎么查看goroutine的数量" tabindex="-1"><a class="header-anchor" href="#怎么查看goroutine的数量"><span>怎么查看Goroutine的数量?</span></a></h2><p>GOMAXPROCS中控制的是未被阻塞的所有Goroutine,可以被Multiplex到多少个线程上运行,通过GOMAXPROCS可以查看Goroutine的数量。</p><h2 id="相关推荐" tabindex="-1"><a class="header-anchor" href="#相关推荐"><span>相关推荐</span></a></h2><ul><li><p><a href="/%E8%AE%AD%E7%BB%83%E8%90%A5/%E4%BB%8B%E7%BB%8D">还没有offer?专注【突击面试】的【go后端开发】训练营了解一下</a></p></li><li><p><a href="https://golangguide.top/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html" target="_blank" rel="noopener noreferrer">golang进阶面试题八股文合集<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></li><li><p><a href="https://golangguide.top/golang/%E5%B8%B8%E7%94%A8%E5%8C%85%E5%A4%A7%E5%85%A8.html" target="_blank" rel="noopener noreferrer">golang常用标准库第三方库大全<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></li><li><p><a href="https://golangguide.top/golang/%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF.html" target="_blank" rel="noopener noreferrer">golang学习路线<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></li></ul></div><!--[--><!----><!--]--><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/xiaobaiTech/golang-full-stack/edit/main/src/golang/面试题/2.Go进阶.md" rel="noopener noreferrer" target="_blank" aria-label="在 GitHub 上编辑此页" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->在 GitHub 上编辑此页<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><div class="update-time"><span class="label">上次编辑于: </span><!----></div><div class="contributors"><span class="label">贡献者: </span><!--[--><!--[--><span class="contributor" title="email: xiaobaidebug@gmail.com">xiaobai</span>,<!--]--><!--[--><span class="contributor" title="email: 948485496@qq.com">xiaobai-tech</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link nav-link prev" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/1.Go%E5%85%A5%E9%97%A8.html" aria-label="Go 入门面试题汇总"><div class="hint"><span class="arrow start"></span>上一页</div><div class="link"><!---->Go 入门面试题汇总</div></a><!----></nav><div id="comment" class="giscus-wrapper input-top" style="display:block;"><div class="loading-icon-wrapper" style="display:flex;align-items:center;justify-content:center;height:96px"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><!--[--><!----><!--]--><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer">关注公众号「小白debug」,回复「面试」获面试题集pdf</div><div class="vp-copyright">Copyright © 2024 小白debug </div></footer></div><!--]--><!--[--><!--[--><!--]--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-BLI1Dd-8.js" defer></script>
  </body>
</html>
