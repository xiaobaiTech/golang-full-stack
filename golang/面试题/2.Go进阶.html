<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.7" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.23" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://golangguide.top/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html"><meta property="og:site_name" content="golangå…¨æ ˆæŒ‡å—"><meta property="og:title" content="Go è¿›é˜¶é¢è¯•é¢˜"><meta property="og:description" content="Go è¿›é˜¶é¢è¯•é¢˜ golangé¢è¯•å®˜ï¼šfor selectæ—¶ï¼Œå¦‚æœé€šé“å·²ç»å…³é—­ä¼šæ€ä¹ˆæ ·ï¼Ÿå¦‚æœåªæœ‰ä¸€ä¸ªcaseå‘¢ï¼Ÿ https://mp.weixin.qq.com/s/Oa3eExufo2Req_9IrDys-g golangé¢è¯•é¢˜ï¼šå¯¹å·²ç»å…³é—­çš„çš„chanè¿›è¡Œè¯»å†™ï¼Œä¼šæ€ä¹ˆæ ·ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ https://mp.weixin.qq.com/s/izbZ3JR..."><meta property="og:type" content="article"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/xiaobaiTech/image/2.jpg"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-02-13T16:40:11.000Z"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:alt" content="Go è¿›é˜¶é¢è¯•é¢˜"><meta property="article:author" content="å°ç™½debug"><meta property="article:modified_time" content="2024-02-13T16:40:11.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Go è¿›é˜¶é¢è¯•é¢˜","image":["https://cdn.jsdelivr.net/gh/xiaobaiTech/image/2.jpg","https://cdn.jsdelivr.net/gh/xiaobaiTech/image/59-20220314170418653-20220314171133770.jpg","https://cdn.jsdelivr.net/gh/xiaobaiTech/image/65-20220314170611542-20220314171133879.jpg","https://cdn.jsdelivr.net/gh/xiaobaiTech/image/60-20220314170432327.jpg","https://cdn.jsdelivr.net/gh/xiaobaiTech/image/64-20220314170611931-20220314171134611.jpg","https://golangguide.top/assets/image/docs/Aspose.Words.51b43265-f45e-4206-a945-0b7c10078cb5.017.jpeg","https://golangguide.top/assets/image/docs/Aspose.Words.51b43265-f45e-4206-a945-0b7c10078cb5.018.png","https://golangguide.top/assets/image/docs/Aspose.Words.51b43265-f45e-4206-a945-0b7c10078cb5.019.jpeg","https://golangguide.top/assets/image/docs/Aspose.Words.51b43265-f45e-4206-a945-0b7c10078cb5.020.jpeg"],"dateModified":"2024-02-13T16:40:11.000Z","author":[{"@type":"Person","name":"å°ç™½debug","url":"https://xiaobaidebug.top/"}]}</script><title>Go è¿›é˜¶é¢è¯•é¢˜ | golangå…¨æ ˆæŒ‡å—</title><meta name="description" content="Go è¿›é˜¶é¢è¯•é¢˜ golangé¢è¯•å®˜ï¼šfor selectæ—¶ï¼Œå¦‚æœé€šé“å·²ç»å…³é—­ä¼šæ€ä¹ˆæ ·ï¼Ÿå¦‚æœåªæœ‰ä¸€ä¸ªcaseå‘¢ï¼Ÿ https://mp.weixin.qq.com/s/Oa3eExufo2Req_9IrDys-g golangé¢è¯•é¢˜ï¼šå¯¹å·²ç»å…³é—­çš„çš„chanè¿›è¡Œè¯»å†™ï¼Œä¼šæ€ä¹ˆæ ·ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ https://mp.weixin.qq.com/s/izbZ3JR...">
    <link rel="preload" href="/assets/style-BUvE3Hz_.css" as="style"><link rel="stylesheet" href="/assets/style-BUvE3Hz_.css">
    <link rel="modulepreload" href="/assets/app-Bdt4EgWg.js"><link rel="modulepreload" href="/assets/2.Goè¿›é˜¶.html-DoN73MYv.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/assets/index.html-Cve6ftnZ.js" as="script"><link rel="prefetch" href="/assets/å­¦ä¹ è·¯çº¿.html-yzmJNCSc.js" as="script"><link rel="prefetch" href="/assets/ç›®å½•.html-BQDqKRZP.js" as="script"><link rel="prefetch" href="/assets/ä»‹ç».html-ClQCGPw5.js" as="script"><link rel="prefetch" href="/assets/å…¥è¥é¡»çŸ¥.html-C_F5XbbL.js" as="script"><link rel="prefetch" href="/assets/1.Goå…¥é—¨.html-D4rdQyim.js" as="script"><link rel="prefetch" href="/assets/1. Python çš„èµ·æºä¸å‘å±•.html-mi1lZGOW.js" as="script"><link rel="prefetch" href="/assets/10. Python æ ‡å‡†åº“æ¦‚è§ˆ.html-D2qL-Mdx.js" as="script"><link rel="prefetch" href="/assets/11. å­—ç¬¦ä¸²æ“ä½œä¸æ­£åˆ™è¡¨è¾¾å¼.html-BIa7CSWu.js" as="script"><link rel="prefetch" href="/assets/12. åˆ—è¡¨ã€å…ƒç»„ã€å­—å…¸ä¸é›†åˆ.html-2ZllLuTf.js" as="script"><link rel="prefetch" href="/assets/13. æ—¶é—´ä¸æ—¥æœŸå¤„ç†.html-dOiVYQ9Y.js" as="script"><link rel="prefetch" href="/assets/14. å¸¸ç”¨å†…å»ºå‡½æ•°.html-CGUucVL9.js" as="script"><link rel="prefetch" href="/assets/15. ç”Ÿæˆå™¨ä¸è¿­ä»£å™¨.html-B4VEy5HL.js" as="script"><link rel="prefetch" href="/assets/2. å®‰è£…ä¸ç¯å¢ƒé…ç½®.html-DZVibv-i.js" as="script"><link rel="prefetch" href="/assets/3. å˜é‡ã€æ•°æ®ç±»å‹ä¸è¿ç®—ç¬¦.html-B4qrviCC.js" as="script"><link rel="prefetch" href="/assets/4. æ§åˆ¶æµç¨‹ï¼šæ¡ä»¶ä¸å¾ªç¯.html-CD4FyaYf.js" as="script"><link rel="prefetch" href="/assets/5. å‡½æ•°ä¸æ¨¡å—.html-Dx7EUvEH.js" as="script"><link rel="prefetch" href="/assets/6. è¾“å…¥ä¸è¾“å‡º.html-Ii7AEpgP.js" as="script"><link rel="prefetch" href="/assets/7. å¼‚å¸¸å¤„ç†.html-Bc-U5SwE.js" as="script"><link rel="prefetch" href="/assets/8. é¢å‘å¯¹è±¡ç¼–ç¨‹åŸºç¡€.html-Ck7sPoef.js" as="script"><link rel="prefetch" href="/assets/9. æ–‡ä»¶æ“ä½œä¸ç®¡ç†.html-CNwR58pR.js" as="script"><link rel="prefetch" href="/assets/16. çº¿ç¨‹ä¸å¤šçº¿ç¨‹ç¼–ç¨‹.html-N5I6iv26.js" as="script"><link rel="prefetch" href="/assets/17. è¿›ç¨‹ä¸å¤šè¿›ç¨‹ç¼–ç¨‹.html-CbA18Xop.js" as="script"><link rel="prefetch" href="/assets/18. å¼‚æ­¥ç¼–ç¨‹ä¸åç¨‹.html-Dgp99Oct.js" as="script"><link rel="prefetch" href="/assets/19. å¹¶å‘ç¼–ç¨‹ä¸­çš„å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ.html-BOhk8J9J.js" as="script"><link rel="prefetch" href="/assets/20. çº¿ç¨‹å®‰å…¨ä¸é”æœºåˆ¶.html-C5nrpp0Z.js" as="script"><link rel="prefetch" href="/assets/21. è¿›ç¨‹é—´é€šä¿¡ä¸å…±äº«èµ„æº.html-Csy7KSef.js" as="script"><link rel="prefetch" href="/assets/22. å¼‚æ­¥ç¼–ç¨‹æ¡†æ¶æ¯”è¾ƒ.html-BzIwTg_c.js" as="script"><link rel="prefetch" href="/assets/23. GIL ä¸ Python å¤šçº¿ç¨‹.html-vn8x_lTx.js" as="script"><link rel="prefetch" href="/assets/24. å¤šè¿›ç¨‹ä¸å¤šçº¿ç¨‹çš„é€‰æ‹©.html-Beo6oA6_.js" as="script"><link rel="prefetch" href="/assets/25. asyncio åº“ä¸å¼‚æ­¥ IO æ¨¡å‹.html-CuNUq-67.js" as="script"><link rel="prefetch" href="/assets/26. å¤šè¿›ç¨‹æ± ä¸çº¿ç¨‹æ± .html-C19y4jIN.js" as="script"><link rel="prefetch" href="/assets/27. å¹¶è¡Œä¸å¹¶å‘çš„åŒºåˆ«.html-KcdhsZWm.js" as="script"><link rel="prefetch" href="/assets/28. å¼‚æ­¥ç¼–ç¨‹ä¸­çš„å›è°ƒåœ°ç‹±é—®é¢˜.html-BSPOLVby.js" as="script"><link rel="prefetch" href="/assets/29. é«˜å¹¶å‘ä¸é«˜æ€§èƒ½çš„è®¾è®¡åŸåˆ™.html-RWyFPlUS.js" as="script"><link rel="prefetch" href="/assets/30. åˆ†å¸ƒå¼è®¡ç®—ä¸ä»»åŠ¡è°ƒåº¦.html-BYy2mAC2.js" as="script"><link rel="prefetch" href="/assets/31. è¿­ä»£å™¨ä¸ç”Ÿæˆå™¨.html-D2eQPPr-.js" as="script"><link rel="prefetch" href="/assets/32. è£…é¥°å™¨ä¸é—­åŒ….html-x6Mw2B5o.js" as="script"><link rel="prefetch" href="/assets/33. å…ƒç±»ä¸ç±»è£…é¥°å™¨.html-Bvf5Sz63.js" as="script"><link rel="prefetch" href="/assets/34. è®¾è®¡æ¨¡å¼ä¸æœ€ä½³å®è·µ.html-BOoqZYEL.js" as="script"><link rel="prefetch" href="/assets/35. å‡½æ•°å¼ç¼–ç¨‹é£æ ¼.html-DPHOUFR3.js" as="script"><link rel="prefetch" href="/assets/36. Python ä»£ç ä¼˜åŒ–ä¸æ€§èƒ½æå‡.html-BCfTyKxx.js" as="script"><link rel="prefetch" href="/assets/37. é«˜çº§å‡½æ•°ä¸ Lambda è¡¨è¾¾å¼.html-D29U5Oiq.js" as="script"><link rel="prefetch" href="/assets/38. é­”æœ¯æ–¹æ³•ä¸å…ƒç¼–ç¨‹.html-BIj9lTtI.js" as="script"><link rel="prefetch" href="/assets/39. åŠ¨æ€ç±»å‹ä¸é™æ€ç±»å‹è¯­è¨€å¯¹æ¯”.html-Bk0o_gMR.js" as="script"><link rel="prefetch" href="/assets/40. é«˜çº§æ¨¡å—ä¸æ‰©å±•.html-CzU1TG4m.js" as="script"><link rel="prefetch" href="/assets/41. ç¼–ç è§„èŒƒä¸æ–‡æ¡£.html-GMxwMHUQ.js" as="script"><link rel="prefetch" href="/assets/42. ç‰ˆæœ¬æ§åˆ¶ä¸ Git.html-B0D_ElZL.js" as="script"><link rel="prefetch" href="/assets/43. è™šæ‹Ÿç¯å¢ƒä¸ä¾èµ–ç®¡ç†.html-NsKFB24S.js" as="script"><link rel="prefetch" href="/assets/44. IDE ä¸ç¼–è¾‘å™¨æ¨è.html-5vloSP6x.js" as="script"><link rel="prefetch" href="/assets/45. è°ƒè¯•å·¥å…·ä¸æŠ€å·§.html-BOSScOuK.js" as="script"><link rel="prefetch" href="/assets/46. å•å…ƒæµ‹è¯•ä¸é›†æˆæµ‹è¯•.html-Dqirmdcn.js" as="script"><link rel="prefetch" href="/assets/47. é™æ€ä»£ç åˆ†æä¸ Lint å·¥å…·.html-n73lYn3P.js" as="script"><link rel="prefetch" href="/assets/48. ä»£ç é‡æ„ä¸ä¼˜åŒ–å·¥å…·.html-CeXfSVt-.js" as="script"><link rel="prefetch" href="/assets/49. CI-CD ä¸æŒç»­é›†æˆ.html-BnNv6XjC.js" as="script"><link rel="prefetch" href="/assets/50. æ–‡æ¡£ç”Ÿæˆä¸è‡ªåŠ¨åŒ–éƒ¨ç½².html-BqGewLku.js" as="script"><link rel="prefetch" href="/assets/51. å¸¸è§ç®—æ³•æ¦‚è¿°.html-h2U02RqF.js" as="script"><link rel="prefetch" href="/assets/52. æ’åºä¸æœç´¢ç®—æ³•.html-DOjjUhWU.js" as="script"><link rel="prefetch" href="/assets/53. æ•°æ®ç»“æ„ä¸ç®—æ³•è®¾è®¡.html-u8RI-WLR.js" as="script"><link rel="prefetch" href="/assets/54. åŠ¨æ€è§„åˆ’ä¸è´ªå¿ƒç®—æ³•.html-BhYPTnWY.js" as="script"><link rel="prefetch" href="/assets/55. å›¾è®ºä¸ç½‘ç»œæµç®—æ³•.html-DAsjJo9r.js" as="script"><link rel="prefetch" href="/assets/56. å­—ç¬¦ä¸²åŒ¹é…ä¸å¤„ç†ç®—æ³•.html-tNkCvBE2.js" as="script"><link rel="prefetch" href="/assets/57. æ•°è®ºä¸ç»„åˆæ•°å­¦.html-Du7Z_lr3.js" as="script"><link rel="prefetch" href="/assets/58. å¤æ‚åº¦åˆ†æä¸ç®—æ³•è¯„ä¼°.html-CFHwLrZV.js" as="script"><link rel="prefetch" href="/assets/59. ç®—æ³•å®ç°ä¸ä¼˜åŒ–æŠ€å·§.html-C4HzmHE-.js" as="script"><link rel="prefetch" href="/assets/60. å¸¸ç”¨æ•°æ®ç»“æ„å®ç°.html-BocJ48ou.js" as="script"><link rel="prefetch" href="/assets/61. æ•°æ®è·å–ä¸æ¸…æ´—.html-BeoPyY8c.js" as="script"><link rel="prefetch" href="/assets/62. æ•°æ®å¤„ç†ä¸åˆ†æ.html-BNiMo-XZ.js" as="script"><link rel="prefetch" href="/assets/63. æ•°æ®å¯è§†åŒ–.html-Bkj3vtYI.js" as="script"><link rel="prefetch" href="/assets/64. æœºå™¨å­¦ä¹ å…¥é—¨.html-DWVUz-k2.js" as="script"><link rel="prefetch" href="/assets/65. æ•°æ®æŒ–æ˜ä¸é¢„æµ‹å»ºæ¨¡.html-F_c0eyt2.js" as="script"><link rel="prefetch" href="/assets/66. æ•°æ®åº“ä¸æ•°æ®ä»“åº“.html-BeAP--Te.js" as="script"><link rel="prefetch" href="/assets/67. å¤§æ•°æ®ä¸åˆ†å¸ƒå¼è®¡ç®—.html-B1O1rrsm.js" as="script"><link rel="prefetch" href="/assets/68. è‡ªç„¶è¯­è¨€å¤„ç†åŸºç¡€.html-DLFjjjbM.js" as="script"><link rel="prefetch" href="/assets/69. å›¾åƒå¤„ç†ä¸è®¡ç®—æœºè§†è§‰.html-DEr8gsmq.js" as="script"><link rel="prefetch" href="/assets/70. æ—¶é—´åºåˆ—åˆ†æä¸é¢„æµ‹.html-CrMwGN5y.js" as="script"><link rel="prefetch" href="/assets/71. Linux åŸºç¡€ä¸å¸¸ç”¨å‘½ä»¤.html-BfCOTRX5.js" as="script"><link rel="prefetch" href="/assets/72. ç½‘ç»œåŸºç¡€ä¸å¸¸ç”¨åè®®.html-D1Kzvx3N.js" as="script"><link rel="prefetch" href="/assets/73. Web æœåŠ¡å™¨ä¸éƒ¨ç½².html-HrokmZI9.js" as="script"><link rel="prefetch" href="/assets/74. æ•°æ®åº“åŸºç¡€ä¸ç®¡ç†.html-DVxTtq_n.js" as="script"><link rel="prefetch" href="/assets/75. å®¹å™¨åŒ–ä¸ Docker.html-D5g3bJRe.js" as="script"><link rel="prefetch" href="/assets/76. è‡ªåŠ¨åŒ–è¿ç»´ä¸é…ç½®ç®¡ç†.html-CdPvvjFX.js" as="script"><link rel="prefetch" href="/assets/77. è´Ÿè½½å‡è¡¡ä¸é«˜å¯ç”¨æ€§.html-c8D3TuzW.js" as="script"><link rel="prefetch" href="/assets/78. æ—¥å¿—ä¸ç›‘æ§ç³»ç»Ÿ.html-CmbV6LkB.js" as="script"><link rel="prefetch" href="/assets/79. å®‰å…¨ä¸æ¼æ´ç®¡ç†.html-BWys94R1.js" as="script"><link rel="prefetch" href="/assets/80. äº‘è®¡ç®—ä¸äº‘æœåŠ¡.html--wD93rrG.js" as="script"><link rel="prefetch" href="/assets/81. NumPy ä¸ SciPy.html-c8AuSL7R.js" as="script"><link rel="prefetch" href="/assets/82. Pandas.html-CIID96KH.js" as="script"><link rel="prefetch" href="/assets/83. Matplotlib ä¸ Seaborn.html-LMvaePdY.js" as="script"><link rel="prefetch" href="/assets/84. Requests ä¸ Beautiful Soup.html-CqxwU8VR.js" as="script"><link rel="prefetch" href="/assets/85. Django ä¸ Flask.html-DvgBtkkZ.js" as="script"><link rel="prefetch" href="/assets/86. SQLAlchemy ä¸ ORM.html-B9gT_fGR.js" as="script"><link rel="prefetch" href="/assets/87. Celery ä¸ä»»åŠ¡é˜Ÿåˆ—.html-bkd3pbbd.js" as="script"><link rel="prefetch" href="/assets/88. TensorFlow ä¸æœºå™¨å­¦ä¹ åº“.html-N6OsOfyL.js" as="script"><link rel="prefetch" href="/assets/89. PyQT ä¸ GUI å¼€å‘.html-DFpap7DQ.js" as="script"><link rel="prefetch" href="/assets/90. GIS ä¸åœ°ç†ä¿¡æ¯å¤„ç†.html-DBDWXRbY.js" as="script"><link rel="prefetch" href="/assets/100.  é¡¹ç›®æ€»ç»“ä¸å›é¡¾.html-C581jj6s.js" as="script"><link rel="prefetch" href="/assets/91. é¡¹ç›®ä»‹ç»ä¸éœ€æ±‚åˆ†æ.html-C3hWw6E3.js" as="script"><link rel="prefetch" href="/assets/92. é¡¹ç›®æ¶æ„ä¸è®¾è®¡.html-CX8dXddi.js" as="script"><link rel="prefetch" href="/assets/93. ä»£ç å®ç°ä¸æµ‹è¯•.html-BXckpsbN.js" as="script"><link rel="prefetch" href="/assets/94. é¡¹ç›®éƒ¨ç½²ä¸ç»´æŠ¤.html-CFyroRXD.js" as="script"><link rel="prefetch" href="/assets/95. ç”¨æˆ·åé¦ˆä¸è¿­ä»£ä¼˜åŒ–.html-DwUP2mtk.js" as="script"><link rel="prefetch" href="/assets/96. é¡¹ç›®æ–‡æ¡£ä¸çŸ¥è¯†åˆ†äº«.html-DOE9_Opr.js" as="script"><link rel="prefetch" href="/assets/97. å›¢é˜Ÿåä½œä¸ç‰ˆæœ¬æ§åˆ¶.html-NZh_jt7W.js" as="script"><link rel="prefetch" href="/assets/98. é¡¹ç›®ä¸Šçº¿ä¸å‘å¸ƒ.html-B9cK3JLP.js" as="script"><link rel="prefetch" href="/assets/99. æ•…éšœå¤„ç†ä¸ç´§æ€¥ä¿®å¤.html-YGbNW2Ke.js" as="script"><link rel="prefetch" href="/assets/é¢è¯•é¢˜.html-C3re8-ip.js" as="script"><link rel="prefetch" href="/assets/é¢è¯•é¢˜.html-DVegr030.js" as="script"><link rel="prefetch" href="/assets/é¢è¯•é¢˜.html-BPvzD7fH.js" as="script"><link rel="prefetch" href="/assets/é¢è¯•é¢˜.html-2Cn4R9AO.js" as="script"><link rel="prefetch" href="/assets/é¢è¯•é¢˜.html-C8zuUNWs.js" as="script"><link rel="prefetch" href="/assets/é¢è¯•é¢˜.html-YvmLsUm4.js" as="script"><link rel="prefetch" href="/assets/é¢è¯•é¢˜.html-Br5aUrLu.js" as="script"><link rel="prefetch" href="/assets/é¢è¯•é¢˜.html-CoCztLmp.js" as="script"><link rel="prefetch" href="/assets/é¢è¯•é¢˜.html-9Dgplr7w.js" as="script"><link rel="prefetch" href="/assets/é¢è¯•é¢˜.html-gQu0mIDD.js" as="script"><link rel="prefetch" href="/assets/é¢è¯•é¢˜.html-Dp2ZzPxv.js" as="script"><link rel="prefetch" href="/assets/é¢è¯•é¢˜.html-BdjAaXgR.js" as="script"><link rel="prefetch" href="/assets/é¢è¯•é¢˜.html-bp0XoI_o.js" as="script"><link rel="prefetch" href="/assets/é¢è¯•é¢˜.html-Bkg50s5k.js" as="script"><link rel="prefetch" href="/assets/404.html-DNlrU6We.js" as="script"><link rel="prefetch" href="/assets/index.html-Duz4ZL6C.js" as="script"><link rel="prefetch" href="/assets/index.html-Cnmv_Fw1.js" as="script"><link rel="prefetch" href="/assets/index.html-CsomL3yM.js" as="script"><link rel="prefetch" href="/assets/index.html-DbHloltK.js" as="script"><link rel="prefetch" href="/assets/index.html-BUTiGtDN.js" as="script"><link rel="prefetch" href="/assets/index.html-BVGzJNlZ.js" as="script"><link rel="prefetch" href="/assets/index.html-DEXMjALv.js" as="script"><link rel="prefetch" href="/assets/index.html-DkAnZl73.js" as="script"><link rel="prefetch" href="/assets/index.html-C85QZgcW.js" as="script"><link rel="prefetch" href="/assets/index.html-BILkBt6n.js" as="script"><link rel="prefetch" href="/assets/index.html-BMBvVJuP.js" as="script"><link rel="prefetch" href="/assets/index.html-B8EMzmyB.js" as="script"><link rel="prefetch" href="/assets/index.html-CP0Fd2Nj.js" as="script"><link rel="prefetch" href="/assets/index.html-DyECoiWe.js" as="script"><link rel="prefetch" href="/assets/index.html-D08GlwGX.js" as="script"><link rel="prefetch" href="/assets/index.html-Bg44JKhv.js" as="script"><link rel="prefetch" href="/assets/index.html-BCxjccPp.js" as="script"><link rel="prefetch" href="/assets/index.html-D1Ojn0dS.js" as="script"><link rel="prefetch" href="/assets/index.html-BztODG3o.js" as="script"><link rel="prefetch" href="/assets/index.html-DCvHjCwM.js" as="script"><link rel="prefetch" href="/assets/index.html-ixrzP7fM.js" as="script"><link rel="prefetch" href="/assets/index.html-g-75u2-V.js" as="script"><link rel="prefetch" href="/assets/index.html-Cqbui1UW.js" as="script"><link rel="prefetch" href="/assets/index.html-u_O0ADsy.js" as="script"><link rel="prefetch" href="/assets/index.html-DeWgHqo2.js" as="script"><link rel="prefetch" href="/assets/index.html-BUFLSiYB.js" as="script"><link rel="prefetch" href="/assets/index.html-CYuAEOIt.js" as="script"><link rel="prefetch" href="/assets/index.html-CzpyNYV7.js" as="script"><link rel="prefetch" href="/assets/index.html-BOt9svvQ.js" as="script"><link rel="prefetch" href="/assets/index.html-B0buPwnn.js" as="script"><link rel="prefetch" href="/assets/index.html-C_NdXQpR.js" as="script"><link rel="prefetch" href="/assets/giscus-7BMGhbDA.js" as="script"><link rel="prefetch" href="/assets/auto-C0MMSKEI.js" as="script"><link rel="prefetch" href="/assets/index-DA4axBLK.js" as="script"><link rel="prefetch" href="/assets/flowchart-966sEcGG.js" as="script"><link rel="prefetch" href="/assets/mermaid.core-GJMeW-uB.js" as="script"><link rel="prefetch" href="/assets/reveal.esm-9nNZbZvi.js" as="script"><link rel="prefetch" href="/assets/markdown.esm-BG2Xu2Hd.js" as="script"><link rel="prefetch" href="/assets/vue-repl-z9vdVnbs.js" as="script"><link rel="prefetch" href="/assets/codemirror-editor-B-l9ZQqQ.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-SzV8tJDW.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo" src="/new_logo.png" alt><!----><span class="vp-site-name hide-in-pad">golangå…¨æ ˆæŒ‡å—</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><a class="route-link nav-link" href="/" aria-label="ä¸»é¡µ"><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span>ä¸»é¡µ<!----></a></div><div class="nav-item hide-in-mobile"><a class="route-link nav-link" href="/python/" aria-label="Python"><!---->Python<!----></a></div><div class="nav-item hide-in-mobile"><a class="route-link nav-link active" href="/golang/" aria-label="Golang"><!---->Golang<!----></a></div><div class="nav-item hide-in-mobile"><a class="route-link nav-link" href="/%E8%AE%AD%E7%BB%83%E8%90%A5/" aria-label="è®­ç»ƒè¥"><!---->è®­ç»ƒè¥<!----></a></div><div class="nav-item hide-in-mobile"><a class="route-link nav-link" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" aria-label="è®¡ç®—æœºåŸºç¡€"><!---->è®¡ç®—æœºåŸºç¡€<!----></a></div><div class="nav-item hide-in-mobile"><a class="route-link nav-link" href="/%E6%9E%B6%E6%9E%84/" aria-label="æ¶æ„"><!---->æ¶æ„<!----></a></div><div class="nav-item hide-in-mobile"><a class="route-link nav-link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/" aria-label="ä¸­é—´ä»¶"><!---->ä¸­é—´ä»¶<!----></a></div><div class="nav-item hide-in-mobile"><a href="https://xiaobaidebug.top/" rel="noopener noreferrer" target="_blank" aria-label="blog" class="nav-link"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span>blog<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="nav-item hide-in-mobile"><a href="https://golangguide.top/sitemap.xml" rel="noopener noreferrer" target="_blank" aria-label="sitemap" class="nav-link"><span class="font-icon icon fa-fw fa-sm fas fa-blog" style=""></span>sitemap<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><div class="nav-item vp-repo"><a class="vp-repo-link" href="https://github.com/xiaobaiTech/golang-full-stack" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading clickable active"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span><a class="route-link nav-link vp-sidebar-title" href="/golang/golang/" aria-label="golangçŸ¥è¯†ä½“ç³»"><!---->golangçŸ¥è¯†ä½“ç³»<!----></a><!----></p><ul class="vp-sidebar-links"><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/golang/%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF.html" aria-label="å­¦ä¹ è·¯çº¿"><!---->å­¦ä¹ è·¯çº¿<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable active" type="button"><!----><span class="vp-sidebar-title">é¢è¯•é¢˜</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/1.Go%E5%85%A5%E9%97%A8.html" aria-label="Go å…¥é—¨é¢è¯•é¢˜"><!---->Go å…¥é—¨é¢è¯•é¢˜<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link active vp-sidebar-link vp-sidebar-page active" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html" aria-label="Go è¿›é˜¶é¢è¯•é¢˜"><!---->Go è¿›é˜¶é¢è¯•é¢˜<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#golangé¢è¯•å®˜-for-selectæ—¶-å¦‚æœé€šé“å·²ç»å…³é—­ä¼šæ€ä¹ˆæ ·-å¦‚æœåªæœ‰ä¸€ä¸ªcaseå‘¢" aria-label="golangé¢è¯•å®˜ï¼šfor selectæ—¶ï¼Œå¦‚æœé€šé“å·²ç»å…³é—­ä¼šæ€ä¹ˆæ ·ï¼Ÿå¦‚æœåªæœ‰ä¸€ä¸ªcaseå‘¢ï¼Ÿ"><!---->golangé¢è¯•å®˜ï¼šfor selectæ—¶ï¼Œå¦‚æœé€šé“å·²ç»å…³é—­ä¼šæ€ä¹ˆæ ·ï¼Ÿå¦‚æœåªæœ‰ä¸€ä¸ªcaseå‘¢ï¼Ÿ<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#golangé¢è¯•é¢˜-å¯¹å·²ç»å…³é—­çš„çš„chanè¿›è¡Œè¯»å†™-ä¼šæ€ä¹ˆæ ·-ä¸ºä»€ä¹ˆ" aria-label="golangé¢è¯•é¢˜ï¼šå¯¹å·²ç»å…³é—­çš„çš„chanè¿›è¡Œè¯»å†™ï¼Œä¼šæ€ä¹ˆæ ·ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ"><!---->golangé¢è¯•é¢˜ï¼šå¯¹å·²ç»å…³é—­çš„çš„chanè¿›è¡Œè¯»å†™ï¼Œä¼šæ€ä¹ˆæ ·ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#golangé¢è¯•é¢˜-å¯¹æœªåˆå§‹åŒ–çš„çš„chanè¿›è¡Œè¯»å†™-ä¼šæ€ä¹ˆæ ·-ä¸ºä»€ä¹ˆ" aria-label="golangé¢è¯•é¢˜ï¼šå¯¹æœªåˆå§‹åŒ–çš„çš„chanè¿›è¡Œè¯»å†™ï¼Œä¼šæ€ä¹ˆæ ·ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ"><!---->golangé¢è¯•é¢˜ï¼šå¯¹æœªåˆå§‹åŒ–çš„çš„chanè¿›è¡Œè¯»å†™ï¼Œä¼šæ€ä¹ˆæ ·ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#golangé¢è¯•é¢˜-èƒ½è¯´è¯´uintptrå’Œunsafe-pointerçš„åŒºåˆ«å—" aria-label="golangé¢è¯•é¢˜ï¼šèƒ½è¯´è¯´uintptrå’Œunsafe.Pointerçš„åŒºåˆ«å—ï¼Ÿ"><!---->golangé¢è¯•é¢˜ï¼šèƒ½è¯´è¯´uintptrå’Œunsafe.Pointerçš„åŒºåˆ«å—ï¼Ÿ<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#golang-é¢è¯•é¢˜-reflect-åå°„åŒ…-å¦‚ä½•è·å–å­—æ®µ-tag-ä¸ºä»€ä¹ˆ-json-åŒ…ä¸èƒ½å¯¼å‡ºç§æœ‰å˜é‡çš„-tag" aria-label="golang é¢è¯•é¢˜ï¼šreflectï¼ˆåå°„åŒ…ï¼‰å¦‚ä½•è·å–å­—æ®µ tagï¼Ÿä¸ºä»€ä¹ˆ json åŒ…ä¸èƒ½å¯¼å‡ºç§æœ‰å˜é‡çš„ tagï¼Ÿ"><!---->golang é¢è¯•é¢˜ï¼šreflectï¼ˆåå°„åŒ…ï¼‰å¦‚ä½•è·å–å­—æ®µ tagï¼Ÿä¸ºä»€ä¹ˆ json åŒ…ä¸èƒ½å¯¼å‡ºç§æœ‰å˜é‡çš„ tagï¼Ÿ<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#golang-gc-æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆ" aria-label="Golang GC æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆ?"><!---->Golang GC æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆ?<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#golang-ä¸­-goroutine-å¦‚ä½•è°ƒåº¦" aria-label="Golang ä¸­ Goroutine å¦‚ä½•è°ƒåº¦?"><!---->Golang ä¸­ Goroutine å¦‚ä½•è°ƒåº¦?<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#å¹¶å‘ç¼–ç¨‹æ¦‚å¿µæ˜¯ä»€ä¹ˆ" aria-label="å¹¶å‘ç¼–ç¨‹æ¦‚å¿µæ˜¯ä»€ä¹ˆï¼Ÿ"><!---->å¹¶å‘ç¼–ç¨‹æ¦‚å¿µæ˜¯ä»€ä¹ˆï¼Ÿ<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#ä¸‹é¢è¿™æ®µä»£ç æœ‰ä»€ä¹ˆé”™è¯¯å—" aria-label="ä¸‹é¢è¿™æ®µä»£ç æœ‰ä»€ä¹ˆé”™è¯¯å—ï¼Ÿ"><!---->ä¸‹é¢è¿™æ®µä»£ç æœ‰ä»€ä¹ˆé”™è¯¯å—ï¼Ÿ<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#ä¸‹é¢å‡ æ®µä»£ç èƒ½å¦é€šè¿‡ç¼–è¯‘-å¦‚æœèƒ½-è¾“å‡ºä»€ä¹ˆ" aria-label="ä¸‹é¢å‡ æ®µä»£ç èƒ½å¦é€šè¿‡ç¼–è¯‘ï¼Œå¦‚æœèƒ½ï¼Œè¾“å‡ºä»€ä¹ˆ?"><!---->ä¸‹é¢å‡ æ®µä»£ç èƒ½å¦é€šè¿‡ç¼–è¯‘ï¼Œå¦‚æœèƒ½ï¼Œè¾“å‡ºä»€ä¹ˆ?<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#ä¸‹é¢èƒ½å¦é€šè¿‡ç¼–è¯‘" aria-label="ä¸‹é¢èƒ½å¦é€šè¿‡ç¼–è¯‘?"><!---->ä¸‹é¢èƒ½å¦é€šè¿‡ç¼–è¯‘?<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#é€šè¿‡æŒ‡é’ˆå˜é‡-p-è®¿é—®å…¶æˆå‘˜å˜é‡-name-æœ‰å“ªå‡ ç§æ–¹å¼" aria-label="é€šè¿‡æŒ‡é’ˆå˜é‡ p è®¿é—®å…¶æˆå‘˜å˜é‡ nameï¼Œæœ‰å“ªå‡ ç§æ–¹å¼ï¼Ÿ"><!---->é€šè¿‡æŒ‡é’ˆå˜é‡ p è®¿é—®å…¶æˆå‘˜å˜é‡ nameï¼Œæœ‰å“ªå‡ ç§æ–¹å¼ï¼Ÿ<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#å…³äºå­—ç¬¦ä¸²è¿æ¥-ä¸‹é¢è¯­æ³•æ­£ç¡®çš„æ˜¯" aria-label="å…³äºå­—ç¬¦ä¸²è¿æ¥ï¼Œä¸‹é¢è¯­æ³•æ­£ç¡®çš„æ˜¯ï¼Ÿ"><!---->å…³äºå­—ç¬¦ä¸²è¿æ¥ï¼Œä¸‹é¢è¯­æ³•æ­£ç¡®çš„æ˜¯ï¼Ÿ<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#å…³äºiota-ä¸‹é¢ä»£ç è¾“å‡ºä»€ä¹ˆ" aria-label="å…³äºiotaï¼Œä¸‹é¢ä»£ç è¾“å‡ºä»€ä¹ˆ?"><!---->å…³äºiotaï¼Œä¸‹é¢ä»£ç è¾“å‡ºä»€ä¹ˆ?<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#mutex-å‡ ç§çŠ¶æ€" aria-label="Mutex å‡ ç§çŠ¶æ€"><!---->Mutex å‡ ç§çŠ¶æ€<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#mutex-æ­£å¸¸æ¨¡å¼å’Œé¥¥é¥¿æ¨¡å¼" aria-label="Mutex æ­£å¸¸æ¨¡å¼å’Œé¥¥é¥¿æ¨¡å¼"><!---->Mutex æ­£å¸¸æ¨¡å¼å’Œé¥¥é¥¿æ¨¡å¼<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#mutex-å…è®¸è‡ªæ—‹çš„æ¡ä»¶" aria-label="Mutex å…è®¸è‡ªæ—‹çš„æ¡ä»¶"><!---->Mutex å…è®¸è‡ªæ—‹çš„æ¡ä»¶<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#rwmutex-å®ç°" aria-label="RWMutex å®ç°"><!---->RWMutex å®ç°<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#rwmutex-æ³¨æ„äº‹é¡¹" aria-label="RWMutex æ³¨æ„äº‹é¡¹"><!---->RWMutex æ³¨æ„äº‹é¡¹<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#cond-æ˜¯ä»€ä¹ˆ" aria-label="Cond æ˜¯ä»€ä¹ˆ"><!---->Cond æ˜¯ä»€ä¹ˆ<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#broadcast-å’Œ-signal-åŒºåˆ«" aria-label="Broadcast å’Œ Signal åŒºåˆ«"><!---->Broadcast å’Œ Signal åŒºåˆ«<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#cond-ä¸­-wait-ä½¿ç”¨" aria-label="Cond ä¸­ Wait ä½¿ç”¨"><!---->Cond ä¸­ Wait ä½¿ç”¨<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#waitgroup-ç”¨æ³•" aria-label="WaitGroup ç”¨æ³•"><!---->WaitGroup ç”¨æ³•<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#waitgroup-å®ç°åŸç†" aria-label="WaitGroup å®ç°åŸç†"><!---->WaitGroup å®ç°åŸç†<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#ä¸‹é¢ä»£ç è¾“å‡ºä»€ä¹ˆ" aria-label="ä¸‹é¢ä»£ç è¾“å‡ºä»€ä¹ˆï¼Ÿ"><!---->ä¸‹é¢ä»£ç è¾“å‡ºä»€ä¹ˆï¼Ÿ<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#ä»€ä¹ˆæ˜¯-sync-once" aria-label="ä»€ä¹ˆæ˜¯ sync.Once"><!---->ä»€ä¹ˆæ˜¯ sync.Once<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#ä»€ä¹ˆæ“ä½œå«åšåŸå­æ“ä½œ" aria-label="ä»€ä¹ˆæ“ä½œå«åšåŸå­æ“ä½œ"><!---->ä»€ä¹ˆæ“ä½œå«åšåŸå­æ“ä½œ<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#åŸå­æ“ä½œå’Œé”çš„åŒºåˆ«" aria-label="åŸå­æ“ä½œå’Œé”çš„åŒºåˆ«"><!---->åŸå­æ“ä½œå’Œé”çš„åŒºåˆ«<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#ä»€ä¹ˆæ˜¯-cas" aria-label="ä»€ä¹ˆæ˜¯ CAS"><!---->ä»€ä¹ˆæ˜¯ CAS<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#sync-pool-æœ‰ä»€ä¹ˆç”¨" aria-label="sync.Pool æœ‰ä»€ä¹ˆç”¨"><!---->sync.Pool æœ‰ä»€ä¹ˆç”¨<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#goroutine-å®šä¹‰" aria-label="Goroutine å®šä¹‰"><!---->Goroutine å®šä¹‰<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#gmp-æŒ‡çš„æ˜¯ä»€ä¹ˆ" aria-label="GMP æŒ‡çš„æ˜¯ä»€ä¹ˆ"><!---->GMP æŒ‡çš„æ˜¯ä»€ä¹ˆ<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#ç»™å¤§å®¶ä¸¢è„¸äº†-ç”¨äº†ä¸‰å¹´golang-æˆ‘è¿˜æ˜¯æ²¡ç­”å¯¹è¿™é“å†…å­˜æ³„æ¼é¢˜" aria-label="ç»™å¤§å®¶ä¸¢è„¸äº†ï¼Œç”¨äº†ä¸‰å¹´golangï¼Œæˆ‘è¿˜æ˜¯æ²¡ç­”å¯¹è¿™é“å†…å­˜æ³„æ¼é¢˜"><!---->ç»™å¤§å®¶ä¸¢è„¸äº†ï¼Œç”¨äº†ä¸‰å¹´golangï¼Œæˆ‘è¿˜æ˜¯æ²¡ç­”å¯¹è¿™é“å†…å­˜æ³„æ¼é¢˜<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#ä½ ä¸€å®šä¼šé‡åˆ°çš„å†…å­˜å›æ”¶ç­–ç•¥å¯¼è‡´çš„ç–‘ä¼¼å†…å­˜æ³„æ¼çš„é—®é¢˜" aria-label="ä½ ä¸€å®šä¼šé‡åˆ°çš„å†…å­˜å›æ”¶ç­–ç•¥å¯¼è‡´çš„ç–‘ä¼¼å†…å­˜æ³„æ¼çš„é—®é¢˜"><!---->ä½ ä¸€å®šä¼šé‡åˆ°çš„å†…å­˜å›æ”¶ç­–ç•¥å¯¼è‡´çš„ç–‘ä¼¼å†…å­˜æ³„æ¼çš„é—®é¢˜<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#gmpé‡Œä¸ºä»€ä¹ˆè¦æœ‰p" aria-label="GMPé‡Œä¸ºä»€ä¹ˆè¦æœ‰P?"><!---->GMPé‡Œä¸ºä»€ä¹ˆè¦æœ‰P?<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#goæ ˆæ‰©å®¹å’Œæ ˆç¼©å®¹-è¿ç»­æ ˆçš„ç¼ºç‚¹" aria-label="goæ ˆæ‰©å®¹å’Œæ ˆç¼©å®¹ï¼Œè¿ç»­æ ˆçš„ç¼ºç‚¹"><!---->goæ ˆæ‰©å®¹å’Œæ ˆç¼©å®¹ï¼Œè¿ç»­æ ˆçš„ç¼ºç‚¹<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#golangéšè—æŠ€èƒ½-æ€ä¹ˆè®¿é—®ç§æœ‰æˆå‘˜" aria-label="golangéšè—æŠ€èƒ½:æ€ä¹ˆè®¿é—®ç§æœ‰æˆå‘˜"><!---->golangéšè—æŠ€èƒ½:æ€ä¹ˆè®¿é—®ç§æœ‰æˆå‘˜<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#_1-0-ä¹‹å‰-gm-è°ƒåº¦æ¨¡å‹" aria-label="1.0 ä¹‹å‰ GM è°ƒåº¦æ¨¡å‹"><!---->1.0 ä¹‹å‰ GM è°ƒåº¦æ¨¡å‹<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#gmp-è°ƒåº¦æµç¨‹" aria-label="GMP è°ƒåº¦æµç¨‹"><!---->GMP è°ƒåº¦æµç¨‹<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#gmp-ä¸­-work-stealing-æœºåˆ¶" aria-label="GMP ä¸­ work stealing æœºåˆ¶"><!---->GMP ä¸­ work stealing æœºåˆ¶<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#gmp-ä¸­-hand-off-æœºåˆ¶" aria-label="GMP ä¸­ hand off æœºåˆ¶"><!---->GMP ä¸­ hand off æœºåˆ¶<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#åä½œå¼çš„æŠ¢å å¼è°ƒåº¦" aria-label="åä½œå¼çš„æŠ¢å å¼è°ƒåº¦"><!---->åä½œå¼çš„æŠ¢å å¼è°ƒåº¦<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#åŸºäºä¿¡å·çš„æŠ¢å å¼è°ƒåº¦" aria-label="åŸºäºä¿¡å·çš„æŠ¢å å¼è°ƒåº¦"><!---->åŸºäºä¿¡å·çš„æŠ¢å å¼è°ƒåº¦<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#gmp-è°ƒåº¦è¿‡ç¨‹ä¸­å­˜åœ¨å“ªäº›é˜»å¡" aria-label="GMP è°ƒåº¦è¿‡ç¨‹ä¸­å­˜åœ¨å“ªäº›é˜»å¡"><!---->GMP è°ƒåº¦è¿‡ç¨‹ä¸­å­˜åœ¨å“ªäº›é˜»å¡<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#sysmon-æœ‰ä»€ä¹ˆä½œç”¨" aria-label="sysmon æœ‰ä»€ä¹ˆä½œç”¨"><!---->sysmon æœ‰ä»€ä¹ˆä½œç”¨<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#golangé¢è¯•é¢˜-æ€ä¹ˆé¿å…å†…å­˜é€ƒé€¸" aria-label="golangé¢è¯•é¢˜ï¼šæ€ä¹ˆé¿å…å†…å­˜é€ƒé€¸ï¼Ÿ"><!---->golangé¢è¯•é¢˜ï¼šæ€ä¹ˆé¿å…å†…å­˜é€ƒé€¸ï¼Ÿ<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#golangé¢è¯•é¢˜-ç®€å•èŠèŠå†…å­˜é€ƒé€¸" aria-label="golangé¢è¯•é¢˜ï¼šç®€å•èŠèŠå†…å­˜é€ƒé€¸ï¼Ÿ"><!---->golangé¢è¯•é¢˜ï¼šç®€å•èŠèŠå†…å­˜é€ƒé€¸ï¼Ÿ<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#ä¸‰è‰²æ ‡è®°åŸç†" aria-label="ä¸‰è‰²æ ‡è®°åŸç†"><!---->ä¸‰è‰²æ ‡è®°åŸç†<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#æ’å…¥å†™å±éšœ" aria-label="æ’å…¥å†™å±éšœ"><!---->æ’å…¥å†™å±éšœ<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#åˆ é™¤å†™å±éšœ" aria-label="åˆ é™¤å†™å±éšœ"><!---->åˆ é™¤å†™å±éšœ<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#å†™å±éšœ" aria-label="å†™å±éšœ"><!---->å†™å±éšœ<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#æ··åˆå†™å±éšœ" aria-label="æ··åˆå†™å±éšœ"><!---->æ··åˆå†™å±éšœ<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#gc-è§¦å‘æ—¶æœº" aria-label="GC è§¦å‘æ—¶æœº"><!---->GC è§¦å‘æ—¶æœº<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#go-è¯­è¨€ä¸­-gc-çš„æµç¨‹æ˜¯ä»€ä¹ˆ" aria-label="Go è¯­è¨€ä¸­ GC çš„æµç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ"><!---->Go è¯­è¨€ä¸­ GC çš„æµç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#gc-å¦‚ä½•è°ƒä¼˜" aria-label="GC å¦‚ä½•è°ƒä¼˜"><!---->GC å¦‚ä½•è°ƒä¼˜<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#goè¯­è¨€çš„æ ˆç©ºé—´ç®¡ç†æ˜¯æ€ä¹ˆæ ·çš„" aria-label="Goè¯­è¨€çš„æ ˆç©ºé—´ç®¡ç†æ˜¯æ€ä¹ˆæ ·çš„?"><!---->Goè¯­è¨€çš„æ ˆç©ºé—´ç®¡ç†æ˜¯æ€ä¹ˆæ ·çš„?<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#goroutineå’Œchannelçš„ä½œç”¨åˆ†åˆ«æ˜¯ä»€ä¹ˆ" aria-label="Goroutineå’ŒChannelçš„ä½œç”¨åˆ†åˆ«æ˜¯ä»€ä¹ˆ?"><!---->Goroutineå’ŒChannelçš„ä½œç”¨åˆ†åˆ«æ˜¯ä»€ä¹ˆ?<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/2.Go%E8%BF%9B%E9%98%B6.html#æ€ä¹ˆæŸ¥çœ‹goroutineçš„æ•°é‡" aria-label="æ€ä¹ˆæŸ¥çœ‹Goroutineçš„æ•°é‡?"><!---->æ€ä¹ˆæŸ¥çœ‹Goroutineçš„æ•°é‡?<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul><!--]--></li></ul></section></li></ul></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!--[--><!----><!--]--><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->Go è¿›é˜¶é¢è¯•é¢˜</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://xiaobaidebug.top/" target="_blank" rel="noopener noreferrer">å°ç™½debug</a></span><span property="author" content="å°ç™½debug"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2024-02-13T16:40:11.000Z"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 39 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT39M"></span><!----><!----></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#golangé¢è¯•å®˜-for-selectæ—¶-å¦‚æœé€šé“å·²ç»å…³é—­ä¼šæ€ä¹ˆæ ·-å¦‚æœåªæœ‰ä¸€ä¸ªcaseå‘¢">golangé¢è¯•å®˜ï¼šfor selectæ—¶ï¼Œå¦‚æœé€šé“å·²ç»å…³é—­ä¼šæ€ä¹ˆæ ·ï¼Ÿå¦‚æœåªæœ‰ä¸€ä¸ªcaseå‘¢ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#golangé¢è¯•é¢˜-å¯¹å·²ç»å…³é—­çš„çš„chanè¿›è¡Œè¯»å†™-ä¼šæ€ä¹ˆæ ·-ä¸ºä»€ä¹ˆ">golangé¢è¯•é¢˜ï¼šå¯¹å·²ç»å…³é—­çš„çš„chanè¿›è¡Œè¯»å†™ï¼Œä¼šæ€ä¹ˆæ ·ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#golangé¢è¯•é¢˜-å¯¹æœªåˆå§‹åŒ–çš„çš„chanè¿›è¡Œè¯»å†™-ä¼šæ€ä¹ˆæ ·-ä¸ºä»€ä¹ˆ">golangé¢è¯•é¢˜ï¼šå¯¹æœªåˆå§‹åŒ–çš„çš„chanè¿›è¡Œè¯»å†™ï¼Œä¼šæ€ä¹ˆæ ·ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#golangé¢è¯•é¢˜-èƒ½è¯´è¯´uintptrå’Œunsafe-pointerçš„åŒºåˆ«å—">golangé¢è¯•é¢˜ï¼šèƒ½è¯´è¯´uintptrå’Œunsafe.Pointerçš„åŒºåˆ«å—ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#golang-é¢è¯•é¢˜-reflect-åå°„åŒ…-å¦‚ä½•è·å–å­—æ®µ-tag-ä¸ºä»€ä¹ˆ-json-åŒ…ä¸èƒ½å¯¼å‡ºç§æœ‰å˜é‡çš„-tag">golang é¢è¯•é¢˜ï¼šreflectï¼ˆåå°„åŒ…ï¼‰å¦‚ä½•è·å–å­—æ®µ tagï¼Ÿä¸ºä»€ä¹ˆ json åŒ…ä¸èƒ½å¯¼å‡ºç§æœ‰å˜é‡çš„ tagï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#golang-gc-æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆ">Golang GC æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆ?</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#golang-ä¸­-goroutine-å¦‚ä½•è°ƒåº¦">Golang ä¸­ Goroutine å¦‚ä½•è°ƒåº¦?</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#å¹¶å‘ç¼–ç¨‹æ¦‚å¿µæ˜¯ä»€ä¹ˆ">å¹¶å‘ç¼–ç¨‹æ¦‚å¿µæ˜¯ä»€ä¹ˆï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#ä¸‹é¢è¿™æ®µä»£ç æœ‰ä»€ä¹ˆé”™è¯¯å—">ä¸‹é¢è¿™æ®µä»£ç æœ‰ä»€ä¹ˆé”™è¯¯å—ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#ä¸‹é¢å‡ æ®µä»£ç èƒ½å¦é€šè¿‡ç¼–è¯‘-å¦‚æœèƒ½-è¾“å‡ºä»€ä¹ˆ">ä¸‹é¢å‡ æ®µä»£ç èƒ½å¦é€šè¿‡ç¼–è¯‘ï¼Œå¦‚æœèƒ½ï¼Œè¾“å‡ºä»€ä¹ˆ?</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#ä¸‹é¢èƒ½å¦é€šè¿‡ç¼–è¯‘">ä¸‹é¢èƒ½å¦é€šè¿‡ç¼–è¯‘?</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#é€šè¿‡æŒ‡é’ˆå˜é‡-p-è®¿é—®å…¶æˆå‘˜å˜é‡-name-æœ‰å“ªå‡ ç§æ–¹å¼">é€šè¿‡æŒ‡é’ˆå˜é‡ p è®¿é—®å…¶æˆå‘˜å˜é‡ nameï¼Œæœ‰å“ªå‡ ç§æ–¹å¼ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#å…³äºå­—ç¬¦ä¸²è¿æ¥-ä¸‹é¢è¯­æ³•æ­£ç¡®çš„æ˜¯">å…³äºå­—ç¬¦ä¸²è¿æ¥ï¼Œä¸‹é¢è¯­æ³•æ­£ç¡®çš„æ˜¯ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#å…³äºiota-ä¸‹é¢ä»£ç è¾“å‡ºä»€ä¹ˆ">å…³äºiotaï¼Œä¸‹é¢ä»£ç è¾“å‡ºä»€ä¹ˆ?</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#mutex-å‡ ç§çŠ¶æ€">Mutex å‡ ç§çŠ¶æ€</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#mutex-æ­£å¸¸æ¨¡å¼å’Œé¥¥é¥¿æ¨¡å¼">Mutex æ­£å¸¸æ¨¡å¼å’Œé¥¥é¥¿æ¨¡å¼</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#mutex-å…è®¸è‡ªæ—‹çš„æ¡ä»¶">Mutex å…è®¸è‡ªæ—‹çš„æ¡ä»¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#rwmutex-å®ç°">RWMutex å®ç°</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#rwmutex-æ³¨æ„äº‹é¡¹">RWMutex æ³¨æ„äº‹é¡¹</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#cond-æ˜¯ä»€ä¹ˆ">Cond æ˜¯ä»€ä¹ˆ</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#broadcast-å’Œ-signal-åŒºåˆ«">Broadcast å’Œ Signal åŒºåˆ«</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#cond-ä¸­-wait-ä½¿ç”¨">Cond ä¸­ Wait ä½¿ç”¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#waitgroup-ç”¨æ³•">WaitGroup ç”¨æ³•</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#waitgroup-å®ç°åŸç†">WaitGroup å®ç°åŸç†</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#ä¸‹é¢ä»£ç è¾“å‡ºä»€ä¹ˆ">ä¸‹é¢ä»£ç è¾“å‡ºä»€ä¹ˆï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#ä»€ä¹ˆæ˜¯-sync-once">ä»€ä¹ˆæ˜¯ sync.Once</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#ä»€ä¹ˆæ“ä½œå«åšåŸå­æ“ä½œ">ä»€ä¹ˆæ“ä½œå«åšåŸå­æ“ä½œ</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#åŸå­æ“ä½œå’Œé”çš„åŒºåˆ«">åŸå­æ“ä½œå’Œé”çš„åŒºåˆ«</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#ä»€ä¹ˆæ˜¯-cas">ä»€ä¹ˆæ˜¯ CAS</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#sync-pool-æœ‰ä»€ä¹ˆç”¨">sync.Pool æœ‰ä»€ä¹ˆç”¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#goroutine-å®šä¹‰">Goroutine å®šä¹‰</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#gmp-æŒ‡çš„æ˜¯ä»€ä¹ˆ">GMP æŒ‡çš„æ˜¯ä»€ä¹ˆ</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#ç»™å¤§å®¶ä¸¢è„¸äº†-ç”¨äº†ä¸‰å¹´golang-æˆ‘è¿˜æ˜¯æ²¡ç­”å¯¹è¿™é“å†…å­˜æ³„æ¼é¢˜">ç»™å¤§å®¶ä¸¢è„¸äº†ï¼Œç”¨äº†ä¸‰å¹´golangï¼Œæˆ‘è¿˜æ˜¯æ²¡ç­”å¯¹è¿™é“å†…å­˜æ³„æ¼é¢˜</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#ä½ ä¸€å®šä¼šé‡åˆ°çš„å†…å­˜å›æ”¶ç­–ç•¥å¯¼è‡´çš„ç–‘ä¼¼å†…å­˜æ³„æ¼çš„é—®é¢˜">ä½ ä¸€å®šä¼šé‡åˆ°çš„å†…å­˜å›æ”¶ç­–ç•¥å¯¼è‡´çš„ç–‘ä¼¼å†…å­˜æ³„æ¼çš„é—®é¢˜</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#gmpé‡Œä¸ºä»€ä¹ˆè¦æœ‰p">GMPé‡Œä¸ºä»€ä¹ˆè¦æœ‰P?</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#goæ ˆæ‰©å®¹å’Œæ ˆç¼©å®¹-è¿ç»­æ ˆçš„ç¼ºç‚¹">goæ ˆæ‰©å®¹å’Œæ ˆç¼©å®¹ï¼Œè¿ç»­æ ˆçš„ç¼ºç‚¹</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#golangéšè—æŠ€èƒ½-æ€ä¹ˆè®¿é—®ç§æœ‰æˆå‘˜">golangéšè—æŠ€èƒ½:æ€ä¹ˆè®¿é—®ç§æœ‰æˆå‘˜</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#_1-0-ä¹‹å‰-gm-è°ƒåº¦æ¨¡å‹">1.0 ä¹‹å‰ GM è°ƒåº¦æ¨¡å‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#gmp-è°ƒåº¦æµç¨‹">GMP è°ƒåº¦æµç¨‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#gmp-ä¸­-work-stealing-æœºåˆ¶">GMP ä¸­ work stealing æœºåˆ¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#gmp-ä¸­-hand-off-æœºåˆ¶">GMP ä¸­ hand off æœºåˆ¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#åä½œå¼çš„æŠ¢å å¼è°ƒåº¦">åä½œå¼çš„æŠ¢å å¼è°ƒåº¦</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#åŸºäºä¿¡å·çš„æŠ¢å å¼è°ƒåº¦">åŸºäºä¿¡å·çš„æŠ¢å å¼è°ƒåº¦</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#gmp-è°ƒåº¦è¿‡ç¨‹ä¸­å­˜åœ¨å“ªäº›é˜»å¡">GMP è°ƒåº¦è¿‡ç¨‹ä¸­å­˜åœ¨å“ªäº›é˜»å¡</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#sysmon-æœ‰ä»€ä¹ˆä½œç”¨">sysmon æœ‰ä»€ä¹ˆä½œç”¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#golangé¢è¯•é¢˜-æ€ä¹ˆé¿å…å†…å­˜é€ƒé€¸">golangé¢è¯•é¢˜ï¼šæ€ä¹ˆé¿å…å†…å­˜é€ƒé€¸ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#golangé¢è¯•é¢˜-ç®€å•èŠèŠå†…å­˜é€ƒé€¸">golangé¢è¯•é¢˜ï¼šç®€å•èŠèŠå†…å­˜é€ƒé€¸ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#ä¸‰è‰²æ ‡è®°åŸç†">ä¸‰è‰²æ ‡è®°åŸç†</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#æ’å…¥å†™å±éšœ">æ’å…¥å†™å±éšœ</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#åˆ é™¤å†™å±éšœ">åˆ é™¤å†™å±éšœ</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#å†™å±éšœ">å†™å±éšœ</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#æ··åˆå†™å±éšœ">æ··åˆå†™å±éšœ</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#gc-è§¦å‘æ—¶æœº">GC è§¦å‘æ—¶æœº</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#go-è¯­è¨€ä¸­-gc-çš„æµç¨‹æ˜¯ä»€ä¹ˆ">Go è¯­è¨€ä¸­ GC çš„æµç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#gc-å¦‚ä½•è°ƒä¼˜">GC å¦‚ä½•è°ƒä¼˜</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#goè¯­è¨€çš„æ ˆç©ºé—´ç®¡ç†æ˜¯æ€ä¹ˆæ ·çš„">Goè¯­è¨€çš„æ ˆç©ºé—´ç®¡ç†æ˜¯æ€ä¹ˆæ ·çš„?</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#goroutineå’Œchannelçš„ä½œç”¨åˆ†åˆ«æ˜¯ä»€ä¹ˆ">Goroutineå’ŒChannelçš„ä½œç”¨åˆ†åˆ«æ˜¯ä»€ä¹ˆ?</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#æ€ä¹ˆæŸ¥çœ‹goroutineçš„æ•°é‡">æ€ä¹ˆæŸ¥çœ‹Goroutineçš„æ•°é‡?</a></li><!----><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!--[--><!----><!--]--><div class="theme-hope-content"><h1 id="go-è¿›é˜¶é¢è¯•é¢˜" tabindex="-1"><a class="header-anchor" href="#go-è¿›é˜¶é¢è¯•é¢˜"><span><strong>Go è¿›é˜¶é¢è¯•é¢˜</strong></span></a></h1><h2 id="golangé¢è¯•å®˜-for-selectæ—¶-å¦‚æœé€šé“å·²ç»å…³é—­ä¼šæ€ä¹ˆæ ·-å¦‚æœåªæœ‰ä¸€ä¸ªcaseå‘¢" tabindex="-1"><a class="header-anchor" href="#golangé¢è¯•å®˜-for-selectæ—¶-å¦‚æœé€šé“å·²ç»å…³é—­ä¼šæ€ä¹ˆæ ·-å¦‚æœåªæœ‰ä¸€ä¸ªcaseå‘¢"><span>golangé¢è¯•å®˜ï¼šfor selectæ—¶ï¼Œå¦‚æœé€šé“å·²ç»å…³é—­ä¼šæ€ä¹ˆæ ·ï¼Ÿå¦‚æœåªæœ‰ä¸€ä¸ªcaseå‘¢ï¼Ÿ</span></a></h2><p><a href="https://mp.weixin.qq.com/s/Oa3eExufo2Req_9IrDys-g" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/s/Oa3eExufo2Req_9IrDys-g<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="golangé¢è¯•é¢˜-å¯¹å·²ç»å…³é—­çš„çš„chanè¿›è¡Œè¯»å†™-ä¼šæ€ä¹ˆæ ·-ä¸ºä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#golangé¢è¯•é¢˜-å¯¹å·²ç»å…³é—­çš„çš„chanè¿›è¡Œè¯»å†™-ä¼šæ€ä¹ˆæ ·-ä¸ºä»€ä¹ˆ"><span>golangé¢è¯•é¢˜ï¼šå¯¹å·²ç»å…³é—­çš„çš„chanè¿›è¡Œè¯»å†™ï¼Œä¼šæ€ä¹ˆæ ·ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</span></a></h2><p><a href="https://mp.weixin.qq.com/s/izbZ3JRqX6jI6Wn7bV6xNQ" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/s/izbZ3JRqX6jI6Wn7bV6xNQ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="golangé¢è¯•é¢˜-å¯¹æœªåˆå§‹åŒ–çš„çš„chanè¿›è¡Œè¯»å†™-ä¼šæ€ä¹ˆæ ·-ä¸ºä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#golangé¢è¯•é¢˜-å¯¹æœªåˆå§‹åŒ–çš„çš„chanè¿›è¡Œè¯»å†™-ä¼šæ€ä¹ˆæ ·-ä¸ºä»€ä¹ˆ"><span>golangé¢è¯•é¢˜ï¼šå¯¹æœªåˆå§‹åŒ–çš„çš„chanè¿›è¡Œè¯»å†™ï¼Œä¼šæ€ä¹ˆæ ·ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</span></a></h2><p><a href="https://mp.weixin.qq.com/s/ixJu0wrGXsCcGzveCqnr6A" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/s/ixJu0wrGXsCcGzveCqnr6A<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="golangé¢è¯•é¢˜-èƒ½è¯´è¯´uintptrå’Œunsafe-pointerçš„åŒºåˆ«å—" tabindex="-1"><a class="header-anchor" href="#golangé¢è¯•é¢˜-èƒ½è¯´è¯´uintptrå’Œunsafe-pointerçš„åŒºåˆ«å—"><span>golangé¢è¯•é¢˜ï¼šèƒ½è¯´è¯´uintptrå’Œunsafe.Pointerçš„åŒºåˆ«å—ï¼Ÿ</span></a></h2><p><a href="https://mp.weixin.qq.com/s/PSkz0zj-vqKzmIKa_b-xAA" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/s/PSkz0zj-vqKzmIKa_b-xAA<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="golang-é¢è¯•é¢˜-reflect-åå°„åŒ…-å¦‚ä½•è·å–å­—æ®µ-tag-ä¸ºä»€ä¹ˆ-json-åŒ…ä¸èƒ½å¯¼å‡ºç§æœ‰å˜é‡çš„-tag" tabindex="-1"><a class="header-anchor" href="#golang-é¢è¯•é¢˜-reflect-åå°„åŒ…-å¦‚ä½•è·å–å­—æ®µ-tag-ä¸ºä»€ä¹ˆ-json-åŒ…ä¸èƒ½å¯¼å‡ºç§æœ‰å˜é‡çš„-tag"><span>golang é¢è¯•é¢˜ï¼šreflectï¼ˆåå°„åŒ…ï¼‰å¦‚ä½•è·å–å­—æ®µ tagï¼Ÿä¸ºä»€ä¹ˆ json åŒ…ä¸èƒ½å¯¼å‡ºç§æœ‰å˜é‡çš„ tagï¼Ÿ</span></a></h2><p><a href="https://mp.weixin.qq.com/s/WK9StkC3Jfy-o1dUqlo7Dg" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/s/WK9StkC3Jfy-o1dUqlo7Dg<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="golang-gc-æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#golang-gc-æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆ"><span>Golang GC æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆ?</span></a></h2><p>é¦–å…ˆæˆ‘ä»¬å…ˆæ¥äº†è§£ä¸‹åƒåœ¾å›æ”¶.ä»€ä¹ˆæ˜¯åƒåœ¾å›æ”¶ï¼Ÿ</p><p>å†…å­˜ç®¡ç†æ˜¯ç¨‹åºå‘˜å¼€å‘åº”ç”¨çš„ä¸€å¤§éš¾é¢˜ã€‚ä¼ ç»Ÿçš„ç³»ç»Ÿçº§ç¼–ç¨‹è¯­è¨€ï¼ˆä¸»è¦æŒ‡C/C++ï¼‰ä¸­ï¼Œç¨‹åºå¼€å‘è€…å¿…é¡»å¯¹å†…å­˜å°å¿ƒçš„è¿›è¡Œç®¡ç†æ“ä½œï¼Œæ§åˆ¶å†…å­˜çš„ç”³è¯·åŠé‡Šæ”¾ã€‚å› ä¸ºç¨æœ‰ä¸æ…ï¼Œå°±å¯èƒ½äº§ç”Ÿå†…å­˜æ³„éœ²é—®é¢˜ï¼Œè¿™ç§é—®é¢˜ä¸æ˜“å‘ç°å¹¶ä¸”éš¾ä»¥å®šä½ï¼Œä¸€ç›´æˆä¸ºå›°æ‰°ç¨‹åºå¼€å‘è€…çš„å™©æ¢¦ã€‚å¦‚ä½•è§£å†³è¿™ä¸ªå¤´ç–¼çš„é—®é¢˜å‘¢ï¼Ÿ</p><p>è¿‡å»ä¸€èˆ¬é‡‡ç”¨ä¸¤ç§åŠæ³•ï¼š</p><ul><li>å†…å­˜æ³„éœ²æ£€æµ‹å·¥å…·ã€‚è¿™ç§å·¥å…·çš„åŸç†ä¸€èˆ¬æ˜¯é™æ€ä»£ç æ‰«æï¼Œé€šè¿‡æ‰«æç¨‹åºæ£€æµ‹å¯èƒ½å‡ºç°å†…å­˜æ³„éœ²çš„ä»£ç æ®µã€‚ç„¶è€Œæ£€æµ‹å·¥å…·éš¾å…æœ‰ç–æ¼å’Œä¸è¶³ï¼Œåªèƒ½èµ·åˆ°è¾…åŠ©ä½œç”¨ã€‚</li><li>æ™ºèƒ½æŒ‡é’ˆã€‚è¿™æ˜¯ c++ ä¸­å¼•å…¥çš„è‡ªåŠ¨å†…å­˜ç®¡ç†æ–¹æ³•ï¼Œé€šè¿‡æ‹¥æœ‰è‡ªåŠ¨å†…å­˜ç®¡ç†åŠŸèƒ½çš„æŒ‡é’ˆå¯¹è±¡æ¥å¼•ç”¨å¯¹è±¡ï¼Œæ˜¯ç¨‹åºå‘˜ä¸ç”¨å¤ªå…³æ³¨å†…å­˜çš„é‡Šæ”¾ï¼Œè€Œè¾¾åˆ°å†…å­˜è‡ªåŠ¨é‡Šæ”¾çš„ç›®çš„ã€‚è¿™ç§æ–¹æ³•æ˜¯é‡‡ç”¨æœ€å¹¿æ³›çš„åšæ³•ï¼Œä½†æ˜¯å¯¹ç¨‹åºå¼€å‘è€…æœ‰ä¸€å®šçš„å­¦ä¹ æˆæœ¬ï¼ˆå¹¶éè¯­è¨€å±‚é¢çš„åŸç”Ÿæ”¯æŒï¼‰ï¼Œè€Œä¸”ä¸€æ—¦æœ‰å¿˜è®°ä½¿ç”¨çš„åœºæ™¯ä¾ç„¶æ— æ³•é¿å…å†…å­˜æ³„éœ²ã€‚</li></ul><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåæ¥å¼€å‘å‡ºæ¥çš„å‡ ä¹æ‰€æœ‰æ–°è¯­è¨€ï¼ˆjavaï¼Œpythonï¼Œphpç­‰ç­‰ï¼‰éƒ½å¼•å…¥äº†è¯­è¨€å±‚é¢çš„è‡ªåŠ¨å†…å­˜ç®¡ç† â€“ ä¹Ÿå°±æ˜¯è¯­è¨€çš„ä½¿ç”¨è€…åªç”¨å…³æ³¨å†…å­˜çš„ç”³è¯·è€Œä¸å¿…å…³å¿ƒå†…å­˜çš„é‡Šæ”¾ï¼Œå†…å­˜é‡Šæ”¾ç”±è™šæ‹Ÿæœºï¼ˆvirtual machineï¼‰æˆ–è¿è¡Œæ—¶ï¼ˆruntimeï¼‰æ¥è‡ªåŠ¨è¿›è¡Œç®¡ç†ã€‚è€Œè¿™ç§å¯¹ä¸å†ä½¿ç”¨çš„å†…å­˜èµ„æºè¿›è¡Œè‡ªåŠ¨å›æ”¶çš„è¡Œä¸ºå°±è¢«ç§°ä¸ºåƒåœ¾å›æ”¶ã€‚</p><p>å¸¸ç”¨çš„åƒåœ¾å›æ”¶çš„æ–¹æ³•:</p><ul><li>å¼•ç”¨è®¡æ•°ï¼ˆreference countingï¼‰</li></ul><p>è¿™æ˜¯æœ€ç®€å•çš„ä¸€ç§åƒåœ¾å›æ”¶ç®—æ³•ï¼Œå’Œä¹‹å‰æåˆ°çš„æ™ºèƒ½æŒ‡é’ˆå¼‚æ›²åŒå·¥ã€‚å¯¹æ¯ä¸ªå¯¹è±¡ç»´æŠ¤ä¸€ä¸ªå¼•ç”¨è®¡æ•°ï¼Œå½“å¼•ç”¨è¯¥å¯¹è±¡çš„å¯¹è±¡è¢«é”€æ¯æˆ–æ›´æ–°æ—¶è¢«å¼•ç”¨å¯¹è±¡çš„å¼•ç”¨è®¡æ•°è‡ªåŠ¨å‡ä¸€ï¼Œå½“è¢«å¼•ç”¨å¯¹è±¡è¢«åˆ›å»ºæˆ–è¢«èµ‹å€¼ç»™å…¶ä»–å¯¹è±¡æ—¶å¼•ç”¨è®¡æ•°è‡ªåŠ¨åŠ ä¸€ã€‚å½“å¼•ç”¨è®¡æ•°ä¸º0æ—¶åˆ™ç«‹å³å›æ”¶å¯¹è±¡ã€‚</p><p>è¿™ç§æ–¹æ³•çš„ä¼˜ç‚¹æ˜¯å®ç°ç®€å•ï¼Œå¹¶ä¸”å†…å­˜çš„å›æ”¶å¾ˆåŠæ—¶ã€‚è¿™ç§ç®—æ³•åœ¨å†…å­˜æ¯”è¾ƒç´§å¼ å’Œå®æ—¶æ€§æ¯”è¾ƒé«˜çš„ç³»ç»Ÿä¸­ä½¿ç”¨çš„æ¯”è¾ƒå¹¿æ³›ï¼Œå¦‚ios cocoaæ¡†æ¶ï¼Œphpï¼Œpythonç­‰ã€‚</p><p>ä½†æ˜¯ç®€å•å¼•ç”¨è®¡æ•°ç®—æ³•ä¹Ÿæœ‰æ˜æ˜¾çš„ç¼ºç‚¹ï¼š</p><ol><li>é¢‘ç¹æ›´æ–°å¼•ç”¨è®¡æ•°é™ä½äº†æ€§èƒ½ã€‚</li></ol><p>ä¸€ç§ç®€å•çš„è§£å†³æ–¹æ³•å°±æ˜¯ç¼–è¯‘å™¨å°†ç›¸é‚»çš„å¼•ç”¨è®¡æ•°æ›´æ–°æ“ä½œåˆå¹¶åˆ°ä¸€æ¬¡æ›´æ–°ï¼›è¿˜æœ‰ä¸€ç§æ–¹æ³•æ˜¯é’ˆå¯¹é¢‘ç¹å‘ç”Ÿçš„ä¸´æ—¶å˜é‡å¼•ç”¨ä¸è¿›è¡Œè®¡æ•°ï¼Œè€Œæ˜¯åœ¨å¼•ç”¨è¾¾åˆ°0æ—¶é€šè¿‡æ‰«æå †æ ˆç¡®è®¤æ˜¯å¦è¿˜æœ‰ä¸´æ—¶å¯¹è±¡å¼•ç”¨è€Œå†³å®šæ˜¯å¦é‡Šæ”¾ã€‚ç­‰ç­‰è¿˜æœ‰å¾ˆå¤šå…¶ä»–æ–¹æ³•ï¼Œå…·ä½“å¯ä»¥å‚è€ƒè¿™é‡Œã€‚</p><ol><li>å¾ªç¯å¼•ç”¨ã€‚</li></ol><p>å½“å¯¹è±¡é—´å‘ç”Ÿå¾ªç¯å¼•ç”¨æ—¶å¼•ç”¨é“¾ä¸­çš„å¯¹è±¡éƒ½æ— æ³•å¾—åˆ°é‡Šæ”¾ã€‚æœ€æ˜æ˜¾çš„è§£å†³åŠæ³•æ˜¯é¿å…äº§ç”Ÿå¾ªç¯å¼•ç”¨ï¼Œå¦‚cocoaå¼•å…¥äº†strongæŒ‡é’ˆå’ŒweakæŒ‡é’ˆä¸¤ç§æŒ‡é’ˆç±»å‹ã€‚æˆ–è€…ç³»ç»Ÿæ£€æµ‹å¾ªç¯å¼•ç”¨å¹¶ä¸»åŠ¨æ‰“ç ´å¾ªç¯é“¾ã€‚å½“ç„¶è¿™ä¹Ÿå¢åŠ äº†åƒåœ¾å›æ”¶çš„å¤æ‚åº¦ã€‚</p><ul><li>æ ‡è®°-æ¸…é™¤ï¼ˆmark and sweepï¼‰</li></ul><p>æ ‡è®°-æ¸…é™¤ï¼ˆmark and sweepï¼‰åˆ†ä¸ºä¸¤æ­¥ï¼Œæ ‡è®°ä»æ ¹å˜é‡å¼€å§‹è¿­ä»£å¾—éå†æ‰€æœ‰è¢«å¼•ç”¨çš„å¯¹è±¡ï¼Œå¯¹èƒ½å¤Ÿé€šè¿‡åº”ç”¨éå†è®¿é—®åˆ°çš„å¯¹è±¡éƒ½è¿›è¡Œæ ‡è®°ä¸ºâ€œè¢«å¼•ç”¨â€ï¼›æ ‡è®°å®Œæˆåè¿›è¡Œæ¸…é™¤æ“ä½œï¼Œå¯¹æ²¡æœ‰æ ‡è®°è¿‡çš„å†…å­˜è¿›è¡Œå›æ”¶ï¼ˆå›æ”¶åŒæ—¶å¯èƒ½ä¼´æœ‰ç¢ç‰‡æ•´ç†æ“ä½œï¼‰ã€‚è¿™ç§æ–¹æ³•è§£å†³äº†å¼•ç”¨è®¡æ•°çš„ä¸è¶³ï¼Œä½†æ˜¯ä¹Ÿæœ‰æ¯”è¾ƒæ˜æ˜¾çš„é—®é¢˜ï¼šæ¯æ¬¡å¯åŠ¨åƒåœ¾å›æ”¶éƒ½ä¼šæš‚åœå½“å‰æ‰€æœ‰çš„æ­£å¸¸ä»£ç æ‰§è¡Œï¼Œå›æ”¶æ˜¯ç³»ç»Ÿå“åº”èƒ½åŠ›å¤§å¤§é™ä½ï¼å½“ç„¶åç»­ä¹Ÿå‡ºç°äº†å¾ˆå¤šmark&amp;sweepç®—æ³•çš„å˜ç§ï¼ˆå¦‚ä¸‰è‰²æ ‡è®°æ³•ï¼‰ä¼˜åŒ–äº†è¿™ä¸ªé—®é¢˜ã€‚</p><ul><li>åˆ†ä»£æœé›†ï¼ˆgenerationï¼‰</li></ul><p>javaçš„jvm å°±ä½¿ç”¨çš„åˆ†ä»£å›æ”¶çš„æ€è·¯ã€‚åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œç»å¤§å¤šæ•°å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸéƒ½éå¸¸çŸ­ã€‚åˆ†ä»£æ”¶é›†çš„åŸºæœ¬æ€æƒ³æ˜¯ï¼Œå°†å †åˆ’åˆ†ä¸ºä¸¤ä¸ªæˆ–å¤šä¸ªç§°ä¸ºä»£ï¼ˆgenerationï¼‰çš„ç©ºé—´ã€‚æ–°åˆ›å»ºçš„å¯¹è±¡å­˜æ”¾åœ¨ç§°ä¸ºæ–°ç”Ÿä»£ï¼ˆyoung generationï¼‰ä¸­ï¼ˆä¸€èˆ¬æ¥è¯´ï¼Œæ–°ç”Ÿä»£çš„å¤§å°ä¼šæ¯” è€å¹´ä»£å°å¾ˆå¤šï¼‰ï¼Œéšç€åƒåœ¾å›æ”¶çš„é‡å¤æ‰§è¡Œï¼Œç”Ÿå‘½å‘¨æœŸè¾ƒé•¿çš„å¯¹è±¡ä¼šè¢«æå‡ï¼ˆpromotionï¼‰åˆ°è€å¹´ä»£ä¸­ï¼ˆè¿™é‡Œç”¨åˆ°äº†ä¸€ä¸ªåˆ†ç±»çš„æ€è·¯ï¼Œè¿™ä¸ªæ˜¯ä¹Ÿæ˜¯ç§‘å­¦æ€è€ƒçš„ä¸€ä¸ªåŸºæœ¬æ€è·¯ï¼‰ã€‚</p><p>å› æ­¤ï¼Œæ–°ç”Ÿä»£åƒåœ¾å›æ”¶å’Œè€å¹´ä»£åƒåœ¾å›æ”¶ä¸¤ç§ä¸åŒçš„åƒåœ¾å›æ”¶æ–¹å¼åº”è¿è€Œç”Ÿï¼Œåˆ†åˆ«ç”¨äºå¯¹å„è‡ªç©ºé—´ä¸­çš„å¯¹è±¡æ‰§è¡Œåƒåœ¾å›æ”¶ã€‚æ–°ç”Ÿä»£åƒåœ¾å›æ”¶çš„é€Ÿåº¦éå¸¸å¿«ï¼Œæ¯”è€å¹´ä»£å¿«å‡ ä¸ªæ•°é‡çº§ï¼Œå³ä½¿æ–°ç”Ÿä»£åƒåœ¾å›æ”¶çš„é¢‘ç‡æ›´é«˜ï¼Œæ‰§è¡Œæ•ˆç‡ä¹Ÿä»ç„¶æ¯”è€å¹´ä»£åƒåœ¾å›æ”¶å¼ºï¼Œè¿™æ˜¯å› ä¸ºå¤§å¤šæ•°å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸéƒ½å¾ˆçŸ­ï¼Œæ ¹æœ¬æ— éœ€æå‡åˆ°è€å¹´ä»£ã€‚</p><p>Golang GC æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆ?</p><p>Golang 1.5åï¼Œé‡‡å–çš„æ˜¯â€œéåˆ†ä»£çš„ã€éç§»åŠ¨çš„ã€å¹¶å‘çš„ã€ä¸‰è‰²çš„â€æ ‡è®°æ¸…é™¤åƒåœ¾å›æ”¶ç®—æ³•ã€‚</p><p>golang ä¸­çš„ gc åŸºæœ¬ä¸Šæ˜¯æ ‡è®°æ¸…é™¤çš„è¿‡ç¨‹ï¼š</p><figure><a href="https://github.com/KeKe-Li/For-learning-Go-Tutorial/blob/master/src/images/2.jpg" target="_blank" rel="noopener noreferrer"><img src="https://cdn.jsdelivr.net/gh/xiaobaiTech/image/2.jpg" alt="img" tabindex="0" loading="lazy"><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><figcaption>img</figcaption></figure><p>gcçš„è¿‡ç¨‹ä¸€å…±åˆ†ä¸ºå››ä¸ªé˜¶æ®µï¼š</p><ol><li>æ ˆæ‰«æï¼ˆå¼€å§‹æ—¶STWï¼‰</li><li>ç¬¬ä¸€æ¬¡æ ‡è®°ï¼ˆå¹¶å‘ï¼‰</li><li>ç¬¬äºŒæ¬¡æ ‡è®°ï¼ˆSTWï¼‰</li><li>æ¸…é™¤ï¼ˆå¹¶å‘ï¼‰</li></ol><p>æ•´ä¸ªè¿›ç¨‹ç©ºé—´é‡Œç”³è¯·æ¯ä¸ªå¯¹è±¡å æ®çš„å†…å­˜å¯ä»¥è§†ä¸ºä¸€ä¸ªå›¾ï¼Œåˆå§‹çŠ¶æ€ä¸‹æ¯ä¸ªå†…å­˜å¯¹è±¡éƒ½æ˜¯ç™½è‰²æ ‡è®°ã€‚</p><ol><li>å…ˆSTWï¼Œåšä¸€äº›å‡†å¤‡å·¥ä½œï¼Œæ¯”å¦‚ enable write barrierã€‚ç„¶åå–æ¶ˆSTWï¼Œå°†æ‰«æä»»åŠ¡ä½œä¸ºå¤šä¸ªå¹¶å‘çš„goroutineç«‹å³å…¥é˜Ÿç»™è°ƒåº¦å™¨ï¼Œè¿›è€Œè¢«CPUå¤„ç†</li><li>ç¬¬ä¸€è½®å…ˆæ‰«ærootå¯¹è±¡ï¼ŒåŒ…æ‹¬å…¨å±€æŒ‡é’ˆå’Œ goroutine æ ˆä¸Šçš„æŒ‡é’ˆï¼Œæ ‡è®°ä¸ºç°è‰²æ”¾å…¥é˜Ÿåˆ—</li><li>ç¬¬äºŒè½®å°†ç¬¬ä¸€æ­¥é˜Ÿåˆ—ä¸­çš„å¯¹è±¡å¼•ç”¨çš„å¯¹è±¡ç½®ä¸ºç°è‰²åŠ å…¥é˜Ÿåˆ—ï¼Œä¸€ä¸ªå¯¹è±¡å¼•ç”¨çš„æ‰€æœ‰å¯¹è±¡éƒ½ç½®ç°å¹¶åŠ å…¥é˜Ÿåˆ—åï¼Œè¿™ä¸ªå¯¹è±¡æ‰èƒ½ç½®ä¸ºé»‘è‰²å¹¶ä»é˜Ÿåˆ—ä¹‹ä¸­å–å‡ºã€‚å¾ªç¯å¾€å¤ï¼Œæœ€åé˜Ÿåˆ—ä¸ºç©ºæ—¶ï¼Œæ•´ä¸ªå›¾å‰©ä¸‹çš„ç™½è‰²å†…å­˜ç©ºé—´å³ä¸å¯åˆ°è¾¾çš„å¯¹è±¡ï¼Œå³æ²¡æœ‰è¢«å¼•ç”¨çš„å¯¹è±¡ï¼›</li><li>ç¬¬ä¸‰è½®å†æ¬¡STWï¼Œå°†ç¬¬äºŒè½®è¿‡ç¨‹ä¸­æ–°å¢å¯¹è±¡ç”³è¯·çš„å†…å­˜è¿›è¡Œæ ‡è®°ï¼ˆç°è‰²ï¼‰ï¼Œè¿™é‡Œä½¿ç”¨äº†write barrierï¼ˆå†™å±éšœï¼‰å»è®°å½•</li></ol><p>Golang gc ä¼˜åŒ–çš„æ ¸å¿ƒå°±æ˜¯å°½é‡ä½¿å¾— STW(Stop The World) çš„æ—¶é—´è¶Šæ¥è¶ŠçŸ­ã€‚</p><p>è¯¦ç»†çš„Golangçš„GCä»‹ç»å¯ä»¥å‚çœ‹<a href="https://github.com/KeKe-Li/For-learning-Go-Tutorial/blob/master/src/spec/02.0.md" target="_blank" rel="noopener noreferrer">Golangåƒåœ¾å›æ”¶<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p><h2 id="golang-ä¸­-goroutine-å¦‚ä½•è°ƒåº¦" tabindex="-1"><a class="header-anchor" href="#golang-ä¸­-goroutine-å¦‚ä½•è°ƒåº¦"><span>Golang ä¸­ Goroutine å¦‚ä½•è°ƒåº¦?</span></a></h2><p>goroutineæ˜¯Golangè¯­è¨€ä¸­æœ€ç»å…¸çš„è®¾è®¡ï¼Œä¹Ÿæ˜¯å…¶é­…åŠ›æ‰€åœ¨ï¼Œgoroutineçš„æœ¬è´¨æ˜¯åç¨‹ï¼Œæ˜¯å®ç°å¹¶è¡Œè®¡ç®—çš„æ ¸å¿ƒã€‚ goroutineä½¿ç”¨æ–¹å¼éå¸¸çš„ç®€å•ï¼Œåªéœ€ä½¿ç”¨goå…³é”®å­—å³å¯å¯åŠ¨ä¸€ä¸ªåç¨‹ï¼Œå¹¶ä¸”å®ƒæ˜¯å¤„äºå¼‚æ­¥æ–¹å¼è¿è¡Œï¼Œä½ ä¸éœ€è¦ç­‰å®ƒè¿è¡Œå®Œæˆä»¥ååœ¨æ‰§è¡Œä»¥åçš„ä»£ç ã€‚</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>go func()//é€šè¿‡goå…³é”®å­—å¯åŠ¨ä¸€ä¸ªåç¨‹æ¥è¿è¡Œå‡½æ•°
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åç¨‹:</p><p>åç¨‹æ‹¥æœ‰è‡ªå·±çš„å¯„å­˜å™¨ä¸Šä¸‹æ–‡å’Œæ ˆã€‚åç¨‹è°ƒåº¦åˆ‡æ¢æ—¶ï¼Œå°†å¯„å­˜å™¨ä¸Šä¸‹æ–‡å’Œæ ˆä¿å­˜åˆ°å…¶ä»–åœ°æ–¹ï¼Œåœ¨åˆ‡å›æ¥çš„æ—¶å€™ï¼Œæ¢å¤å…ˆå‰ä¿å­˜çš„å¯„å­˜å™¨ä¸Šä¸‹æ–‡å’Œæ ˆã€‚ å› æ­¤ï¼Œåç¨‹èƒ½ä¿ç•™ä¸Šä¸€æ¬¡è°ƒç”¨æ—¶çš„çŠ¶æ€ï¼ˆå³æ‰€æœ‰å±€éƒ¨çŠ¶æ€çš„ä¸€ä¸ªç‰¹å®šç»„åˆï¼‰ï¼Œæ¯æ¬¡è¿‡ç¨‹é‡å…¥æ—¶ï¼Œå°±ç›¸å½“äºè¿›å…¥ä¸Šä¸€æ¬¡è°ƒç”¨çš„çŠ¶æ€ï¼Œæ¢ç§è¯´æ³•ï¼šè¿›å…¥ä¸Šä¸€æ¬¡ç¦»å¼€æ—¶æ‰€å¤„é€»è¾‘æµçš„ä½ç½®ã€‚ çº¿ç¨‹å’Œè¿›ç¨‹çš„æ“ä½œæ˜¯ç”±ç¨‹åºè§¦å‘ç³»ç»Ÿæ¥å£ï¼Œæœ€åçš„æ‰§è¡Œè€…æ˜¯ç³»ç»Ÿï¼›åç¨‹çš„æ“ä½œæ‰§è¡Œè€…åˆ™æ˜¯ç”¨æˆ·è‡ªèº«ç¨‹åºï¼Œgoroutineä¹Ÿæ˜¯åç¨‹ã€‚</p><p>groutineèƒ½æ‹¥æœ‰å¼ºå¤§çš„å¹¶å‘å®ç°æ˜¯é€šè¿‡GPMè°ƒåº¦æ¨¡å‹å®ç°.</p><figure><a href="https://github.com/KeKe-Li/golang-interview-questions/blob/master/src/images/59.jpg" target="_blank" rel="noopener noreferrer"><img src="https://cdn.jsdelivr.net/gh/xiaobaiTech/image/59-20220314170418653-20220314171133770.jpg" alt="img" tabindex="0" loading="lazy"><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><figcaption>img</figcaption></figure><p>Goçš„è°ƒåº¦å™¨å†…éƒ¨æœ‰å››ä¸ªé‡è¦çš„ç»“æ„ï¼šMï¼ŒPï¼ŒSï¼ŒSchedï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼ˆSchedæœªç»™å‡ºï¼‰.</p><ul><li>M:Mä»£è¡¨å†…æ ¸çº§çº¿ç¨‹ï¼Œä¸€ä¸ªMå°±æ˜¯ä¸€ä¸ªçº¿ç¨‹ï¼Œgoroutineå°±æ˜¯è·‘åœ¨Mä¹‹ä¸Šçš„ï¼›Mæ˜¯ä¸€ä¸ªå¾ˆå¤§çš„ç»“æ„ï¼Œé‡Œé¢ç»´æŠ¤å°å¯¹è±¡å†…å­˜cacheï¼ˆmcacheï¼‰ã€å½“å‰æ‰§è¡Œçš„goroutineã€éšæœºæ•°å‘ç”Ÿå™¨ç­‰ç­‰éå¸¸å¤šçš„ä¿¡æ¯</li><li>G:ä»£è¡¨ä¸€ä¸ªgoroutineï¼Œå®ƒæœ‰è‡ªå·±çš„æ ˆï¼Œinstruction pointerå’Œå…¶ä»–ä¿¡æ¯ï¼ˆæ­£åœ¨ç­‰å¾…çš„channelç­‰ç­‰ï¼‰ï¼Œç”¨äºè°ƒåº¦ã€‚</li><li>P:På…¨ç§°æ˜¯Processorï¼Œå¤„ç†å™¨ï¼Œå®ƒçš„ä¸»è¦ç”¨é€”å°±æ˜¯ç”¨æ¥æ‰§è¡Œgoroutineçš„ï¼Œæ‰€ä»¥å®ƒä¹Ÿç»´æŠ¤äº†ä¸€ä¸ªgoroutineé˜Ÿåˆ—ï¼Œé‡Œé¢å­˜å‚¨äº†æ‰€æœ‰éœ€è¦å®ƒæ¥æ‰§è¡Œçš„goroutine</li><li>Schedï¼šä»£è¡¨è°ƒåº¦å™¨ï¼Œå®ƒç»´æŠ¤æœ‰å­˜å‚¨Må’ŒGçš„é˜Ÿåˆ—ä»¥åŠè°ƒåº¦å™¨çš„ä¸€äº›çŠ¶æ€ä¿¡æ¯ç­‰ã€‚</li></ul><p>è°ƒåº¦å®ç°:</p><figure><a href="https://github.com/KeKe-Li/golang-interview-questions/blob/master/src/images/65.jpg" target="_blank" rel="noopener noreferrer"><img src="https://cdn.jsdelivr.net/gh/xiaobaiTech/image/65-20220314170611542-20220314171133879.jpg" alt="img" tabindex="0" loading="lazy"><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><figcaption>img</figcaption></figure><p>ä»ä¸Šå›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæœ‰2ä¸ªç‰©ç†çº¿ç¨‹Mï¼Œæ¯ä¸€ä¸ªMéƒ½æ‹¥æœ‰ä¸€ä¸ªå¤„ç†å™¨Pï¼Œæ¯ä¸€ä¸ªä¹Ÿéƒ½æœ‰ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„goroutineã€‚Pçš„æ•°é‡å¯ä»¥é€šè¿‡GOMAXPROCS()æ¥è®¾ç½®ï¼Œå®ƒå…¶å®ä¹Ÿå°±ä»£è¡¨äº†çœŸæ­£çš„å¹¶å‘åº¦ï¼Œå³æœ‰å¤šå°‘ä¸ªgoroutineå¯ä»¥åŒæ—¶è¿è¡Œã€‚</p><p>å›¾ä¸­ç°è‰²çš„é‚£äº›goroutineå¹¶æ²¡æœ‰è¿è¡Œï¼Œè€Œæ˜¯å‡ºäºreadyçš„å°±ç»ªæ€ï¼Œæ­£åœ¨ç­‰å¾…è¢«è°ƒåº¦ã€‚Pç»´æŠ¤ç€è¿™ä¸ªé˜Ÿåˆ—ï¼ˆç§°ä¹‹ä¸ºrunqueueï¼‰ï¼ŒGoè¯­è¨€é‡Œï¼Œå¯åŠ¨ä¸€ä¸ªgoroutineå¾ˆå®¹æ˜“ï¼šgo function å°±è¡Œï¼Œæ‰€ä»¥æ¯æœ‰ä¸€ä¸ªgoè¯­å¥è¢«æ‰§è¡Œï¼Œrunqueueé˜Ÿåˆ—å°±åœ¨å…¶æœ«å°¾åŠ å…¥ä¸€ä¸ªgoroutineï¼Œåœ¨ä¸‹ä¸€ä¸ªè°ƒåº¦ç‚¹ï¼Œå°±ä»runqueueä¸­å–å‡ºï¼ˆå¦‚ä½•å†³å®šå–å“ªä¸ªgoroutineï¼Ÿï¼‰ä¸€ä¸ªgoroutineæ‰§è¡Œã€‚</p><p>å½“ä¸€ä¸ªOSçº¿ç¨‹M0é™·å…¥é˜»å¡æ—¶ï¼ŒPè½¬è€Œåœ¨è¿è¡ŒM1ï¼Œå›¾ä¸­çš„M1å¯èƒ½æ˜¯æ­£è¢«åˆ›å»ºï¼Œæˆ–è€…ä»çº¿ç¨‹ç¼“å­˜ä¸­å–å‡ºã€‚</p><figure><a href="https://github.com/KeKe-Li/golang-interview-questions/blob/master/src/images/60.jpg" target="_blank" rel="noopener noreferrer"><img src="https://cdn.jsdelivr.net/gh/xiaobaiTech/image/60-20220314170432327.jpg" alt="img" tabindex="0" loading="lazy"><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><figcaption>img</figcaption></figure><p>å½“MOè¿”å›æ—¶ï¼Œå®ƒå¿…é¡»å°è¯•å–å¾—ä¸€ä¸ªPæ¥è¿è¡Œgoroutineï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå®ƒä¼šä»å…¶ä»–çš„OSçº¿ç¨‹é‚£é‡Œæ‹¿ä¸€ä¸ªPè¿‡æ¥ï¼Œ å¦‚æœæ²¡æœ‰æ‹¿åˆ°çš„è¯ï¼Œå®ƒå°±æŠŠgoroutineæ”¾åœ¨ä¸€ä¸ªglobal runqueueé‡Œï¼Œç„¶åè‡ªå·±ç¡çœ ï¼ˆæ”¾å…¥çº¿ç¨‹ç¼“å­˜é‡Œï¼‰ã€‚æ‰€æœ‰çš„Pä¹Ÿä¼šå‘¨æœŸæ€§çš„æ£€æŸ¥global runqueueå¹¶è¿è¡Œå…¶ä¸­çš„goroutineï¼Œå¦åˆ™global runqueueä¸Šçš„goroutineæ°¸è¿œæ— æ³•æ‰§è¡Œã€‚</p><p>å¦ä¸€ç§æƒ…å†µæ˜¯Pæ‰€åˆ†é…çš„ä»»åŠ¡Gå¾ˆå¿«å°±æ‰§è¡Œå®Œäº†ï¼ˆåˆ†é…ä¸å‡ï¼‰ï¼Œè¿™å°±å¯¼è‡´äº†è¿™ä¸ªå¤„ç†å™¨På¾ˆå¿™ï¼Œä½†æ˜¯å…¶ä»–çš„Pè¿˜æœ‰ä»»åŠ¡ï¼Œæ­¤æ—¶å¦‚æœglobal runqueueæ²¡æœ‰ä»»åŠ¡Gäº†ï¼Œé‚£ä¹ˆPä¸å¾—ä¸ä»å…¶ä»–çš„Pé‡Œæ‹¿ä¸€äº›Gæ¥æ‰§è¡Œã€‚</p><figure><a href="https://github.com/KeKe-Li/golang-interview-questions/blob/master/src/images/64.jpg" target="_blank" rel="noopener noreferrer"><img src="https://cdn.jsdelivr.net/gh/xiaobaiTech/image/64-20220314170611931-20220314171134611.jpg" alt="img" tabindex="0" loading="lazy"><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><figcaption>img</figcaption></figure><p>é€šå¸¸æ¥è¯´ï¼Œå¦‚æœPä»å…¶ä»–çš„Pé‚£é‡Œè¦æ‹¿ä»»åŠ¡çš„è¯ï¼Œä¸€èˆ¬å°±æ‹¿run queueçš„ä¸€åŠï¼Œè¿™å°±ç¡®ä¿äº†æ¯ä¸ªOSçº¿ç¨‹éƒ½èƒ½å……åˆ†çš„ä½¿ç”¨ã€‚</p><h2 id="å¹¶å‘ç¼–ç¨‹æ¦‚å¿µæ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#å¹¶å‘ç¼–ç¨‹æ¦‚å¿µæ˜¯ä»€ä¹ˆ"><span>å¹¶å‘ç¼–ç¨‹æ¦‚å¿µæ˜¯ä»€ä¹ˆï¼Ÿ</span></a></h2><p>å¹¶è¡Œæ˜¯æŒ‡ä¸¤ä¸ªæˆ–è€…å¤šä¸ªäº‹ä»¶åœ¨åŒä¸€æ—¶åˆ»å‘ç”Ÿï¼›å¹¶å‘æ˜¯æŒ‡ä¸¤ä¸ªæˆ–å¤šä¸ªäº‹ä»¶åœ¨åŒä¸€æ—¶é—´é—´éš”å‘ç”Ÿã€‚</p><p>å¹¶è¡Œæ˜¯åœ¨ä¸åŒå®ä½“ä¸Šçš„å¤šä¸ªäº‹ä»¶ï¼Œå¹¶å‘æ˜¯åœ¨åŒä¸€å®ä½“ä¸Šçš„å¤šä¸ªäº‹ä»¶ã€‚åœ¨ä¸€å°å¤„ç†å™¨ä¸Šâ€œåŒæ—¶â€å¤„ç†å¤šä¸ªä»»åŠ¡ï¼Œåœ¨å¤šå°å¤„ç†å™¨ä¸ŠåŒæ—¶å¤„ç†å¤šä¸ªä»»åŠ¡ã€‚å¦‚hadoopåˆ†å¸ƒå¼é›†ç¾¤</p><p>å¹¶å‘åé‡äºå¤šä¸ªä»»åŠ¡äº¤æ›¿æ‰§è¡Œï¼Œè€Œå¤šä¸ªä»»åŠ¡ä¹‹é—´æœ‰å¯èƒ½è¿˜æ˜¯ä¸²è¡Œçš„ã€‚è€Œå¹¶è¡Œæ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„â€œåŒæ—¶æ‰§è¡Œâ€ã€‚</p><p>å¹¶å‘ç¼–ç¨‹æ˜¯æŒ‡åœ¨ä¸€å°å¤„ç†å™¨ä¸Šâ€œåŒæ—¶â€å¤„ç†å¤šä¸ªä»»åŠ¡ã€‚å¹¶å‘æ˜¯åœ¨åŒä¸€å®ä½“ä¸Šçš„å¤šä¸ªäº‹ä»¶ã€‚å¤šä¸ªäº‹ä»¶åœ¨åŒä¸€æ—¶é—´é—´éš”å‘ç”Ÿã€‚å¹¶å‘ç¼–ç¨‹çš„ç›®æ ‡æ˜¯å……åˆ†çš„åˆ©ç”¨å¤„ç†å™¨çš„æ¯ä¸€ä¸ªæ ¸ï¼Œä»¥è¾¾åˆ°æœ€é«˜çš„å¤„ç†æ€§èƒ½ã€‚</p><h2 id="ä¸‹é¢è¿™æ®µä»£ç æœ‰ä»€ä¹ˆé”™è¯¯å—" tabindex="-1"><a class="header-anchor" href="#ä¸‹é¢è¿™æ®µä»£ç æœ‰ä»€ä¹ˆé”™è¯¯å—"><span>ä¸‹é¢è¿™æ®µä»£ç æœ‰ä»€ä¹ˆé”™è¯¯å—ï¼Ÿ</span></a></h2><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">funcMui</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y <span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">(</span>sum <span class="token builtin">int</span><span class="token punctuation">,</span><span class="token builtin">error</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> x<span class="token operator">+</span>y<span class="token punctuation">,</span><span class="token boolean">nil</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è§£æ</p><blockquote><p>ç¬¬äºŒä¸ªè¿”å›å€¼æ²¡æœ‰å‘½å,åœ¨å‡½æ•°æœ‰å¤šä¸ªè¿”å›å€¼æ—¶ï¼Œåªè¦æœ‰ä¸€ä¸ªè¿”å›å€¼æœ‰å‘½åï¼Œ<br> å…¶ä»–çš„ä¹Ÿå¿…é¡»å‘½åã€‚å¦‚æœæœ‰å¤šä¸ªè¿”å›å€¼å¿…é¡»åŠ ä¸Šæ‹¬å·()ï¼›<br> å¦‚æœåªæœ‰ä¸€ä¸ªè¿”å›å€¼ä¸”å‘½åä¹Ÿå¿…é¡»åŠ ä¸Šæ‹¬å·()ã€‚<br> è¿™é‡Œçš„ç¬¬ä¸€ä¸ªè¿”å›å€¼æœ‰å‘½å sumï¼Œç¬¬äºŒä¸ªæ²¡æœ‰å‘½åï¼Œæ‰€ä»¥é”™è¯¯ã€‚</p></blockquote><h2 id="ä¸‹é¢å‡ æ®µä»£ç èƒ½å¦é€šè¿‡ç¼–è¯‘-å¦‚æœèƒ½-è¾“å‡ºä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#ä¸‹é¢å‡ æ®µä»£ç èƒ½å¦é€šè¿‡ç¼–è¯‘-å¦‚æœèƒ½-è¾“å‡ºä»€ä¹ˆ"><span>ä¸‹é¢å‡ æ®µä»£ç èƒ½å¦é€šè¿‡ç¼–è¯‘ï¼Œå¦‚æœèƒ½ï¼Œè¾“å‡ºä»€ä¹ˆ?</span></a></h2><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    list <span class="token operator">:=</span> <span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span>
    <span class="token comment">// ç¼–è¯‘é”™è¯¯</span>
    <span class="token comment">// new([]int) ä¹‹åçš„ list æ˜¯ä¸€ä¸ªæœªè®¾ç½®é•¿åº¦çš„ *[]int ç±»å‹çš„æŒ‡é’ˆ</span>
    <span class="token comment">// ä¸èƒ½å¯¹æœªè®¾ç½®é•¿åº¦çš„æŒ‡é’ˆæ‰§è¡Œ append æ“ä½œã€‚</span>
    list <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span>

    s1 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span>
    s2 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>
    <span class="token comment">// ç¼–è¯‘é”™è¯¯ï¼Œs2éœ€è¦å±•å¼€</span>
    s1 <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>s1<span class="token punctuation">,</span> s2<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ä¸‹é¢èƒ½å¦é€šè¿‡ç¼–è¯‘" tabindex="-1"><a class="header-anchor" href="#ä¸‹é¢èƒ½å¦é€šè¿‡ç¼–è¯‘"><span>ä¸‹é¢èƒ½å¦é€šè¿‡ç¼–è¯‘?</span></a></h2><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">Test7</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    sn1 <span class="token operator">:=</span> <span class="token keyword">struct</span> <span class="token punctuation">{</span>
        age  <span class="token builtin">int</span>
        name <span class="token builtin">string</span>
    <span class="token punctuation">}</span><span class="token punctuation">{</span>age<span class="token punctuation">:</span> <span class="token number">11</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">&quot;qq&quot;</span><span class="token punctuation">}</span>
    sn2 <span class="token operator">:=</span> <span class="token keyword">struct</span> <span class="token punctuation">{</span>
        age  <span class="token builtin">int</span>
        name <span class="token builtin">string</span>
    <span class="token punctuation">}</span><span class="token punctuation">{</span>age<span class="token punctuation">:</span> <span class="token number">11</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">&quot;qq&quot;</span><span class="token punctuation">}</span>
    <span class="token comment">// true</span>
    <span class="token keyword">if</span> sn1 <span class="token operator">==</span> sn2 <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;sn1 == sn2&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    sm1 <span class="token operator">:=</span> <span class="token keyword">struct</span> <span class="token punctuation">{</span>
        age <span class="token builtin">int</span>
        m   <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span>
    <span class="token punctuation">}</span><span class="token punctuation">{</span>age<span class="token punctuation">:</span> <span class="token number">11</span><span class="token punctuation">,</span> m<span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
    sm2 <span class="token operator">:=</span> <span class="token keyword">struct</span> <span class="token punctuation">{</span>
        age <span class="token builtin">int</span>
        m   <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span>
    <span class="token punctuation">}</span><span class="token punctuation">{</span>age<span class="token punctuation">:</span> <span class="token number">11</span><span class="token punctuation">,</span> m<span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token comment">// ç¼–è¯‘é”™è¯¯ï¼Œå«æœ‰mapã€sliceç±»å‹çš„structä¸èƒ½è¿›è¡Œæ¯”è¾ƒ</span>
    <span class="token keyword">if</span> sm1 <span class="token operator">==</span> sm2 <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;sm1 == sm2&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="é€šè¿‡æŒ‡é’ˆå˜é‡-p-è®¿é—®å…¶æˆå‘˜å˜é‡-name-æœ‰å“ªå‡ ç§æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#é€šè¿‡æŒ‡é’ˆå˜é‡-p-è®¿é—®å…¶æˆå‘˜å˜é‡-name-æœ‰å“ªå‡ ç§æ–¹å¼"><span>é€šè¿‡æŒ‡é’ˆå˜é‡ p è®¿é—®å…¶æˆå‘˜å˜é‡ nameï¼Œæœ‰å“ªå‡ ç§æ–¹å¼ï¼Ÿ</span></a></h2><p>A. <a href="http://p.name" target="_blank" rel="noopener noreferrer">p.name<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>B. (&amp;p).name</p><p>C. (*p).name</p><p>D. p-&gt;name</p><p>ç­”æ¡ˆ</p><blockquote><p>AC</p></blockquote><h2 id="å…³äºå­—ç¬¦ä¸²è¿æ¥-ä¸‹é¢è¯­æ³•æ­£ç¡®çš„æ˜¯" tabindex="-1"><a class="header-anchor" href="#å…³äºå­—ç¬¦ä¸²è¿æ¥-ä¸‹é¢è¯­æ³•æ­£ç¡®çš„æ˜¯"><span>å…³äºå­—ç¬¦ä¸²è¿æ¥ï¼Œä¸‹é¢è¯­æ³•æ­£ç¡®çš„æ˜¯ï¼Ÿ</span></a></h2><p>A. str := &#39;abc&#39; + &#39;123&#39;</p><p>B. str := &quot;abc&quot; + &quot;123&quot;</p><p>C. str := &#39;123&#39; + &quot;abc&quot;</p><p>D. fmt.Sprintf(&quot;abc%d&quot;, 123)</p><p>ç­”æ¡ˆ</p><blockquote><p>BD</p><p>golangå•å¼•å·&#39;&#39;ä¸­çš„å†…å®¹è¡¨ç¤ºå•ä¸ªå­—ç¬¦ï¼ˆruneï¼‰,åå¼•å·``ä¸­çš„å†…å®¹è¡¨ç¤ºä¸å¯è½¬ä¹‰çš„å­—ç¬¦ä¸²</p></blockquote><h2 id="å…³äºiota-ä¸‹é¢ä»£ç è¾“å‡ºä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#å…³äºiota-ä¸‹é¢ä»£ç è¾“å‡ºä»€ä¹ˆ"><span>å…³äºiotaï¼Œä¸‹é¢ä»£ç è¾“å‡ºä»€ä¹ˆ?</span></a></h2><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">Test10</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">(</span>
        x <span class="token operator">=</span> <span class="token boolean">iota</span>
        <span class="token boolean">_</span>
        y
        z <span class="token operator">=</span> <span class="token string">&quot;pi&quot;</span>
        k
        p <span class="token operator">=</span> <span class="token boolean">iota</span>
        q
    <span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">,</span> k<span class="token punctuation">,</span> p<span class="token punctuation">,</span> q<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¾“å‡º</p><blockquote><p>0 2 pi pi 5 6</p></blockquote><h2 id="mutex-å‡ ç§çŠ¶æ€" tabindex="-1"><a class="header-anchor" href="#mutex-å‡ ç§çŠ¶æ€"><span>Mutex å‡ ç§çŠ¶æ€</span></a></h2><ul><li>mutexLocked â€”è¡¨ç¤ºäº’æ–¥é”çš„é”å®šçŠ¶æ€ï¼›</li><li>mutexWoken â€”è¡¨ç¤ºä»æ­£å¸¸æ¨¡å¼è¢«ä»å”¤é†’ï¼›</li><li>mutexStarving â€”å½“å‰çš„äº’æ–¥é”è¿›å…¥é¥¥é¥¿çŠ¶æ€ï¼›</li><li>waitersCount â€”å½“å‰äº’æ–¥é”ä¸Šç­‰å¾…çš„ Goroutine ä¸ªæ•°ï¼›</li></ul><h2 id="mutex-æ­£å¸¸æ¨¡å¼å’Œé¥¥é¥¿æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#mutex-æ­£å¸¸æ¨¡å¼å’Œé¥¥é¥¿æ¨¡å¼"><span>Mutex æ­£å¸¸æ¨¡å¼å’Œé¥¥é¥¿æ¨¡å¼</span></a></h2><p><strong>æ­£å¸¸æ¨¡å¼(éå…¬å¹³é”)</strong></p><p>æ­£å¸¸æ¨¡å¼ä¸‹ï¼Œæ‰€æœ‰ç­‰å¾…é”çš„ goroutine æŒ‰ç…§ FIFO(å…ˆè¿›å…ˆå‡º)é¡ºåºç­‰å¾…ã€‚å”¤é†’çš„ goroutine ä¸ä¼šç›´æ¥æ‹¥æœ‰é”ï¼Œè€Œæ˜¯ä¼šå’Œæ–°è¯·æ±‚é”çš„ goroutine ç«äº‰é”çš„æ‹¥æœ‰ã€‚æ–°è¯·æ±‚é”çš„ goroutine å…·æœ‰ä¼˜åŠ¿ï¼šå®ƒæ­£åœ¨ CPUä¸Šæ‰§è¡Œï¼Œè€Œä¸”å¯èƒ½æœ‰å¥½å‡ ä¸ªï¼Œæ‰€ä»¥åˆšåˆšå”¤é†’çš„ goroutine æœ‰å¾ˆå¤§å¯èƒ½åœ¨é”ç«äº‰ä¸­å¤±è´¥ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿™ä¸ªè¢«</p><p>å”¤é†’çš„ goroutine ä¼šåŠ å…¥åˆ°ç­‰å¾…é˜Ÿåˆ—çš„å‰é¢ã€‚å¦‚æœä¸€ä¸ªç­‰å¾…çš„ goroutine è¶…è¿‡1msæ²¡æœ‰è·å–é”ï¼Œé‚£ä¹ˆå®ƒå°†ä¼šæŠŠé”è½¬å˜ä¸ºé¥¥é¥¿æ¨¡å¼ã€‚</p><p><strong>é¥¥é¥¿æ¨¡å¼(å…¬å¹³é”)</strong></p><p>ä¸ºäº†è§£å†³äº†ç­‰å¾… Gé˜Ÿåˆ—çš„é•¿å°¾é—®é¢˜</p><p>é¥¥é¥¿æ¨¡å¼ä¸‹ï¼Œç›´æ¥ç”± unlock æŠŠé”äº¤ç»™ç­‰å¾…é˜Ÿåˆ—ä¸­æ’åœ¨ç¬¬ä¸€ä½çš„ G(é˜Ÿå¤´)ï¼ŒåŒæ—¶ï¼Œé¥¥é¥¿æ¨¡å¼ä¸‹ï¼Œæ–°è¿›æ¥çš„ Gä¸ä¼šå‚ä¸æŠ¢é”ä¹Ÿä¸ä¼šè¿›å…¥è‡ªæ—‹çŠ¶æ€ï¼Œä¼šç›´æ¥è¿›å…¥ç­‰å¾…é˜Ÿåˆ—çš„å°¾éƒ¨,è¿™æ ·å¾ˆå¥½çš„è§£å†³äº†è€çš„ g ä¸€ç›´æŠ¢ä¸åˆ°é”çš„åœºæ™¯ã€‚é¥¥é¥¿æ¨¡å¼çš„è§¦å‘æ¡ä»¶ï¼Œå½“ä¸€ä¸ª Gç­‰å¾…é”æ—¶é—´è¶…è¿‡1 æ¯«ç§’æ—¶ï¼Œæˆ–è€…å½“å‰é˜Ÿåˆ—åªå‰©ä¸‹ä¸€ä¸ª g çš„æ—¶å€™ï¼ŒMutexåˆ‡æ¢åˆ°é¥¥é¥¿æ¨¡å¼ã€‚</p><p><strong>æ€»ç»“</strong></p><p>å¯¹äºä¸¤ç§æ¨¡å¼ï¼Œæ­£å¸¸æ¨¡å¼ä¸‹çš„æ€§èƒ½æ˜¯æœ€å¥½çš„ï¼Œgoroutine å¯ä»¥è¿ç»­å¤šæ¬¡è·å–é”ï¼Œé¥¥é¥¿æ¨¡å¼è§£å†³äº†å–é”å…¬å¹³çš„é—®é¢˜ï¼Œä½†æ˜¯æ€§èƒ½ä¼šä¸‹é™ï¼Œå…¶å®æ˜¯æ€§èƒ½å’Œå…¬å¹³çš„ä¸€ä¸ªå¹³è¡¡æ¨¡å¼ã€‚</p><h2 id="mutex-å…è®¸è‡ªæ—‹çš„æ¡ä»¶" tabindex="-1"><a class="header-anchor" href="#mutex-å…è®¸è‡ªæ—‹çš„æ¡ä»¶"><span>Mutex å…è®¸è‡ªæ—‹çš„æ¡ä»¶</span></a></h2><p>1 é”å·²è¢«å ç”¨ï¼Œå¹¶ä¸”é”ä¸å¤„äºé¥¥é¥¿æ¨¡å¼ã€‚</p><p>2 ç§¯ç´¯çš„è‡ªæ—‹æ¬¡æ•°å°äºæœ€å¤§è‡ªæ—‹æ¬¡æ•°ï¼ˆactive_spin=4ï¼‰ã€‚3 cpu æ ¸æ•°å¤§äº1ã€‚</p><p>4 æœ‰ç©ºé—²çš„ Pã€‚</p><p>5 å½“å‰ goroutine æ‰€æŒ‚è½½çš„ Pä¸‹ï¼Œæœ¬åœ°å¾…è¿è¡Œé˜Ÿåˆ—ä¸ºç©ºã€‚</p><h2 id="rwmutex-å®ç°" tabindex="-1"><a class="header-anchor" href="#rwmutex-å®ç°"><span>RWMutex å®ç°</span></a></h2><p>é€šè¿‡è®°å½• readerCount è¯»é”çš„æ•°é‡æ¥è¿›è¡Œæ§åˆ¶ï¼Œå½“æœ‰ä¸€ä¸ªå†™é”çš„æ—¶å€™ï¼Œä¼šå°†è¯»é”æ•°é‡è®¾ç½®ä¸ºè´Ÿæ•°1&lt;&lt;30ã€‚ç›®çš„æ˜¯è®©æ–°è¿›å…¥çš„è¯»é”ç­‰å¾…å†™é”ä¹‹åé‡Šæ”¾é€šçŸ¥è¯»é”ã€‚åŒæ ·çš„å†™é”ä¹Ÿä¼šç­‰ç­‰å¾…ä¹‹å‰çš„è¯»é”éƒ½é‡Šæ”¾å®Œæ¯•ï¼Œæ‰ä¼šå¼€å§‹è¿›è¡Œåç»­çš„æ“ä½œã€‚è€Œç­‰å†™é”é‡Šæ”¾å®Œä¹‹åï¼Œä¼šå°†å€¼é‡æ–°åŠ ä¸Š1&lt;&lt;30,å¹¶é€šçŸ¥åˆšæ‰æ–°è¿›å…¥çš„è¯»é”(rw.readerSem)ï¼Œä¸¤è€…äº’ç›¸é™åˆ¶ã€‚</p><h2 id="rwmutex-æ³¨æ„äº‹é¡¹" tabindex="-1"><a class="header-anchor" href="#rwmutex-æ³¨æ„äº‹é¡¹"><span>RWMutex æ³¨æ„äº‹é¡¹</span></a></h2><ul><li><p>RWMutex æ˜¯å•å†™å¤šè¯»é”ï¼Œè¯¥é”å¯ä»¥åŠ å¤šä¸ªè¯»é”æˆ–è€…ä¸€ä¸ªå†™é”</p></li><li><p>è¯»é”å ç”¨çš„æƒ…å†µä¸‹ä¼šé˜»æ­¢å†™ï¼Œä¸ä¼šé˜»æ­¢è¯»ï¼Œå¤šä¸ª goroutine å¯ä»¥åŒæ—¶è·å–è¯»é”</p></li><li><p>å†™é”ä¼šé˜»æ­¢å…¶ä»– goroutineï¼ˆæ— è®ºè¯»å’Œå†™ï¼‰è¿›æ¥ï¼Œæ•´ä¸ªé”ç”±è¯¥ goroutine ç‹¬å </p></li><li><p>é€‚ç”¨äºè¯»å¤šå†™å°‘çš„åœºæ™¯</p></li><li><p>RWMutex ç±»å‹å˜é‡çš„é›¶å€¼æ˜¯ä¸€ä¸ªæœªé”å®šçŠ¶æ€çš„äº’æ–¥é”ã€‚</p></li><li><p>RWMutex åœ¨é¦–æ¬¡è¢«ä½¿ç”¨ä¹‹åå°±ä¸èƒ½å†è¢«æ‹·è´ã€‚</p></li><li><p>RWMutex çš„è¯»é”æˆ–å†™é”åœ¨æœªé”å®šçŠ¶æ€ï¼Œè§£é”æ“ä½œéƒ½ä¼šå¼•å‘ panicã€‚</p></li><li><p>RWMutex çš„ä¸€ä¸ªå†™é” Lock å»é”å®šä¸´ç•ŒåŒºçš„å…±äº«èµ„æºï¼Œå¦‚æœä¸´ç•ŒåŒºçš„å…±äº«èµ„æºå·²è¢«ï¼ˆè¯»é”æˆ–å†™é”ï¼‰é”å®šï¼Œè¿™ä¸ªå†™é”æ“ä½œçš„ goroutine å°†è¢«é˜»å¡ç›´åˆ°è§£é”ã€‚</p></li><li><p>RWMutex çš„è¯»é”ä¸è¦ç”¨äºé€’å½’è°ƒç”¨ï¼Œæ¯”è¾ƒå®¹æ˜“äº§ç”Ÿæ­»é”ã€‚</p></li><li><p>RWMutex çš„é”å®šçŠ¶æ€ä¸ç‰¹å®šçš„ goroutine æ²¡æœ‰å…³è”ã€‚ä¸€ä¸ª goroutine å¯ä»¥ RLockï¼ˆLockï¼‰ï¼Œå¦ä¸€ä¸ª goroutine å¯ä»¥ RUnlockï¼ˆUnlockï¼‰ã€‚</p></li><li><p>å†™é”è¢«è§£é”åï¼Œæ‰€æœ‰å› æ“ä½œé”å®šè¯»é”è€Œè¢«é˜»å¡çš„ goroutine ä¼šè¢«å”¤é†’ï¼Œå¹¶éƒ½å¯ä»¥æˆåŠŸé”å®šè¯»é”ã€‚</p></li><li><p>è¯»é”è¢«è§£é”åï¼Œåœ¨æ²¡æœ‰è¢«å…¶ä»–è¯»é”é”å®šçš„å‰æä¸‹ï¼Œæ‰€æœ‰å› æ“ä½œé”å®šå†™é”è€Œè¢«é˜»å¡çš„ goroutineï¼Œå…¶ä¸­ç­‰å¾…æ—¶é—´æœ€é•¿çš„ä¸€ä¸ª goroutine ä¼šè¢«å”¤é†’ã€‚</p></li></ul><h2 id="cond-æ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#cond-æ˜¯ä»€ä¹ˆ"><span>Cond æ˜¯ä»€ä¹ˆ</span></a></h2><p>Condå®ç°äº†ä¸€ç§æ¡ä»¶å˜é‡ï¼Œå¯ä»¥ä½¿ç”¨åœ¨å¤šä¸ª Reader ç­‰å¾…å…±äº«èµ„æº ready çš„åœºæ™¯ï¼ˆå¦‚æœåªæœ‰ä¸€è¯»ä¸€å†™ï¼Œä¸€ä¸ªé”æˆ–è€… channel å°±æå®šäº†ï¼‰</p><p>æ¯ä¸ª Condéƒ½ä¼šå…³è”ä¸€ä¸ª Lockï¼ˆsync.Mutex or sync.RWMutexï¼‰ï¼Œå½“ä¿®æ”¹æ¡ä»¶æˆ–è€…è°ƒç”¨ Wait æ–¹æ³•æ—¶ï¼Œå¿…é¡»åŠ é”ï¼Œä¿æŠ¤ conditionã€‚</p><h2 id="broadcast-å’Œ-signal-åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#broadcast-å’Œ-signal-åŒºåˆ«"><span>Broadcast å’Œ Signal åŒºåˆ«</span></a></h2><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>Cond<span class="token punctuation">)</span> <span class="token function">Broadcast</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Broadcast ä¼šå”¤é†’æ‰€æœ‰ç­‰å¾… c çš„ goroutineã€‚è°ƒç”¨ Broadcast çš„æ—¶å€™ï¼Œå¯ä»¥åŠ é”ï¼Œä¹Ÿå¯ä»¥ä¸åŠ é”ã€‚</p><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>Cond<span class="token punctuation">)</span> <span class="token function">Signal</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Signal åªå”¤é†’1 ä¸ªç­‰å¾… c çš„ goroutineã€‚è°ƒç”¨ Signal çš„æ—¶å€™ï¼Œå¯ä»¥åŠ é”ï¼Œä¹Ÿå¯ä»¥ä¸åŠ é”ã€‚</p><h2 id="cond-ä¸­-wait-ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#cond-ä¸­-wait-ä½¿ç”¨"><span>Cond ä¸­ Wait ä½¿ç”¨</span></a></h2><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>Cond<span class="token punctuation">)</span> <span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Wait()ä¼šè‡ªåŠ¨é‡Šæ”¾ c.Lï¼Œå¹¶æŒ‚èµ·è°ƒç”¨è€…çš„ goroutineã€‚ä¹‹åæ¢å¤æ‰§è¡Œï¼ŒWait()ä¼šåœ¨è¿”å›æ—¶å¯¹ c.L åŠ é”ã€‚</p><p>é™¤éè¢« Signal æˆ–è€… Broadcast å”¤é†’ï¼Œå¦åˆ™ Wait()ä¸ä¼šè¿”å›ã€‚</p><p>ç”±äº Wait()ç¬¬ä¸€æ¬¡æ¢å¤æ—¶ï¼ŒC.L å¹¶æ²¡æœ‰åŠ é”ï¼Œæ‰€ä»¥å½“ Wait è¿”å›æ—¶ï¼Œè°ƒç”¨è€…é€šå¸¸å¹¶ä¸èƒ½å‡è®¾æ¡ä»¶ä¸ºçœŸã€‚</p><p>å–è€Œä»£ä¹‹çš„æ˜¯,è°ƒç”¨è€…åº”è¯¥åœ¨å¾ªç¯ä¸­è°ƒç”¨ Waitã€‚ï¼ˆç®€å•æ¥è¯´ï¼Œåªè¦æƒ³ä½¿ç”¨ conditionï¼Œå°±å¿…é¡»åŠ é”ã€‚ï¼‰</p><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="language-go"><code>c<span class="token punctuation">.</span>L<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> <span class="token operator">!</span><span class="token function">condition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

	c<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token operator">...</span> <span class="token builtin">make</span> use of condition <span class="token operator">...</span> 

c<span class="token punctuation">.</span>L<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="waitgroup-ç”¨æ³•" tabindex="-1"><a class="header-anchor" href="#waitgroup-ç”¨æ³•"><span>WaitGroup ç”¨æ³•</span></a></h2><p>ä¸€ä¸ª WaitGroup å¯¹è±¡å¯ä»¥ç­‰å¾…ä¸€ç»„åç¨‹ç»“æŸã€‚ä½¿ç”¨æ–¹æ³•æ˜¯ï¼š</p><p>1.main åç¨‹é€šè¿‡è°ƒç”¨ wg.Add(delta int)è®¾ç½® worker åç¨‹çš„ä¸ªæ•°ï¼Œç„¶ååˆ›å»º worker åç¨‹ï¼›</p><p>2.worker åç¨‹æ‰§è¡Œç»“æŸä»¥åï¼Œéƒ½è¦è°ƒç”¨ wg.Done()ï¼›</p><p>3.main åç¨‹è°ƒç”¨ wg.Wait()ä¸”è¢« blockï¼Œç›´åˆ°æ‰€æœ‰ worker åç¨‹å…¨éƒ¨æ‰§è¡Œç»“æŸåè¿”å›ã€‚</p><h2 id="waitgroup-å®ç°åŸç†" tabindex="-1"><a class="header-anchor" href="#waitgroup-å®ç°åŸç†"><span>WaitGroup å®ç°åŸç†</span></a></h2><ul><li>WaitGroup ä¸»è¦ç»´æŠ¤äº†2 ä¸ªè®¡æ•°å™¨ï¼Œä¸€ä¸ªæ˜¯è¯·æ±‚è®¡æ•°å™¨ vï¼Œä¸€ä¸ªæ˜¯ç­‰å¾…è®¡æ•°å™¨ wï¼ŒäºŒè€…ç»„æˆä¸€ä¸ª64bit çš„å€¼ï¼Œè¯·æ±‚è®¡æ•°å™¨å é«˜32bitï¼Œç­‰å¾…è®¡æ•°å™¨å ä½32bitã€‚</li><li>æ¯æ¬¡ Addæ‰§è¡Œï¼Œè¯·æ±‚è®¡æ•°å™¨ v åŠ 1ï¼ŒDoneæ–¹æ³•æ‰§è¡Œï¼Œè¯·æ±‚è®¡æ•°å™¨å‡1ï¼Œv ä¸º0 æ—¶é€šè¿‡ä¿¡å·é‡å”¤é†’ Wait()ã€‚</li></ul><h2 id="ä¸‹é¢ä»£ç è¾“å‡ºä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#ä¸‹é¢ä»£ç è¾“å‡ºä»€ä¹ˆ"><span>ä¸‹é¢ä»£ç è¾“å‡ºä»€ä¹ˆï¼Ÿ</span></a></h2><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">Test16</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    a <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">}</span>
    b <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">}</span>
    <span class="token keyword">if</span> a <span class="token operator">==</span> b <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;equal&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;not equal&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>A. compilation error</p><p>B. equal</p><p>C. not equal</p><p>ç­”æ¡ˆ</p><blockquote><p>A ç¼–è¯‘é”™è¯¯</p><p>å¯¹äºæ•°ç»„è€Œè¨€ï¼Œä¸€ä¸ªæ•°ç»„æ˜¯ç”±æ•°ç»„ä¸­çš„å€¼å’Œæ•°ç»„çš„é•¿åº¦ä¸¤éƒ¨åˆ†ç»„æˆçš„ï¼Œå¦‚æœä¸¤ä¸ªæ•°ç»„é•¿åº¦ä¸åŒï¼Œé‚£ä¹ˆä¸¤ä¸ªæ•°ç»„æ˜¯å±äº<br> ä¸åŒç±»å‹çš„ï¼Œæ˜¯ä¸èƒ½è¿›è¡Œæ¯”è¾ƒçš„</p></blockquote><h2 id="ä»€ä¹ˆæ˜¯-sync-once" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-sync-once"><span>ä»€ä¹ˆæ˜¯ sync.Once</span></a></h2><ul><li>Once å¯ä»¥ç”¨æ¥æ‰§è¡Œä¸”ä»…ä»…æ‰§è¡Œä¸€æ¬¡åŠ¨ä½œï¼Œå¸¸å¸¸ç”¨äºå•ä¾‹å¯¹è±¡çš„åˆå§‹åŒ–åœºæ™¯ã€‚</li><li>Once å¸¸å¸¸ç”¨æ¥åˆå§‹åŒ–å•ä¾‹èµ„æºï¼Œæˆ–è€…å¹¶å‘è®¿é—®åªéœ€åˆå§‹åŒ–ä¸€æ¬¡çš„å…±äº«èµ„æºï¼Œæˆ–è€…åœ¨æµ‹è¯•çš„æ—¶å€™åˆå§‹åŒ–ä¸€æ¬¡æµ‹è¯•èµ„æºã€‚</li><li>sync.Once åªæš´éœ²äº†ä¸€ä¸ªæ–¹æ³• Doï¼Œä½ å¯ä»¥å¤šæ¬¡è°ƒç”¨ Do æ–¹æ³•ï¼Œä½†æ˜¯åªæœ‰ç¬¬ä¸€æ¬¡è°ƒç”¨ Do æ–¹æ³•æ—¶ f å‚æ•°æ‰ä¼šæ‰§è¡Œï¼Œè¿™é‡Œçš„ f æ˜¯ä¸€ä¸ªæ— å‚æ•°æ— è¿”å›å€¼çš„å‡½æ•°ã€‚</li></ul><h2 id="ä»€ä¹ˆæ“ä½œå«åšåŸå­æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ“ä½œå«åšåŸå­æ“ä½œ"><span>ä»€ä¹ˆæ“ä½œå«åšåŸå­æ“ä½œ</span></a></h2><p>ä¸€ä¸ªæˆ–è€…å¤šä¸ªæ“ä½œåœ¨ CPUæ‰§è¡Œè¿‡ç¨‹ä¸­ä¸è¢«ä¸­æ–­çš„ç‰¹æ€§ï¼Œç§°ä¸ºåŸå­æ€§(atomicity)ã€‚è¿™äº›æ“ä½œå¯¹å¤–è¡¨ç°æˆä¸€ä¸ªä¸å¯åˆ†å‰²çš„æ•´ä½“ï¼Œä»–ä»¬è¦ä¹ˆéƒ½æ‰§è¡Œï¼Œè¦ä¹ˆéƒ½ä¸æ‰§è¡Œï¼Œå¤–ç•Œä¸ä¼šçœ‹åˆ°ä»–ä»¬åªæ‰§è¡Œåˆ°ä¸€åŠçš„çŠ¶æ€ã€‚è€Œåœ¨ç°å®ä¸–ç•Œä¸­ï¼ŒCPU ä¸å¯èƒ½ä¸ä¸­æ–­çš„æ‰§è¡Œä¸€ç³»åˆ—æ“ä½œï¼Œä½†å¦‚æœæˆ‘ä»¬åœ¨æ‰§è¡Œå¤šä¸ªæ“ä½œæ—¶ï¼Œèƒ½è®©ä»–ä»¬çš„ä¸­é—´çŠ¶æ€å¯¹å¤–ä¸å¯è§ï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥å®£åŸä»–ä»¬æ‹¥æœ‰äº†â€œä¸å¯åˆ†å‰²â€çš„åŸå­æ€§ã€‚</p><p>åœ¨ Goä¸­ï¼Œä¸€æ¡æ™®é€šçš„èµ‹å€¼è¯­å¥å…¶å®ä¸æ˜¯ä¸€ä¸ªåŸå­æ“ä½œã€‚åˆ—å¦‚ï¼Œåœ¨32 ä½æœºå™¨ä¸Šå†™ int64 ç±»å‹çš„å˜é‡å°±ä¼šæœ‰ä¸­é—´çŠ¶æ€ï¼Œå› ä¸ºä»–ä¼šè¢«æ‹†æˆä¸¤æ¬¡å†™æ“ä½œ(MOV)â€”â€”å†™ä½32 ä½å’Œå†™é«˜32 ä½ã€‚</p><h2 id="åŸå­æ“ä½œå’Œé”çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#åŸå­æ“ä½œå’Œé”çš„åŒºåˆ«"><span>åŸå­æ“ä½œå’Œé”çš„åŒºåˆ«</span></a></h2><p>åŸå­æ“ä½œç”±åº•å±‚ç¡¬ä»¶æ”¯æŒï¼Œè€Œé”åˆ™ç”±æ“ä½œç³»ç»Ÿçš„è°ƒåº¦å™¨å®ç°ã€‚é”åº”å½“ç”¨æ¥ä¿æŠ¤ä¸€æ®µé€»è¾‘ï¼Œå¯¹äºä¸€ä¸ªå˜é‡æ›´æ–°çš„ä¿æŠ¤ï¼ŒåŸå­æ“ä½œé€šå¸¸ä¼šæ›´æœ‰æ•ˆç‡ï¼Œå¹¶ä¸”æ›´èƒ½åˆ©ç”¨è®¡ç®—æœºå¤šæ ¸çš„ä¼˜åŠ¿ï¼Œå¦‚æœè¦æ›´æ–°çš„æ˜¯ä¸€ä¸ªå¤åˆå¯¹è±¡ï¼Œåˆ™åº”å½“ä½¿ç”¨ atomic.Value å°è£…å¥½çš„å®ç°ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯-cas" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-cas"><span>ä»€ä¹ˆæ˜¯ CAS</span></a></h2><p>CASçš„å…¨ç§°ä¸º Compare And Swapï¼Œç›´è¯‘å°±æ˜¯æ¯”è¾ƒäº¤æ¢ã€‚æ˜¯ä¸€æ¡ CPUçš„åŸå­æŒ‡ä»¤ï¼Œå…¶ä½œç”¨æ˜¯è®© CPUå…ˆè¿›è¡Œæ¯”è¾ƒä¸¤ä¸ªå€¼æ˜¯å¦ç›¸ç­‰ï¼Œç„¶ååŸå­åœ°æ›´æ–°æŸä¸ªä½ç½®çš„å€¼ï¼Œå…¶å®ç°æ–¹å¼æ˜¯ç»™äºˆç¡¬ä»¶å¹³å°çš„æ±‡ç¼–æŒ‡ä»¤ï¼Œåœ¨ intel çš„ CPUä¸­ï¼Œä½¿ç”¨çš„ cmpxchgæŒ‡ä»¤ï¼Œå°±æ˜¯è¯´ CASæ˜¯é ç¡¬ä»¶å®ç°çš„ï¼Œä»è€Œåœ¨ç¡¬ä»¶å±‚é¢æå‡æ•ˆç‡ã€‚</p><p>ç®€è¿°è¿‡ç¨‹æ˜¯è¿™æ ·ï¼š</p><p>å‡è®¾åŒ…å«3 ä¸ªå‚æ•°å†…å­˜ä½ç½®(V)ã€é¢„æœŸåŸå€¼(A)å’Œæ–°å€¼(B)ã€‚Vè¡¨ç¤ºè¦æ›´æ–°å˜é‡çš„å€¼ï¼ŒEè¡¨ç¤ºé¢„æœŸå€¼ï¼ŒNè¡¨ç¤ºæ–°å€¼ã€‚ä»…å½“ Vå€¼ç­‰äº Eå€¼æ—¶ï¼Œæ‰ä¼šå°† Vçš„å€¼è®¾ä¸º Nï¼Œå¦‚æœ Vå€¼å’Œ Eå€¼ä¸åŒï¼Œåˆ™è¯´æ˜å·²ç»æœ‰å…¶ä»–çº¿ç¨‹åœ¨åšæ›´æ–°ï¼Œåˆ™å½“å‰çº¿ç¨‹ä»€ä¹ˆéƒ½ä¸</p><p>åšï¼Œæœ€å CASè¿”å›å½“å‰ Vçš„çœŸå®å€¼ã€‚CASæ“ä½œæ—¶æŠ±ç€ä¹è§‚çš„æ€åº¦è¿›è¡Œçš„ï¼Œå®ƒæ€»æ˜¯è®¤ä¸ºè‡ªå·±å¯ä»¥æˆåŠŸå®Œæˆæ“ä½œã€‚åŸºäºè¿™æ ·çš„åŸç†ï¼ŒCASæ“ä½œå³ä½¿æ²¡æœ‰é”ï¼Œä¹Ÿå¯ä»¥å‘ç°å…¶ä»–çº¿ç¨‹å¯¹äºå½“å‰çº¿ç¨‹çš„å¹²æ‰°ã€‚</p><h2 id="sync-pool-æœ‰ä»€ä¹ˆç”¨" tabindex="-1"><a class="header-anchor" href="#sync-pool-æœ‰ä»€ä¹ˆç”¨"><span>sync.Pool æœ‰ä»€ä¹ˆç”¨</span></a></h2><p>å¯¹äºå¾ˆå¤šéœ€è¦é‡å¤åˆ†é…ã€å›æ”¶å†…å­˜çš„åœ°æ–¹ï¼Œsync.Pool æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚é¢‘ç¹åœ°åˆ†é…ã€å›æ”¶å†…å­˜ä¼šç»™ GC å¸¦æ¥ä¸€å®šçš„è´Ÿæ‹…ï¼Œä¸¥é‡çš„æ—¶å€™ä¼šå¼•èµ· CPU çš„æ¯›åˆºï¼Œè€Œ sync.Pool å¯ä»¥å°†æš‚æ—¶ä¸ç”¨çš„å¯¹è±¡ç¼“å­˜èµ·æ¥ï¼Œå¾…ä¸‹æ¬¡éœ€è¦çš„æ—¶å€™ç›´æ¥ä½¿ç”¨ï¼Œä¸ç”¨å†æ¬¡ç»è¿‡å†…å­˜åˆ†é…ï¼Œå¤ç”¨å¯¹è±¡çš„å†…å­˜ï¼Œå‡è½» GC çš„å‹åŠ›ï¼Œæå‡ç³»ç»Ÿçš„æ€§èƒ½ã€‚</p><h2 id="goroutine-å®šä¹‰" tabindex="-1"><a class="header-anchor" href="#goroutine-å®šä¹‰"><span>Goroutine å®šä¹‰</span></a></h2><p>Goroutine æ˜¯ä¸€ä¸ªä¸å…¶ä»– goroutines å¹¶è¡Œè¿è¡Œåœ¨åŒä¸€åœ°å€ç©ºé—´çš„ Go å‡½æ•°æˆ–æ–¹æ³•ã€‚ä¸€ä¸ªè¿è¡Œçš„ç¨‹åºç”±ä¸€ä¸ªæˆ–æ›´å¤šä¸ª goroutine ç»„æˆã€‚å®ƒä¸çº¿ç¨‹ã€åç¨‹ã€è¿›ç¨‹ç­‰ä¸åŒã€‚å®ƒæ˜¯ä¸€ä¸ª goroutineâ€â€”â€” Rob Pike</p><p>Goroutines åœ¨åŒä¸€ä¸ªç”¨æˆ·åœ°å€ç©ºé—´é‡Œå¹¶è¡Œç‹¬ç«‹æ‰§è¡Œ functionsï¼Œchannels åˆ™ç”¨äº goroutines é—´çš„é€šä¿¡å’ŒåŒæ­¥è®¿é—®æ§åˆ¶ã€‚</p><h2 id="gmp-æŒ‡çš„æ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#gmp-æŒ‡çš„æ˜¯ä»€ä¹ˆ"><span>GMP æŒ‡çš„æ˜¯ä»€ä¹ˆ</span></a></h2><p>Gï¼ˆGoroutineï¼‰ï¼šæˆ‘ä»¬æ‰€è¯´çš„åç¨‹ï¼Œä¸ºç”¨æˆ·çº§çš„è½»é‡çº§çº¿ç¨‹ï¼Œæ¯ä¸ª Goroutine å¯¹è±¡ä¸­çš„ sched ä¿å­˜ç€å…¶ä¸Šä¸‹æ–‡ä¿¡æ¯.</p><p>Mï¼ˆMachineï¼‰ï¼šå¯¹å†…æ ¸çº§çº¿ç¨‹çš„å°è£…ï¼Œæ•°é‡å¯¹åº”çœŸå®çš„ CPUæ•°ï¼ˆçœŸæ­£å¹²æ´»çš„å¯¹è±¡ï¼‰.</p><p>Pï¼ˆProcessorï¼‰ï¼šå³ä¸º Gå’Œ Mçš„è°ƒåº¦å¯¹è±¡ï¼Œç”¨æ¥è°ƒåº¦ Gå’Œ Mä¹‹é—´çš„å…³è”å…³ç³»ï¼Œå…¶æ•°é‡å¯é€šè¿‡ GOMAXPROCS()æ¥è®¾ç½®ï¼Œé»˜è®¤ä¸ºæ ¸å¿ƒæ•°ã€‚</p><h2 id="ç»™å¤§å®¶ä¸¢è„¸äº†-ç”¨äº†ä¸‰å¹´golang-æˆ‘è¿˜æ˜¯æ²¡ç­”å¯¹è¿™é“å†…å­˜æ³„æ¼é¢˜" tabindex="-1"><a class="header-anchor" href="#ç»™å¤§å®¶ä¸¢è„¸äº†-ç”¨äº†ä¸‰å¹´golang-æˆ‘è¿˜æ˜¯æ²¡ç­”å¯¹è¿™é“å†…å­˜æ³„æ¼é¢˜"><span>ç»™å¤§å®¶ä¸¢è„¸äº†ï¼Œç”¨äº†ä¸‰å¹´golangï¼Œæˆ‘è¿˜æ˜¯æ²¡ç­”å¯¹è¿™é“å†…å­˜æ³„æ¼é¢˜</span></a></h2><p><a href="https://mp.weixin.qq.com/s/-agtdhlW7Yj7S88a0z7KHg" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/s/-agtdhlW7Yj7S88a0z7KHg<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="ä½ ä¸€å®šä¼šé‡åˆ°çš„å†…å­˜å›æ”¶ç­–ç•¥å¯¼è‡´çš„ç–‘ä¼¼å†…å­˜æ³„æ¼çš„é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#ä½ ä¸€å®šä¼šé‡åˆ°çš„å†…å­˜å›æ”¶ç­–ç•¥å¯¼è‡´çš„ç–‘ä¼¼å†…å­˜æ³„æ¼çš„é—®é¢˜"><span>ä½ ä¸€å®šä¼šé‡åˆ°çš„å†…å­˜å›æ”¶ç­–ç•¥å¯¼è‡´çš„ç–‘ä¼¼å†…å­˜æ³„æ¼çš„é—®é¢˜</span></a></h2><p><a href="https://colobu.com/2019/08/28/go-memory-leak-i-dont-think-so/" target="_blank" rel="noopener noreferrer">https://colobu.com/2019/08/28/go-memory-leak-i-dont-think-so/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="gmpé‡Œä¸ºä»€ä¹ˆè¦æœ‰p" tabindex="-1"><a class="header-anchor" href="#gmpé‡Œä¸ºä»€ä¹ˆè¦æœ‰p"><span>GMPé‡Œä¸ºä»€ä¹ˆè¦æœ‰P?</span></a></h2><p><a href="https://mp.weixin.qq.com/s/SEE2TUeZQZ7W1BKkmnelAA" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/s/SEE2TUeZQZ7W1BKkmnelAA<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="goæ ˆæ‰©å®¹å’Œæ ˆç¼©å®¹-è¿ç»­æ ˆçš„ç¼ºç‚¹" tabindex="-1"><a class="header-anchor" href="#goæ ˆæ‰©å®¹å’Œæ ˆç¼©å®¹-è¿ç»­æ ˆçš„ç¼ºç‚¹"><span>goæ ˆæ‰©å®¹å’Œæ ˆç¼©å®¹ï¼Œè¿ç»­æ ˆçš„ç¼ºç‚¹</span></a></h2><p><a href="https://segmentfault.com/a/1190000019570427" target="_blank" rel="noopener noreferrer">https://segmentfault.com/a/1190000019570427<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="golangéšè—æŠ€èƒ½-æ€ä¹ˆè®¿é—®ç§æœ‰æˆå‘˜" tabindex="-1"><a class="header-anchor" href="#golangéšè—æŠ€èƒ½-æ€ä¹ˆè®¿é—®ç§æœ‰æˆå‘˜"><span>golangéšè—æŠ€èƒ½:æ€ä¹ˆè®¿é—®ç§æœ‰æˆå‘˜</span></a></h2><p><a href="https://www.jianshu.com/p/7b3638b47845" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/7b3638b47845<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="_1-0-ä¹‹å‰-gm-è°ƒåº¦æ¨¡å‹" tabindex="-1"><a class="header-anchor" href="#_1-0-ä¹‹å‰-gm-è°ƒåº¦æ¨¡å‹"><span>1.0 ä¹‹å‰ GM è°ƒåº¦æ¨¡å‹</span></a></h2><p>è°ƒåº¦å™¨æŠŠ Géƒ½åˆ†é…åˆ° Mä¸Šï¼Œä¸åŒçš„ Gåœ¨ä¸åŒçš„ Må¹¶å‘è¿è¡Œæ—¶ï¼Œéƒ½éœ€è¦å‘ç³»ç»Ÿç”³è¯·èµ„æºï¼Œæ¯”å¦‚å †æ ˆå†…å­˜ç­‰ï¼Œå› ä¸ºèµ„æºæ˜¯å…¨å±€çš„ï¼Œå°±ä¼šå› ä¸ºèµ„æºç«äº‰ç…§æˆå¾ˆå¤šæ€§èƒ½æŸè€—ã€‚ä¸ºäº†è§£å†³è¿™ä¸€çš„é—®é¢˜ go ä»1.1 ç‰ˆæœ¬å¼•å…¥ï¼Œåœ¨è¿è¡Œæ—¶ç³»ç»Ÿçš„æ—¶å€™åŠ å…¥ p å¯¹è±¡ï¼Œè®© På»ç®¡ç†è¿™ä¸ª Gå¯¹è±¡ï¼ŒMæƒ³è¦è¿è¡Œ Gï¼Œå¿…é¡»ç»‘å®š Pï¼Œæ‰èƒ½è¿è¡Œ Pæ‰€ç®¡ç†</p><p>çš„ Gã€‚</p><p>1ï¼å•ä¸€å…¨å±€äº’æ–¥é”(Sched.Lock)å’Œé›†ä¸­çŠ¶æ€å­˜å‚¨</p><p>2ï¼Goroutine ä¼ é€’é—®é¢˜ï¼ˆM ç»å¸¸åœ¨ M ä¹‹é—´ä¼ é€’â€å¯è¿è¡Œâ€çš„ goroutineï¼‰</p><p>3ï¼æ¯ä¸ª Måšå†…å­˜ç¼“å­˜ï¼Œå¯¼è‡´å†…å­˜å ç”¨è¿‡é«˜ï¼Œæ•°æ®å±€éƒ¨æ€§è¾ƒå·®</p><p>4ï¼é¢‘ç¹ syscall è°ƒç”¨ï¼Œå¯¼è‡´ä¸¥é‡çš„çº¿ç¨‹é˜»å¡/è§£é”ï¼ŒåŠ å‰§é¢å¤–çš„æ€§èƒ½æŸè€—ã€‚</p><h2 id="gmp-è°ƒåº¦æµç¨‹" tabindex="-1"><a class="header-anchor" href="#gmp-è°ƒåº¦æµç¨‹"><span>GMP è°ƒåº¦æµç¨‹</span></a></h2><figure><img src="/assets/image/docs/Aspose.Words.51b43265-f45e-4206-a945-0b7c10078cb5.017.jpeg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ul><li>æ¯ä¸ª Pæœ‰ä¸ªå±€éƒ¨é˜Ÿåˆ—ï¼Œå±€éƒ¨é˜Ÿåˆ—ä¿å­˜å¾…æ‰§è¡Œçš„ goroutine(æµç¨‹2)ï¼Œå½“ Mç»‘å®šçš„ Pçš„çš„å±€éƒ¨é˜Ÿåˆ—å·²ç»æ»¡äº†ä¹‹åå°±ä¼šæŠŠ goroutine æ”¾åˆ°å…¨å±€é˜Ÿåˆ—(æµç¨‹2-1)</li><li>æ¯ä¸ª På’Œä¸€ä¸ª Mç»‘å®šï¼ŒMæ˜¯çœŸæ­£çš„æ‰§è¡Œ Pä¸­ goroutine çš„å®ä½“(æµç¨‹3)ï¼ŒM ä»ç»‘å®šçš„ Pä¸­çš„å±€éƒ¨é˜Ÿåˆ—è·å– Gæ¥æ‰§è¡Œ</li><li>å½“ Mç»‘å®šçš„ Pçš„å±€éƒ¨é˜Ÿåˆ—ä¸ºç©ºæ—¶ï¼ŒMä¼šä»å…¨å±€é˜Ÿåˆ—è·å–åˆ°æœ¬åœ°é˜Ÿåˆ—æ¥æ‰§è¡Œ</li></ul><p>G(æµç¨‹3.1)ï¼Œå½“ä»å…¨å±€é˜Ÿåˆ—ä¸­æ²¡æœ‰è·å–åˆ°å¯æ‰§è¡Œçš„ Gæ—¶å€™ï¼ŒMä¼šä»å…¶ä»– P çš„å±€éƒ¨é˜Ÿåˆ—ä¸­å·å– Gæ¥æ‰§è¡Œ(æµç¨‹3.2)ï¼Œè¿™ç§ä»å…¶ä»– På·çš„æ–¹å¼ç§°ä¸º work stealing</p><ul><li>å½“ Gå› ç³»ç»Ÿè°ƒç”¨(syscall)é˜»å¡æ—¶ä¼šé˜»å¡ Mï¼Œæ­¤æ—¶ Pä¼šå’Œ Mè§£ç»‘å³ hand</li></ul><p>offï¼Œå¹¶å¯»æ‰¾æ–°çš„ idle çš„ Mï¼Œè‹¥æ²¡æœ‰ idle çš„ Må°±ä¼šæ–°å»ºä¸€ä¸ª M(æµç¨‹5.1)ã€‚</p><ul><li>å½“ Gå›  channel æˆ–è€… network I/O é˜»å¡æ—¶ï¼Œä¸ä¼šé˜»å¡ Mï¼ŒMä¼šå¯»æ‰¾å…¶ä»– runnable çš„ Gï¼›å½“é˜»å¡çš„ Gæ¢å¤åä¼šé‡æ–°è¿›å…¥ runnable è¿›å…¥ Pé˜Ÿåˆ—ç­‰å¾…æ‰§è¡Œ(æµç¨‹5.3)</li></ul><h2 id="gmp-ä¸­-work-stealing-æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#gmp-ä¸­-work-stealing-æœºåˆ¶"><span>GMP ä¸­ work stealing æœºåˆ¶</span></a></h2><p>å­˜åˆ° Pæœ¬åœ°é˜Ÿåˆ—æˆ–è€…æ˜¯å…¨å±€é˜Ÿåˆ—ã€‚Pæ­¤æ—¶å»å”¤é†’ä¸€ä¸ª Mã€‚Pç»§ç»­æ‰§è¡Œå®ƒçš„æ‰§è¡Œåºã€‚Må¯»æ‰¾æ˜¯å¦æœ‰ç©ºé—²çš„ Pï¼Œå¦‚æœæœ‰åˆ™å°†è¯¥ Gå¯¹è±¡ç§»åŠ¨åˆ°å®ƒæœ¬èº«ã€‚æ¥ä¸‹æ¥ Mæ‰§è¡Œä¸€ä¸ªè°ƒåº¦å¾ªç¯(è°ƒç”¨ Gå¯¹è±¡-&gt;æ‰§è¡Œ-&gt;æ¸…ç†çº¿ç¨‹â†’ç»§ç»­æ‰¾æ–°çš„ Goroutine æ‰§è¡Œ)ã€‚</p><h2 id="gmp-ä¸­-hand-off-æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#gmp-ä¸­-hand-off-æœºåˆ¶"><span>GMP ä¸­ hand off æœºåˆ¶</span></a></h2><p>å½“æœ¬çº¿ç¨‹ Må› ä¸º Gè¿›è¡Œçš„ç³»ç»Ÿè°ƒç”¨é˜»å¡æ—¶ï¼Œçº¿ç¨‹é‡Šæ”¾ç»‘å®šçš„ Pï¼ŒæŠŠ Pè½¬ç§»ç»™å…¶ä»–ç©ºé—²çš„ M&#39;æ‰§è¡Œã€‚å½“å‘ç”Ÿä¸Šçº¿æ–‡åˆ‡æ¢æ—¶ï¼Œéœ€è¦å¯¹æ‰§è¡Œç°åœºè¿›è¡Œä¿æŠ¤ï¼Œä»¥ä¾¿ä¸‹æ¬¡è¢«è°ƒåº¦æ‰§è¡Œæ—¶è¿›è¡Œç°åœºæ¢å¤ã€‚Goè°ƒåº¦å™¨ Mçš„æ ˆä¿å­˜åœ¨ Gå¯¹è±¡ä¸Šï¼Œåªéœ€è¦å°† Mæ‰€éœ€è¦çš„å¯„å­˜å™¨(SPã€PCç­‰)ä¿å­˜åˆ° Gå¯¹è±¡ä¸Šå°±å¯ä»¥å®ç°ç°åœºä¿æŠ¤ã€‚å½“è¿™äº›å¯„å­˜å™¨æ•°æ®è¢«ä¿æŠ¤èµ·æ¥ï¼Œå°±éšæ—¶å¯ä»¥åšä¸Šä¸‹æ–‡åˆ‡æ¢äº†ï¼Œåœ¨ä¸­æ–­ä¹‹å‰æŠŠç°åœºä¿å­˜èµ·æ¥ã€‚å¦‚æœæ­¤æ—¶ Gä»»åŠ¡è¿˜æ²¡æœ‰æ‰§è¡Œå®Œï¼ŒMå¯ä»¥å°†ä»»åŠ¡é‡æ–°ä¸¢åˆ° Pçš„ä»»åŠ¡é˜Ÿåˆ—ï¼Œç­‰å¾…ä¸‹ä¸€æ¬¡è¢«è°ƒåº¦æ‰§è¡Œã€‚å½“å†æ¬¡è¢«è°ƒåº¦æ‰§è¡Œæ—¶ï¼ŒMé€šè¿‡è®¿é—® Gçš„ vdsoSPã€vdsoPCå¯„å­˜å™¨è¿›è¡Œç°åœºæ¢å¤(ä»ä¸Šæ¬¡ä¸­æ–­ä½ç½®ç»§ç»­æ‰§è¡Œ)ã€‚</p><h2 id="åä½œå¼çš„æŠ¢å å¼è°ƒåº¦" tabindex="-1"><a class="header-anchor" href="#åä½œå¼çš„æŠ¢å å¼è°ƒåº¦"><span>åä½œå¼çš„æŠ¢å å¼è°ƒåº¦</span></a></h2><p>åœ¨1.14 ç‰ˆæœ¬ä¹‹å‰ï¼Œç¨‹åºåªèƒ½ä¾é  Goroutine ä¸»åŠ¨è®©å‡º CPU èµ„æºæ‰èƒ½è§¦å‘è°ƒåº¦ï¼Œå­˜åœ¨é—®é¢˜</p><ul><li>æŸäº› Goroutine å¯ä»¥é•¿æ—¶é—´å ç”¨çº¿ç¨‹ï¼Œé€ æˆå…¶å®ƒ Goroutine çš„é¥¥é¥¿</li><li>åƒåœ¾å›æ”¶éœ€è¦æš‚åœæ•´ä¸ªç¨‹åºï¼ˆStop-the-worldï¼ŒSTWï¼‰ï¼Œæœ€é•¿å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿçš„æ—¶é—´ï¼Œå¯¼è‡´æ•´ä¸ªç¨‹åºæ— æ³•å·¥ä½œã€‚</li></ul><h2 id="åŸºäºä¿¡å·çš„æŠ¢å å¼è°ƒåº¦" tabindex="-1"><a class="header-anchor" href="#åŸºäºä¿¡å·çš„æŠ¢å å¼è°ƒåº¦"><span>åŸºäºä¿¡å·çš„æŠ¢å å¼è°ƒåº¦</span></a></h2><p>åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼ŒGoè¿è¡Œæ—¶å¹¶è¡Œæ‰§è¡Œï¼ˆæ³¨æ„ï¼Œä¸æ˜¯å¹¶å‘ï¼‰çš„ goroutines æ•°é‡æ˜¯å°äºç­‰äº P çš„æ•°é‡çš„ã€‚ä¸ºäº†æé«˜ç³»ç»Ÿçš„æ€§èƒ½ï¼ŒP çš„æ•°é‡è‚¯å®šä¸æ˜¯è¶Šå°è¶Šå¥½ï¼Œæ‰€ä»¥å®˜æ–¹é»˜è®¤å€¼å°±æ˜¯ CPU çš„æ ¸å¿ƒæ•°ï¼Œè®¾ç½®çš„è¿‡å°çš„è¯ï¼Œå¦‚æœä¸€ä¸ªæŒæœ‰ P çš„ Mï¼Œç”±äº P å½“å‰æ‰§è¡Œçš„ G è°ƒç”¨äº† syscall è€Œå¯¼è‡´ M è¢«é˜»å¡ï¼Œé‚£ä¹ˆæ­¤æ—¶å…³é”®ç‚¹ï¼š GO çš„è°ƒåº¦å™¨æ˜¯è¿Ÿé’çš„ï¼Œå®ƒå¾ˆå¯èƒ½ä»€ä¹ˆéƒ½æ²¡åšï¼Œç›´åˆ° M é˜»å¡äº†ç›¸å½“é•¿æ—¶é—´ä»¥åï¼Œæ‰ä¼šå‘ç°æœ‰ä¸€ä¸ª P/M è¢« syscall é˜»å¡äº†ã€‚ç„¶åï¼Œæ‰ä¼šç”¨ç©ºé—²çš„ M æ¥å¼ºè¿™ä¸ª Pã€‚é€šè¿‡ sysmon ç›‘æ§å®ç°çš„æŠ¢å å¼è°ƒåº¦ï¼Œæœ€å¿«åœ¨20usï¼Œæœ€æ…¢åœ¨10-20msæ‰ä¼šå‘ç°æœ‰ä¸€ä¸ª M æŒæœ‰ P å¹¶é˜»å¡äº†ã€‚æ“ä½œç³»ç»Ÿåœ¨1ms å†…å¯ä»¥å®Œæˆå¾ˆå¤šæ¬¡çº¿ç¨‹è°ƒåº¦ï¼ˆä¸€èˆ¬æƒ…å†µ1mså¯ä»¥å®Œæˆå‡ åæ¬¡çº¿ç¨‹è°ƒåº¦ï¼‰ï¼ŒGo å‘èµ· IO/syscall çš„æ—¶å€™æ‰§è¡Œè¯¥ G çš„ M ä¼šé˜»å¡ç„¶åè¢« OSè°ƒåº¦èµ°ï¼ŒPä»€ä¹ˆä¹Ÿä¸å¹²ï¼Œsysmon æœ€æ…¢è¦10-20ms æ‰èƒ½å‘ç°è¿™ä¸ªé˜»å¡ï¼Œè¯´ä¸å®šé‚£æ—¶å€™é˜»å¡å·²ç»ç»“æŸäº†ï¼Œå®è´µçš„ Pèµ„æºå°±è¿™ä¹ˆè¢«é˜»å¡çš„ Mæµªè´¹äº†ã€‚</p><h2 id="gmp-è°ƒåº¦è¿‡ç¨‹ä¸­å­˜åœ¨å“ªäº›é˜»å¡" tabindex="-1"><a class="header-anchor" href="#gmp-è°ƒåº¦è¿‡ç¨‹ä¸­å­˜åœ¨å“ªäº›é˜»å¡"><span>GMP è°ƒåº¦è¿‡ç¨‹ä¸­å­˜åœ¨å“ªäº›é˜»å¡</span></a></h2><ul><li>I/Oï¼Œselect</li><li>block on syscall</li><li>channel</li><li>ç­‰å¾…é”</li><li>runtime.Gosched()</li></ul><h2 id="sysmon-æœ‰ä»€ä¹ˆä½œç”¨" tabindex="-1"><a class="header-anchor" href="#sysmon-æœ‰ä»€ä¹ˆä½œç”¨"><span>sysmon æœ‰ä»€ä¹ˆä½œç”¨</span></a></h2><p>sysmon ä¹Ÿå«ç›‘æ§çº¿ç¨‹ï¼Œå˜åŠ¨çš„å‘¨æœŸæ€§æ£€æŸ¥ï¼Œå¥½å¤„</p><ul><li>é‡Šæ”¾é—²ç½®è¶…è¿‡5 åˆ†é’Ÿçš„ span ç‰©ç†å†…å­˜ï¼›</li><li>å¦‚æœè¶…è¿‡2 åˆ†é’Ÿæ²¡æœ‰åƒåœ¾å›æ”¶ï¼Œå¼ºåˆ¶æ‰§è¡Œï¼›</li><li>å°†é•¿æ—¶é—´æœªå¤„ç†çš„ netpoll æ·»åŠ åˆ°å…¨å±€é˜Ÿåˆ—ï¼›</li><li>å‘é•¿æ—¶é—´è¿è¡Œçš„ G ä»»åŠ¡å‘å‡ºæŠ¢å è°ƒåº¦(è¶…è¿‡10msçš„ gï¼Œä¼šè¿›è¡Œ retake)ï¼›</li><li>æ”¶å›å›  syscall é•¿æ—¶é—´é˜»å¡çš„ Pï¼›</li></ul><h2 id="golangé¢è¯•é¢˜-æ€ä¹ˆé¿å…å†…å­˜é€ƒé€¸" tabindex="-1"><a class="header-anchor" href="#golangé¢è¯•é¢˜-æ€ä¹ˆé¿å…å†…å­˜é€ƒé€¸"><span>golangé¢è¯•é¢˜ï¼šæ€ä¹ˆé¿å…å†…å­˜é€ƒé€¸ï¼Ÿ</span></a></h2><p><a href="https://mp.weixin.qq.com/s/VzRTHz1JaDUvNRVB_yJa1A" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/s/VzRTHz1JaDUvNRVB_yJa1A<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="golangé¢è¯•é¢˜-ç®€å•èŠèŠå†…å­˜é€ƒé€¸" tabindex="-1"><a class="header-anchor" href="#golangé¢è¯•é¢˜-ç®€å•èŠèŠå†…å­˜é€ƒé€¸"><span>golangé¢è¯•é¢˜ï¼šç®€å•èŠèŠå†…å­˜é€ƒé€¸ï¼Ÿ</span></a></h2><p><a href="https://mp.weixin.qq.com/s/wJmztRMB1ZAAIItyMcS0tw" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/s/wJmztRMB1ZAAIItyMcS0tw<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="ä¸‰è‰²æ ‡è®°åŸç†" tabindex="-1"><a class="header-anchor" href="#ä¸‰è‰²æ ‡è®°åŸç†"><span>ä¸‰è‰²æ ‡è®°åŸç†</span></a></h2><p>æˆ‘ä»¬é¦–å…ˆçœ‹ä¸€å¼ å›¾ï¼Œå¤§æ¦‚å°±ä¼šå¯¹ä¸‰è‰²æ ‡è®°æ³•æœ‰ä¸€ä¸ªå¤§è‡´çš„äº†è§£ï¼š</p><figure><img src="/assets/image/docs/Aspose.Words.51b43265-f45e-4206-a945-0b7c10078cb5.018.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>åŸç†ï¼š</p><p>é¦–å…ˆæŠŠæ‰€æœ‰çš„å¯¹è±¡éƒ½æ”¾åˆ°ç™½è‰²çš„é›†åˆä¸­</p><ul><li>ä»æ ¹èŠ‚ç‚¹å¼€å§‹éå†å¯¹è±¡ï¼Œéå†åˆ°çš„ç™½è‰²å¯¹è±¡ä»ç™½è‰²é›†åˆä¸­æ”¾åˆ°ç°è‰²é›†åˆä¸­</li><li>éå†ç°è‰²é›†åˆä¸­çš„å¯¹è±¡ï¼ŒæŠŠç°è‰²å¯¹è±¡å¼•ç”¨çš„ç™½è‰²é›†åˆçš„å¯¹è±¡æ”¾å…¥åˆ°ç°è‰²é›†åˆä¸­ï¼ŒåŒæ—¶æŠŠéå†è¿‡çš„ç°è‰²é›†åˆä¸­çš„å¯¹è±¡æ”¾åˆ°é»‘è‰²çš„é›†åˆä¸­</li><li>å¾ªç¯æ­¥éª¤3ï¼ŒçŸ¥é“ç°è‰²é›†åˆä¸­æ²¡æœ‰å¯¹è±¡</li><li>æ­¥éª¤4 ç»“æŸåï¼Œç™½è‰²é›†åˆä¸­çš„å¯¹è±¡å°±æ˜¯ä¸å¯è¾¾å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯åƒåœ¾ï¼Œè¿›è¡Œå›æ”¶</li></ul><h2 id="æ’å…¥å†™å±éšœ" tabindex="-1"><a class="header-anchor" href="#æ’å…¥å†™å±éšœ"><span>æ’å…¥å†™å±éšœ</span></a></h2><p>golang çš„å›æ”¶æ²¡æœ‰æ··åˆå±éšœä¹‹å‰ï¼Œä¸€ç›´æ˜¯æ’å…¥å†™å±éšœï¼Œç”±äºæ ˆèµ‹å€¼æ²¡æœ‰ hook çš„åŸå› ï¼Œæ‰€ä»¥æ ˆä¸­æ²¡æœ‰å¯ç”¨å†™å±éšœï¼Œæ‰€ä»¥æœ‰ STWã€‚golang çš„è§£å†³æ–¹æ³•æ˜¯ï¼šåªæ˜¯éœ€è¦åœ¨ç»“æŸæ—¶å¯åŠ¨ STWæ¥é‡æ–°æ‰«ææ ˆã€‚è¿™ä¸ªè‡ªç„¶å°±ä¼šå¯¼è‡´æ•´ä¸ªè¿›ç¨‹çš„èµ‹å€¼å™¨å¡é¡¿ï¼Œæ‰€ä»¥åé¢ golang æ˜¯å¼•ç”¨æ··åˆå†™å±éšœè§£å†³è¿™ä¸ªé—®é¢˜ã€‚æ··åˆå†™å±éšœä¹‹åï¼Œå°±æ²¡æœ‰ STWã€‚</p><h2 id="åˆ é™¤å†™å±éšœ" tabindex="-1"><a class="header-anchor" href="#åˆ é™¤å†™å±éšœ"><span>åˆ é™¤å†™å±éšœ</span></a></h2><p>goalng æ²¡æœ‰è¿™ä¸€æ­¥ï¼Œgolang çš„å†…å­˜å†™å±éšœæ˜¯ç”±æ’å…¥å†™å±éšœåˆ°æ··åˆå†™å±éšœè¿‡æ¸¡çš„ã€‚ç®€å•ä»‹ç»ä¸€ä¸‹ï¼Œä¸€ä¸ªå¯¹è±¡å³ä½¿è¢«åˆ é™¤äº†æœ€åä¸€ä¸ªæŒ‡å‘å®ƒçš„æŒ‡é’ˆä¹Ÿä¾æ—§å¯ä»¥æ´»è¿‡è¿™ä¸€è½®ï¼Œåœ¨ä¸‹ä¸€è½® GCä¸­è¢«æ¸…ç†æ‰ã€‚</p><h2 id="å†™å±éšœ" tabindex="-1"><a class="header-anchor" href="#å†™å±éšœ"><span>å†™å±éšœ</span></a></h2><p>Goåœ¨è¿›è¡Œä¸‰è‰²æ ‡è®°çš„æ—¶å€™å¹¶æ²¡æœ‰ STWï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ­¤æ—¶çš„å¯¹è±¡è¿˜æ˜¯å¯ä»¥è¿›è¡Œä¿®æ”¹ã€‚</p><p>é‚£ä¹ˆæˆ‘ä»¬è€ƒè™‘ä¸€ä¸‹ï¼Œä¸‹é¢çš„æƒ…å†µã€‚</p><figure><img src="/assets/image/docs/Aspose.Words.51b43265-f45e-4206-a945-0b7c10078cb5.019.jpeg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>æˆ‘ä»¬åœ¨è¿›è¡Œä¸‰è‰²æ ‡è®°ä¸­æ‰«æç°è‰²é›†åˆä¸­ï¼Œæ‰«æåˆ°äº†å¯¹è±¡ Aï¼Œå¹¶æ ‡è®°äº†å¯¹è±¡ Açš„æ‰€æœ‰å¼•ç”¨ï¼Œè¿™æ—¶å€™ï¼Œå¼€å§‹æ‰«æå¯¹è±¡ Dçš„å¼•ç”¨ï¼Œè€Œæ­¤æ—¶ï¼Œå¦ä¸€ä¸ª goroutine ä¿®æ”¹äº† D-&gt;Eçš„å¼•ç”¨ï¼Œå˜æˆäº†å¦‚ä¸‹å›¾æ‰€ç¤º</p><figure><img src="/assets/image/docs/Aspose.Words.51b43265-f45e-4206-a945-0b7c10078cb5.020.jpeg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>è¿™æ ·ä¼šä¸ä¼šå¯¼è‡´ Eå¯¹è±¡å°±æ‰«æä¸åˆ°äº†ï¼Œè€Œè¢«è¯¯è®¤ä¸ºä¸ºç™½è‰²å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯åƒåœ¾å†™å±éšœå°±æ˜¯ä¸ºäº†è§£å†³è¿™æ ·çš„é—®é¢˜ï¼Œå¼•å…¥å†™å±éšœåï¼Œåœ¨ä¸Šè¿°æ­¥éª¤åï¼Œ Eä¼šè¢«è®¤ä¸ºæ˜¯å­˜æ´»çš„ï¼Œå³ä½¿åé¢ Eè¢« Aå¯¹è±¡æŠ›å¼ƒï¼ŒEä¼šè¢«åœ¨ä¸‹ä¸€è½®çš„ GCä¸­è¿›è¡Œå›æ”¶ï¼Œè¿™ä¸€è½® GCä¸­æ˜¯ä¸ä¼šå¯¹å¯¹è±¡ Eè¿›è¡Œå›æ”¶çš„ã€‚</p><h2 id="æ··åˆå†™å±éšœ" tabindex="-1"><a class="header-anchor" href="#æ··åˆå†™å±éšœ"><span>æ··åˆå†™å±éšœ</span></a></h2><ul><li>æ··åˆå†™å±éšœç»§æ‰¿äº†æ’å…¥å†™å±éšœçš„ä¼˜ç‚¹ï¼Œèµ·å§‹æ— éœ€ STW æ‰“å¿«ç…§ï¼Œç›´æ¥å¹¶å‘æ‰«æåƒåœ¾å³å¯ï¼›</li><li>æ··åˆå†™å±éšœç»§æ‰¿äº†åˆ é™¤å†™å±éšœçš„ä¼˜ç‚¹ï¼Œèµ‹å€¼å™¨æ˜¯é»‘è‰²èµ‹å€¼å™¨ï¼ŒGCæœŸé—´ï¼Œä»»ä½•åœ¨æ ˆä¸Šåˆ›å»ºçš„æ–°å¯¹è±¡ï¼Œå‡ä¸ºé»‘è‰²ã€‚æ‰«æè¿‡ä¸€æ¬¡å°±ä¸éœ€è¦æ‰«æäº†ï¼Œè¿™æ ·å°±æ¶ˆé™¤äº†æ’å…¥å†™å±éšœæ—¶æœŸæœ€å STW çš„é‡æ–°æ‰«ææ ˆï¼›</li><li>æ··åˆå†™å±éšœæ‰«æç²¾åº¦ç»§æ‰¿äº†åˆ é™¤å†™å±éšœï¼Œæ¯”æ’å…¥å†™å±éšœæ›´ä½ï¼Œéšç€å¸¦æ¥çš„æ˜¯ GC è¿‡ç¨‹å…¨ç¨‹æ—  STWï¼›</li><li>æ··åˆå†™å±éšœæ‰«ææ ˆè™½ç„¶æ²¡æœ‰ STWï¼Œä½†æ˜¯æ‰«ææŸä¸€ä¸ªå…·ä½“çš„æ ˆçš„æ—¶å€™ï¼Œè¿˜æ˜¯è¦åœæ­¢è¿™ä¸ª goroutine èµ‹å€¼å™¨çš„å·¥ä½œçš„å“ˆï¼ˆé’ˆå¯¹ä¸€ä¸ª goroutine æ ˆæ¥è¯´ï¼Œæ˜¯æš‚åœæ‰«çš„ï¼Œè¦ä¹ˆå…¨ç°ï¼Œè¦ä¹ˆå…¨é»‘å“ˆï¼ŒåŸå­çŠ¶æ€åˆ‡æ¢ï¼‰ã€‚</li></ul><h2 id="gc-è§¦å‘æ—¶æœº" tabindex="-1"><a class="header-anchor" href="#gc-è§¦å‘æ—¶æœº"><span>GC è§¦å‘æ—¶æœº</span></a></h2><p><strong>ä¸»åŠ¨è§¦å‘</strong>ï¼šè°ƒç”¨ runtime.GC</p><p><strong>è¢«åŠ¨è§¦å‘</strong>ï¼š</p><p>ä½¿ç”¨ç³»ç»Ÿç›‘æ§ï¼Œè¯¥è§¦å‘æ¡ä»¶ç”± runtime.forcegcperiod å˜é‡æ§åˆ¶ï¼Œé»˜è®¤ä¸º2 åˆ†é’Ÿã€‚å½“è¶…è¿‡ä¸¤åˆ†é’Ÿæ²¡æœ‰äº§ç”Ÿä»»ä½• GC æ—¶ï¼Œå¼ºåˆ¶è§¦å‘ GCã€‚</p><p>ä½¿ç”¨æ­¥è°ƒï¼ˆPacingï¼‰ç®—æ³•ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯æ§åˆ¶å†…å­˜å¢é•¿çš„æ¯”ä¾‹ã€‚å¦‚ Go çš„ GC æ˜¯ä¸€ç§æ¯”ä¾‹ GC,ä¸‹ä¸€æ¬¡ GC ç»“æŸæ—¶çš„å †å¤§å°å’Œä¸Šä¸€æ¬¡ GC å­˜æ´»å †å¤§å°æˆæ¯”ä¾‹.ç”± GOGC æ§åˆ¶,é»˜è®¤100,å³2 å€çš„å…³ç³»,200 å°±æ˜¯3 å€,</p><p>å½“ Goæ–°åˆ›å»ºçš„å¯¹è±¡æ‰€å ç”¨çš„å†…å­˜å¤§å°ï¼Œé™¤ä»¥ä¸Šæ¬¡ GCç»“æŸåä¿ç•™ä¸‹æ¥çš„å¯¹è±¡å ç”¨å†…å­˜å¤§å°ã€‚</p><h2 id="go-è¯­è¨€ä¸­-gc-çš„æµç¨‹æ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#go-è¯­è¨€ä¸­-gc-çš„æµç¨‹æ˜¯ä»€ä¹ˆ"><span>Go è¯­è¨€ä¸­ GC çš„æµç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ</span></a></h2><p>å½“å‰ç‰ˆæœ¬çš„ Go ä»¥ STW ä¸ºç•Œé™ï¼Œå¯ä»¥å°† GC åˆ’åˆ†ä¸ºäº”ä¸ªé˜¶æ®µï¼šé˜¶æ®µè¯´æ˜èµ‹å€¼å™¨çŠ¶æ€ GCMarkæ ‡è®°å‡†å¤‡é˜¶æ®µï¼Œä¸ºå¹¶å‘æ ‡è®°åšå‡†å¤‡å·¥ä½œï¼Œå¯åŠ¨å†™å±éšœ STWGCMarkæ‰«ææ ‡è®°é˜¶æ®µï¼Œä¸èµ‹å€¼å™¨å¹¶å‘æ‰§è¡Œï¼Œå†™å±éšœå¼€å¯å¹¶å‘ GCMarkTermination æ ‡è®°ç»ˆæ­¢é˜¶æ®µï¼Œä¿è¯ä¸€ä¸ªå‘¨æœŸå†…æ ‡è®°ä»»åŠ¡å®Œæˆï¼Œåœæ­¢å†™å±éšœ STWGCoffå†…å­˜æ¸…æ‰«é˜¶æ®µï¼Œå°†éœ€è¦å›æ”¶çš„å†…å­˜å½’è¿˜åˆ°å †ä¸­ï¼Œå†™å±éšœå…³é—­å¹¶å‘ GCoffå†…å­˜å½’è¿˜é˜¶æ®µï¼Œå°†è¿‡å¤šçš„å†…å­˜å½’è¿˜ç»™æ“ä½œç³»ç»Ÿï¼Œå†™å±éšœå…³é—­å¹¶å‘ã€‚</p><h2 id="gc-å¦‚ä½•è°ƒä¼˜" tabindex="-1"><a class="header-anchor" href="#gc-å¦‚ä½•è°ƒä¼˜"><span>GC å¦‚ä½•è°ƒä¼˜</span></a></h2><p>é€šè¿‡ go tool pprof å’Œ go tool trace ç­‰å·¥å…·</p><ul><li>æ§åˆ¶å†…å­˜åˆ†é…çš„é€Ÿåº¦ï¼Œé™åˆ¶ goroutine çš„æ•°é‡ï¼Œä»è€Œæé«˜èµ‹å€¼å™¨å¯¹ CPU çš„åˆ©ç”¨ç‡ã€‚</li><li>å‡å°‘å¹¶å¤ç”¨å†…å­˜ï¼Œä¾‹å¦‚ä½¿ç”¨ sync.Pool æ¥å¤ç”¨éœ€è¦é¢‘ç¹åˆ›å»ºä¸´æ—¶å¯¹è±¡ï¼Œä¾‹å¦‚æå‰åˆ†é…è¶³å¤Ÿçš„å†…å­˜æ¥é™ä½å¤šä½™çš„æ‹·è´ã€‚</li><li>éœ€è¦æ—¶ï¼Œå¢å¤§ GOGC çš„å€¼ï¼Œé™ä½ GC çš„è¿è¡Œé¢‘ç‡ã€‚</li></ul><h2 id="goè¯­è¨€çš„æ ˆç©ºé—´ç®¡ç†æ˜¯æ€ä¹ˆæ ·çš„" tabindex="-1"><a class="header-anchor" href="#goè¯­è¨€çš„æ ˆç©ºé—´ç®¡ç†æ˜¯æ€ä¹ˆæ ·çš„"><span>Goè¯­è¨€çš„æ ˆç©ºé—´ç®¡ç†æ˜¯æ€ä¹ˆæ ·çš„?</span></a></h2><p>Goè¯­è¨€çš„è¿è¡Œç¯å¢ƒï¼ˆruntimeï¼‰ä¼šåœ¨goroutineéœ€è¦çš„æ—¶å€™åŠ¨æ€åœ°åˆ†é…æ ˆç©ºé—´ï¼Œè€Œä¸æ˜¯ç»™æ¯ä¸ªgoroutineåˆ†é…å›ºå®šå¤§å°çš„å†…å­˜ç©ºé—´ã€‚è¿™æ ·å°±é¿å…äº†éœ€è¦ç¨‹åºå‘˜æ¥å†³å®šæ ˆçš„å¤§å°ã€‚</p><p>åˆ†å—å¼çš„æ ˆæ˜¯æœ€åˆGoè¯­è¨€ç»„ç»‡æ ˆçš„æ–¹å¼ã€‚å½“åˆ›å»ºä¸€ä¸ªgoroutineçš„æ—¶å€™ï¼Œå®ƒä¼šåˆ†é…ä¸€ä¸ª8KBçš„å†…å­˜ç©ºé—´æ¥ç»™goroutineçš„æ ˆä½¿ç”¨ã€‚æˆ‘ä»¬å¯èƒ½ä¼šè€ƒè™‘å½“è¿™8KBçš„æ ˆç©ºé—´è¢«ç”¨å®Œçš„æ—¶å€™è¯¥æ€ä¹ˆåŠ?</p><p>ä¸ºäº†å¤„ç†è¿™ç§æƒ…å†µï¼Œæ¯ä¸ªGoå‡½æ•°çš„å¼€å¤´éƒ½æœ‰ä¸€å°æ®µæ£€æµ‹ä»£ç ã€‚è¿™æ®µä»£ç ä¼šæ£€æŸ¥æˆ‘ä»¬æ˜¯å¦å·²ç»ç”¨å®Œäº†åˆ†é…çš„æ ˆç©ºé—´ã€‚å¦‚æœæ˜¯çš„è¯ï¼Œå®ƒä¼šè°ƒç”¨<code>morestack</code>å‡½æ•°ã€‚<code>morestack</code>å‡½æ•°åˆ†é…ä¸€å—æ–°çš„å†…å­˜ä½œä¸ºæ ˆç©ºé—´ï¼Œå¹¶ä¸”åœ¨è¿™å—æ ˆç©ºé—´çš„åº•éƒ¨å¡«å…¥å„ç§ä¿¡æ¯ï¼ˆåŒ…æ‹¬ä¹‹å‰çš„é‚£å—æ ˆåœ°å€ï¼‰ã€‚åœ¨åˆ†é…äº†è¿™å—æ–°çš„æ ˆç©ºé—´ä¹‹åï¼Œå®ƒä¼šé‡è¯•åˆšæ‰é€ æˆæ ˆç©ºé—´ä¸è¶³çš„å‡½æ•°ã€‚è¿™ä¸ªè¿‡ç¨‹å«åšæ ˆåˆ†è£‚ï¼ˆstack splitï¼‰ã€‚</p><p>åœ¨æ–°åˆ†é…çš„æ ˆåº•éƒ¨ï¼Œè¿˜æ’å…¥äº†ä¸€ä¸ªå«åš<code>lessstack</code>çš„å‡½æ•°æŒ‡é’ˆã€‚è¿™ä¸ªå‡½æ•°è¿˜æ²¡æœ‰è¢«è°ƒç”¨ã€‚è¿™æ ·è®¾ç½®æ˜¯ä¸ºäº†ä»åˆšæ‰é€ æˆæ ˆç©ºé—´ä¸è¶³çš„é‚£ä¸ªå‡½æ•°è¿”å›æ—¶åšå‡†å¤‡çš„ã€‚å½“æˆ‘ä»¬ä»é‚£ä¸ªå‡½æ•°è¿”å›æ—¶ï¼Œå®ƒä¼šè·³è½¬åˆ°<code>lessstack</code>ã€‚<code>lessstack</code>å‡½æ•°ä¼šæŸ¥çœ‹åœ¨æ ˆåº•éƒ¨å­˜æ”¾çš„æ•°æ®ç»“æ„é‡Œçš„ä¿¡æ¯ï¼Œç„¶åè°ƒæ•´æ ˆæŒ‡é’ˆï¼ˆstack pointerï¼‰ã€‚è¿™æ ·å°±å®Œæˆäº†ä»æ–°çš„æ ˆå—åˆ°è€çš„æ ˆå—çš„è·³è½¬ã€‚æ¥ä¸‹æ¥ï¼Œæ–°åˆ†é…çš„è¿™ä¸ªå—æ ˆç©ºé—´å°±å¯ä»¥è¢«é‡Šæ”¾æ‰äº†ã€‚</p><p><code>åˆ†å—å¼çš„æ ˆ</code>è®©æˆ‘ä»¬èƒ½å¤ŸæŒ‰ç…§éœ€æ±‚æ¥æ‰©å±•å’Œæ”¶ç¼©æ ˆçš„å¤§å°ã€‚ Goå¼€å‘è€…ä¸éœ€è¦èŠ±ç²¾åŠ›å»ä¼°è®¡goroutineä¼šç”¨åˆ°å¤šå¤§çš„æ ˆã€‚åˆ›å»ºä¸€ä¸ªæ–°çš„goroutineçš„å¼€é”€ä¹Ÿä¸å¤§ã€‚å½“ Goå¼€å‘è€…ä¸çŸ¥é“æ ˆä¼šæ‰©å±•åˆ°å¤šå°‘å¤§æ—¶ï¼Œå®ƒä¹Ÿèƒ½å¾ˆå¥½çš„å¤„ç†è¿™ç§æƒ…å†µã€‚</p><p>è¿™ä¸€ç›´æ˜¯ä¹‹å‰Goè¯­è¨€ç®¡ç†æ ˆçš„çš„æ–¹æ³•ã€‚ä½†è¿™ä¸ªæ–¹æ³•æœ‰ä¸€ä¸ªé—®é¢˜ã€‚ç¼©å‡æ ˆç©ºé—´æ˜¯ä¸€ä¸ªå¼€é”€ç›¸å¯¹è¾ƒå¤§çš„æ“ä½œã€‚å¦‚æœåœ¨ä¸€ä¸ªå¾ªç¯é‡Œæœ‰æ ˆåˆ†è£‚ï¼Œé‚£ä¹ˆå®ƒçš„å¼€é”€å°±å˜å¾—ä¸å¯å¿½ç•¥äº†ã€‚ä¸€ä¸ªå‡½æ•°ä¼šæ‰©å±•ï¼Œç„¶ååˆ†è£‚æ ˆã€‚å½“å®ƒè¿”å›çš„æ—¶å€™åˆä¼šé‡Šæ”¾ä¹‹å‰åˆ†é…çš„å†…å­˜å—ã€‚å¦‚æœè¿™äº›éƒ½å‘ç”Ÿåœ¨ä¸€ä¸ªå¾ªç¯é‡Œçš„è¯ï¼Œä»£ä»·æ˜¯ç›¸å½“å¤§çš„ã€‚ è¿™å°±æ˜¯æ‰€è°“çš„çƒ­åˆ†è£‚é—®é¢˜ï¼ˆhot split problemï¼‰ã€‚å®ƒæ˜¯Goè¯­è¨€å¼€å‘è€…é€‰æ‹©æ–°çš„æ ˆç®¡ç†æ–¹æ³•çš„ä¸»è¦åŸå› ã€‚æ–°çš„æ–¹æ³•å«åš<code>æ ˆå¤åˆ¶æ³•ï¼ˆstack copyingï¼‰</code>ã€‚</p><p>æ ˆå¤åˆ¶æ³•ä¸€å¼€å§‹å’Œåˆ†å—å¼çš„æ ˆå¾ˆåƒã€‚å½“goroutineè¿è¡Œå¹¶ç”¨å®Œæ ˆç©ºé—´çš„æ—¶å€™ï¼Œä¸ä¹‹å‰çš„æ–¹æ³•ä¸€æ ·ï¼Œæ ˆæº¢å‡ºæ£€æŸ¥ä¼šè¢«è§¦å‘ã€‚ä½†æ˜¯ï¼Œä¸åƒä¹‹å‰çš„æ–¹æ³•é‚£æ ·åˆ†é…ä¸€ä¸ªæ–°çš„å†…å­˜å—å¹¶é“¾æ¥åˆ°è€çš„æ ˆå†…å­˜å—ï¼Œæ–°çš„æ–¹æ³•ä¼šåˆ†é…ä¸€ä¸ªä¸¤å€å¤§çš„å†…å­˜å—å¹¶æŠŠè€çš„å†…å­˜å—å†…å®¹å¤åˆ¶åˆ°æ–°çš„å†…å­˜å—é‡Œã€‚è¿™æ ·åšæ„å‘³ç€å½“æ ˆç¼©å‡å›ä¹‹å‰å¤§å°æ—¶ï¼Œæˆ‘ä»¬ä¸éœ€è¦åšä»»ä½•äº‹æƒ…ã€‚æ ˆçš„ç¼©å‡æ²¡æœ‰ä»»ä½•ä»£ä»·ã€‚è€Œä¸”ï¼Œå½“æ ˆå†æ¬¡æ‰©å±•æ—¶ï¼Œè¿è¡Œç¯å¢ƒä¹Ÿä¸éœ€è¦å†åšä»»ä½•äº‹ã€‚å®ƒå¯ä»¥é‡ç”¨ä¹‹å‰åˆ†é…çš„ç©ºé—´ã€‚</p><p>æ ˆçš„å¤åˆ¶å¬èµ·æ¥å¾ˆå®¹æ˜“ï¼Œä½†å®é™…æ“ä½œå¹¶éé‚£ä¹ˆç®€å•ã€‚å­˜å‚¨åœ¨æ ˆä¸Šçš„å˜é‡çš„åœ°å€å¯èƒ½å·²ç»è¢«ä½¿ç”¨åˆ°ã€‚ä¹Ÿå°±æ˜¯è¯´ç¨‹åºä½¿ç”¨åˆ°äº†ä¸€äº›æŒ‡å‘æ ˆçš„æŒ‡é’ˆã€‚å½“ç§»åŠ¨æ ˆçš„æ—¶å€™ï¼Œæ‰€æœ‰æŒ‡å‘æ ˆé‡Œå†…å®¹çš„æŒ‡é’ˆéƒ½ä¼šå˜å¾—æ— æ•ˆã€‚ç„¶è€Œï¼ŒæŒ‡å‘æ ˆå†…å®¹çš„æŒ‡é’ˆè‡ªèº«ä¹Ÿå¿…å®šæ˜¯ä¿å­˜åœ¨æ ˆä¸Šçš„ã€‚è¿™æ˜¯ä¸ºäº†ä¿è¯å†…å­˜å®‰å…¨çš„å¿…è¦æ¡ä»¶ã€‚å¦åˆ™ä¸€ä¸ªç¨‹åºå°±æœ‰å¯èƒ½è®¿é—®ä¸€æ®µå·²ç»æ— æ•ˆçš„æ ˆç©ºé—´äº†ã€‚</p><p>å› ä¸ºåƒåœ¾å›æ”¶çš„éœ€è¦ï¼Œæˆ‘ä»¬å¿…é¡»çŸ¥é“æ ˆçš„å“ªäº›éƒ¨åˆ†æ˜¯è¢«ç”¨ä½œæŒ‡é’ˆäº†ã€‚å½“æˆ‘ä»¬ç§»åŠ¨æ ˆçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æ›´æ–°æ ˆé‡Œçš„æŒ‡é’ˆè®©å®ƒä»¬æŒ‡å‘æ–°çš„åœ°å€ã€‚æ‰€æœ‰ç›¸å…³çš„æŒ‡é’ˆéƒ½ä¼šè¢«æ›´æ–°ã€‚æˆ‘ä»¬ä½¿ç”¨äº†åƒåœ¾å›æ”¶çš„ä¿¡æ¯æ¥å¤åˆ¶æ ˆï¼Œä½†å¹¶ä¸æ˜¯ä»»ä½•ä½¿ç”¨æ ˆçš„å‡½æ•°éƒ½æœ‰è¿™äº›ä¿¡æ¯ã€‚å› ä¸ºå¾ˆå¤§ä¸€éƒ¨åˆ†è¿è¡Œç¯å¢ƒæ˜¯ç”¨Cè¯­è¨€å†™çš„ï¼Œå¾ˆå¤šè¢«è°ƒç”¨çš„è¿è¡Œç¯å¢ƒé‡Œçš„å‡½æ•°å¹¶æ²¡æœ‰æŒ‡é’ˆçš„ä¿¡æ¯ï¼Œæ‰€ä»¥ä¹Ÿå°±ä¸èƒ½å¤Ÿè¢«å¤åˆ¶äº†ã€‚å½“é‡åˆ°è¿™ç§æƒ…å†µæ—¶ï¼Œæˆ‘ä»¬åªèƒ½é€€å›åˆ°åˆ†å—å¼çš„æ ˆå¹¶æ”¯ä»˜ç›¸åº”çš„å¼€é”€ã€‚</p><p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆç°åœ¨è¿è¡Œç¯å¢ƒçš„å¼€å‘è€…æ­£åœ¨ç”¨Goè¯­è¨€é‡å†™è¿è¡Œç¯å¢ƒçš„å¤§éƒ¨åˆ†ä»£ç ã€‚æ— æ³•ç”¨Goè¯­è¨€é‡å†™çš„éƒ¨åˆ†ï¼ˆæ¯”å¦‚è°ƒåº¦å™¨çš„æ ¸å¿ƒä»£ç å’Œåƒåœ¾å›æ”¶å™¨ï¼‰ä¼šåœ¨ç‰¹æ®Šçš„æ ˆä¸Šè¿è¡Œã€‚è¿™ä¸ªç‰¹æ®Šæ ˆçš„å¤§å°ç”±è¿è¡Œç¯å¢ƒçš„å¼€å‘è€…è®¾ç½®ã€‚</p><p>è¿™äº›æ”¹å˜é™¤äº†ä½¿æ ˆå¤åˆ¶æˆä¸ºå¯èƒ½ï¼Œå®ƒä¹Ÿå…è®¸æˆ‘ä»¬åœ¨å°†æ¥å®ç°å¹¶è¡Œåƒåœ¾å›æ”¶ã€‚</p><p>å¦å¤–ä¸€ç§ä¸åŒçš„æ ˆå¤„ç†æ–¹å¼å°±æ˜¯åœ¨è™šæ‹Ÿå†…å­˜ä¸­åˆ†é…å¤§å†…å­˜æ®µã€‚ç”±äºç‰©ç†å†…å­˜åªæ˜¯åœ¨çœŸæ­£ä½¿ç”¨æ—¶æ‰ä¼šè¢«åˆ†é…ï¼Œå› æ­¤çœ‹èµ·æ¥å¥½ä¼¼ä½ å¯ä»¥åˆ†é…ä¸€ä¸ªå¤§å†…å­˜æ®µå¹¶è®©æ“ ä½œç³»ç»Ÿå¤„ç†å®ƒã€‚ä¸‹é¢æ˜¯è¿™ç§æ–¹æ³•çš„ä¸€äº›é—®é¢˜</p><p>é¦–å…ˆï¼Œ32ä½ç³»ç»Ÿåªèƒ½æ”¯æŒ4Gå­—èŠ‚è™šæ‹Ÿå†…å­˜ï¼Œå¹¶ä¸”åº”ç”¨åªèƒ½ç”¨åˆ°å…¶ä¸­çš„3Gç©ºé—´ã€‚ç”±äºåŒæ—¶è¿è¡Œç™¾ä¸‡goroutinesçš„æƒ…å†µå¹¶ä¸å°‘è§ï¼Œå› æ­¤ä½ å¾ˆå¯ èƒ½ç”¨å…‰è™šæ‹Ÿå†…å­˜ï¼Œå³ä¾¿æˆ‘ä»¬å‡è®¾æ¯ä¸ªgoroutineçš„stackåªæœ‰8Kã€‚</p><p>ç¬¬äºŒï¼Œç„¶è€Œæˆ‘ä»¬å¯ä»¥åœ¨64ä½ç³»ç»Ÿä¸­åˆ†é…å¤§å†…å­˜ï¼Œå®ƒä¾èµ–äºè¿‡é‡å†…å­˜ä½¿ç”¨ã€‚æ‰€è°“è¿‡é‡ä½¿ç”¨æ˜¯æŒ‡å½“ä½ åˆ†é…çš„å†…å­˜å¤§å°è¶…å‡ºç‰©ç†å†…å­˜å¤§å°æ—¶ï¼Œä¾èµ–æ“ä½œç³»ç»Ÿä¿è¯ åœ¨éœ€è¦æ—¶èƒ½å¤Ÿåˆ†é…å‡ºç‰©ç†å†…å­˜ã€‚ç„¶è€Œï¼Œå…è®¸è¿‡é‡ä½¿ç”¨å¯èƒ½ä¼šå¯¼è‡´ä¸€äº›é£é™©ã€‚ç”±äºä¸€äº›è¿›ç¨‹åˆ†é…äº†è¶…å‡ºæœºå™¨ç‰©ç†å†…å­˜å¤§å°çš„å†…å­˜ï¼Œå¦‚æœè¿™äº›è¿›ç¨‹ä½¿ç”¨æ›´å¤šå†…å­˜ æ—¶ï¼Œæ“ä½œç³»ç»Ÿå°†ä¸å¾—ä¸ä¸ºå®ƒä»¬è¡¥å……åˆ†é…å†…å­˜ã€‚è¿™ä¼šå¯¼è‡´æ“ä½œç³»ç»Ÿå°†ä¸€äº›å†…å­˜æ®µæ”¾å…¥ç£ç›˜ç¼“å­˜ï¼Œè¿™å¸¸å¸¸ä¼šå¢åŠ ä¸å¯é¢„æµ‹çš„å¤„ç†å»¶è¿Ÿã€‚æ­£æ˜¯è€ƒè™‘åˆ°è¿™ä¸ªåŸå› ï¼Œä¸€ äº›æ–°ç³»ç»Ÿå…³é—­äº†å¯¹è¿‡é‡ä½¿ç”¨çš„æ”¯æŒã€‚</p><h2 id="goroutineå’Œchannelçš„ä½œç”¨åˆ†åˆ«æ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#goroutineå’Œchannelçš„ä½œç”¨åˆ†åˆ«æ˜¯ä»€ä¹ˆ"><span>Goroutineå’ŒChannelçš„ä½œç”¨åˆ†åˆ«æ˜¯ä»€ä¹ˆ?</span></a></h2><p>è¿›ç¨‹æ˜¯å†…å­˜èµ„æºç®¡ç†å’Œcpuè°ƒåº¦çš„æ‰§è¡Œå•å…ƒã€‚ä¸ºäº†æœ‰æ•ˆåˆ©ç”¨å¤šæ ¸å¤„ç†å™¨çš„ä¼˜åŠ¿ï¼Œå°†è¿›ç¨‹è¿›ä¸€æ­¥ç»†åˆ†ï¼Œå…è®¸ä¸€ä¸ªè¿›ç¨‹é‡Œå­˜åœ¨å¤šä¸ªçº¿ç¨‹ï¼Œè¿™å¤šä¸ªçº¿ç¨‹è¿˜æ˜¯å…±äº«åŒä¸€ç‰‡å†…å­˜ç©ºé—´ï¼Œä½†cpuè°ƒåº¦çš„æœ€å°å•å…ƒå˜æˆäº†çº¿ç¨‹ã€‚</p><p>é‚£åç¨‹åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Œä»¥åŠä¸çº¿ç¨‹çš„å·®å¼‚æ€§??</p><p>åç¨‹ï¼Œå¯ä»¥çœ‹ä½œæ˜¯è½»é‡çº§çš„çº¿ç¨‹ã€‚ä½†ä¸çº¿ç¨‹ä¸åŒçš„æ˜¯ï¼Œçº¿ç¨‹çš„åˆ‡æ¢æ˜¯ç”±æ“ä½œç³»ç»Ÿæ§åˆ¶çš„ï¼Œè€Œåç¨‹çš„åˆ‡æ¢åˆ™æ˜¯ç”±ç”¨æˆ·æ§åˆ¶çš„ã€‚</p><p>æœ€æ—©æ”¯æŒåç¨‹çš„ç¨‹åºè¯­è¨€åº”è¯¥æ˜¯lispæ–¹è¨€schemeé‡Œçš„continuationï¼ˆç»­å»¶ï¼‰ï¼Œç»­å»¶å…è®¸schemeä¿å­˜ä»»æ„å‡½æ•°è°ƒç”¨çš„ç°åœºï¼Œä¿å­˜èµ·æ¥å¹¶é‡æ–°æ‰§è¡Œã€‚Lua,C#,pythonç­‰è¯­è¨€ä¹Ÿæœ‰è‡ªå·±çš„åç¨‹å®ç°ã€‚</p><p>Goä¸­çš„goroutinueå°±æ˜¯åç¨‹,å¯ä»¥å®ç°å¹¶è¡Œï¼Œå¤šä¸ªåç¨‹å¯ä»¥åœ¨å¤šä¸ªå¤„ç†å™¨åŒæ—¶è·‘ã€‚è€Œåç¨‹åŒä¸€æ—¶åˆ»åªèƒ½åœ¨ä¸€ä¸ªå¤„ç†å™¨ä¸Šè·‘ï¼ˆå¯ä»¥æŠŠå®¿ä¸»è¯­è¨€æƒ³è±¡æˆå•çº¿ç¨‹çš„å°±å¥½äº†ï¼‰ã€‚ ç„¶è€Œ,å¤šä¸ªgoroutineä¹‹é—´çš„é€šä¿¡æ˜¯é€šè¿‡channelï¼Œè€Œåç¨‹çš„é€šä¿¡æ˜¯é€šè¿‡yieldå’Œresume()æ“ä½œã€‚</p><p>goroutineéå¸¸ç®€å•ï¼Œåªéœ€è¦åœ¨å‡½æ•°çš„è°ƒç”¨å‰é¢åŠ å…³é”®å­—goå³å¯ï¼Œä¾‹å¦‚:</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>go elegance()
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥å¯åŠ¨5ä¸ªgoroutinesåˆ†åˆ«æ‰“å°ç´¢å¼•ã€‚</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>func main() {
    for i:=1;i&lt;5;i++ {
        go func(i int) {
            fmt.Println(i)
        }(i)
    }
    // åœæ­‡5sï¼Œä¿è¯æ‰“å°å…¨éƒ¨ç»“æŸ
    time.Sleep(5*time.Second)
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨åˆ†ægoroutineæ‰§è¡Œçš„éšæœºæ€§å’Œå¹¶å‘æ€§ï¼Œå¯åŠ¨äº†5ä¸ªgoroutineï¼Œå†åŠ ä¸Šmainå‡½æ•°çš„ä¸»goroutineï¼Œæ€»å…±æœ‰6ä¸ªgoroutinesã€‚ç”±äºgoroutineç±»ä¼¼äºâ€å®ˆæŠ¤çº¿ç¨‹â€œï¼Œå¼‚æ­¥æ‰§è¡Œçš„,å¦‚æœä¸»goroutineä¸ç­‰å¾…ç‰‡åˆ»ï¼Œå¯èƒ½ç¨‹åºå°±æ²¡æœ‰è¾“å‡ºæ‰“å°äº†ã€‚</p><p>åœ¨Golangä¸­channelåˆ™æ˜¯goroutinuesä¹‹é—´è¿›è¡Œé€šä¿¡çš„æ¸ é“ã€‚</p><p>å¯ä»¥æŠŠchannelå½¢è±¡æ¯”å–»ä¸ºå·¥å‚é‡Œçš„ä¼ é€å¸¦,ä¸€å¤´çš„ç”Ÿäº§è€…goroutineå¾€ä¼ è¾“å¸¦æ”¾ä¸œè¥¿,å¦ä¸€å¤´çš„æ¶ˆè´¹è€…goroutinueåˆ™ä»è¾“é€å¸¦å–ä¸œè¥¿ã€‚channelå®é™…ä¸Šæ˜¯ä¸€ä¸ªæœ‰ç±»å‹çš„æ¶ˆæ¯é˜Ÿåˆ—,éµå¾ªå…ˆè¿›å…ˆå‡ºçš„ç‰¹ç‚¹ã€‚</p><ol><li>channelçš„æ“ä½œç¬¦å·</li></ol><p>ch &lt;- data è¡¨ç¤ºdataè¢«å‘é€ç»™channel chï¼›</p><p>data &lt;- ch è¡¨ç¤ºä»channel chå–ä¸€ä¸ªå€¼ï¼Œç„¶åèµ‹ç»™dataã€‚</p><ol><li>é˜»å¡å¼channel</li></ol><p>channelé»˜è®¤æ˜¯æ²¡æœ‰ç¼“å†²åŒºçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œé€šä¿¡æ˜¯é˜»å¡çš„ã€‚sendæ“ä½œå¿…é¡»ç­‰åˆ°æœ‰æ¶ˆè´¹è€…acceptæ‰ç®—å®Œæˆã€‚</p><p>åº”ç”¨ç¤ºä¾‹:</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>func main() {
    ch1 := make(chan int)
    go pump(ch1) // pump hangs
    fmt.Println(&lt;-ch1) // prints only 1
}

func pump(ch chan int) {
    for i:= 1; ; i++ {
        ch &lt;- i
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨å‡½æ•°pump()é‡Œçš„channelåœ¨æ¥å—åˆ°ç¬¬ä¸€ä¸ªå…ƒç´ åå°±è¢«é˜»å¡äº†ï¼Œç›´åˆ°ä¸»goroutinueå–èµ°äº†æ•°æ®ã€‚æœ€ç»ˆchannelé˜»å¡åœ¨æ¥å—ç¬¬äºŒä¸ªå…ƒç´ ï¼Œç¨‹åºåªæ‰“å° 1ã€‚</p><p>æ²¡æœ‰ç¼“å†²(buffer)çš„channelåªèƒ½å®¹çº³ä¸€ä¸ªå…ƒç´ ï¼Œè€Œå¸¦æœ‰ç¼“å†²(buffer)channelåˆ™å¯ä»¥éé˜»å¡å®¹çº³Nä¸ªå…ƒç´ ã€‚å‘é€æ•°æ®åˆ°ç¼“å†²(buffer) channelä¸ä¼šè¢«é˜»å¡ï¼Œé™¤échannelå·²æ»¡ï¼›åŒæ ·çš„ï¼Œä»ç¼“å†²(buffer) channelå–æ•°æ®ä¹Ÿä¸ä¼šè¢«é˜»å¡ï¼Œé™¤échannelç©ºäº†ã€‚</p><h2 id="æ€ä¹ˆæŸ¥çœ‹goroutineçš„æ•°é‡" tabindex="-1"><a class="header-anchor" href="#æ€ä¹ˆæŸ¥çœ‹goroutineçš„æ•°é‡"><span>æ€ä¹ˆæŸ¥çœ‹Goroutineçš„æ•°é‡?</span></a></h2><p>GOMAXPROCSä¸­æ§åˆ¶çš„æ˜¯æœªè¢«é˜»å¡çš„æ‰€æœ‰Goroutine,å¯ä»¥è¢«Multiplexåˆ°å¤šå°‘ä¸ªçº¿ç¨‹ä¸Šè¿è¡Œ,é€šè¿‡GOMAXPROCSå¯ä»¥æŸ¥çœ‹Goroutineçš„æ•°é‡ã€‚</p></div><!--[--><!----><!--]--><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/xiaobaiTech/golang-full-stack/edit/main/src/golang/é¢è¯•é¢˜/2.Goè¿›é˜¶.md" rel="noopener noreferrer" target="_blank" aria-label="åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><div class="update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: xiaobaidebug@gmail.com">xiaobai</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link nav-link prev" href="/golang/%E9%9D%A2%E8%AF%95%E9%A2%98/1.Go%E5%85%A5%E9%97%A8.html" aria-label="Go å…¥é—¨é¢è¯•é¢˜"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->Go å…¥é—¨é¢è¯•é¢˜</div></a><!----></nav><div id="comment" class="giscus-wrapper input-top" style="display:block;"><div class="loading-icon-wrapper" style="display:flex;align-items:center;justify-content:center;height:96px"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><!--[--><!----><!--]--><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer">é»˜è®¤é¡µè„š</div><div class="vp-copyright">Copyright Â© 2024 å°ç™½debug </div></footer></div><!--]--><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-Bdt4EgWg.js" defer></script>
  </body>
</html>
